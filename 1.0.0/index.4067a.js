window.__require=function t(e,n,o){function i(r,s){if(!n[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var p=n[r]={exports:{}};e[r][0].call(p.exports,function(t){return i(e[r][1][t]||t)},p,p.exports,t,e,n,o)}return n[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<o.length;r++)i(o[r]);return i}({Adaptive111001501:[function(t,e,n){"use strict";cc._RF.push(e,"6290bzMDGBJ9Y5twKF04vq7","Adaptive111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GameEventName111001501"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sc1=null,e.cs2=null,e.cz=null,e.logo=null,e.bg_di=null,e}return i(e,t),e.prototype.onLoad=function(){game.EventManager.getInstance().raiseEvent(core.GameCoreConst.mess_openBanner,{parent:this.node.getChildByName("banner")}),game.EventManager.getInstance().addEventListener(r.EventName.EVENT_WIN_GAME,this.showChuanzhangAni,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_WIN_MORE_THAN_BET,this.playAni,this),t.prototype.resize.call(this)},e.prototype.layoutLandscape=function(){this.sc1.active=!1,this.cs2.active=!1,this.cz.active=!1,this.bg_di.active=!1,this.logo.scale=1,this.logo.setPosition(0,445,0)},e.prototype.layoutPortrait=function(){this.sc1.active=!0,this.cs2.active=!0,this.cz.active=!0,this.bg_di.active=!0,this.cz.scale=2.2,this.logo.scale=1.2,this.logo.setPosition(0,460,0)},e.prototype.showChuanzhangAni=function(t,e){var n=this;e==r.WinType.fiveEven&&(this.playAni(),this.playSound());var o="idle01";switch(e){case r.WinType.SuperWin:case r.WinType.MargeWin:case r.WinType.BigWin:case r.WinType.win:o="idle02"}"idle01"!=o&&(this.cz.getComponent(sp.Skeleton).setAnimation(0,o,!1),this.cz.getComponent(sp.Skeleton).setCompleteListener(function(){n.cz.getComponent(sp.Skeleton).setAnimation(0,"idle01",!0)}))},e.prototype.playAni=function(){slot.SoundMger.instance.playEffect("winPrize")},e.prototype.playSound=function(){slot.SoundMger.instance.playEffect("Five_Prize"),console.log("\u64ad\u653e\u4e86\u4e94\u8fde\u97f3\u6548")},e.prototype.onDestroy=function(){game.EventManager.getInstance().removeEventListener(r.EventName.EVENT_WIN_GAME,this.showChuanzhangAni,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_WIN_MORE_THAN_BET,this.playAni,this)},a([l(cc.Node)],e.prototype,"sc1",void 0),a([l(cc.Node)],e.prototype,"cs2",void 0),a([l(cc.Node)],e.prototype,"cz",void 0),a([l(cc.Node)],e.prototype,"logo",void 0),a([l(cc.Node)],e.prototype,"bg_di",void 0),a([c],e)}(slot.BaseView);n.default=p,cc._RF.pop()},{"../GameEventName111001501":"GameEventName111001501"}],Banner111001501:[function(t,e,n){"use strict";cc._RF.push(e,"1a837zDyN9NBqgDZ5NzIzU9","Banner111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){var e=t.call(this)||this;return e.p_nodeBanner=null,e.bannerLabel=null,e.mKeys=[],e.mindex=0,e.mTime=8,e}return i(e,t),e.prototype.setNodeBanner=function(t){this.p_nodeBanner.active=t},e.prototype.onLoad=function(){},e.prototype.onEnable=function(){this.mKeys=slot.GData.getParameter("banner").banner[0].languageKeys[0],this.freshStr(),this.schedule(this.freshStr,this.mTime)},e.prototype.onDisable=function(){this.unschedule(this.freshStr),cc.Tween.stopAllByTarget(this.bannerLabel)},e.prototype.freshStr=function(){if(this.bannerLabel.x=0,cc.Tween.stopAllByTarget(this.bannerLabel),this.bannerLabel.getComponent(cc.Label).string=game.LanguageManager.getInstance().getDstStr(this.mKeys[this.mindex]),this.mindex++,this.mindex>=this.mKeys.length&&(this.mindex=0),this.bannerLabel.width>this.p_nodeBanner.width){var t=this.bannerLabel.width/2-this.p_nodeBanner.width/2;this.bannerLabel.x=t,cc.tween(this.bannerLabel).to(7,{x:-t}).start()}},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},a([c(cc.Node)],e.prototype,"p_nodeBanner",void 0),a([c(cc.Node)],e.prototype,"bannerLabel",void 0),a([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],BonusGame111001501:[function(t,e,n){"use strict";cc._RF.push(e,"b43dfAaZ+dLpaKBQ+Afd607","BonusGame111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_isClose=!1,e.numTime=0,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.LGACTIONRESP=function(){var t=this;cc.tween(this).delay(.5).call(function(){t.next()}).start()},e.prototype.init=function(){},e.prototype.onOpen=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]},e.prototype.onActionResult=function(){console.log("\u8fd4\u56de ------------------- ")},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),game.EventManager.getInstance().removeEventListener(slot.NetSlotConst.LGACTIONRESP,this.LGACTIONRESP,this)},e.prototype.getLastActionResult=function(){return this.onActionResult(),null},e.prototype.onClose=function(){},e.prototype.update=function(){},a([s],e)}(slot.AbstractBonusGameView));n.default=c,cc._RF.pop()},{}],Cannon:[function(t,e,n){"use strict";cc._RF.push(e,"b8e22cy9mZJGLnGTzwLNW/t","Cannon");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.p_nodeNumAn=null,e.p_nodeNumLiang=null,e.p_nodeLiang=null,e.p_nodeSprShanGuang=null,e.p_nodeFxAni=null,e.p_nodeUpShow=[],e.p_strFxAniName="",e.m_anCommonNumAtlas=null,e.m_liangCommonNumAtlas=null,e.m_isLiang=!1,e}return i(e,t),e.prototype.onLoad=function(){this.m_anCommonNumAtlas=this.p_nodeNumAn.getComponent("CommonNumAtlas111001501"),this.m_liangCommonNumAtlas=this.p_nodeNumLiang.getComponent("CommonNumAtlas111001501")},e.prototype.init=function(){this.p_nodeNumAn.active=!0,this.p_nodeNumLiang.active=!1,this.p_nodeSprShanGuang.active=!1,this.m_anCommonNumAtlas.string="",this.m_liangCommonNumAtlas.string="",this.node.scale=1},e.prototype.setOnline=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1),e?(this.p_nodeLiang.active=t,this.node.scale=t?1.1:1):this.playAction(t,n)},e.prototype.setArrCannonUp=function(t){for(var e=function(e){var o=n.p_nodeUpShow[e];o.active=t,t?(o.active=!0,o.opacity=0,cc.tween(o).to(.3,{opacity:255}).start()):(o.opacity=255,cc.tween(o).to(.3,{opacity:0}).call(function(){o.opacity=255,o.active=!1}).start())},n=this,o=0;o<this.p_nodeUpShow.length;o++)e(o)},e.prototype.playCannonUp=function(t){var e=this;this.setCommonNum(t),1==this.p_nodeLiang.active?cc.tween(this.node).to(.2,{scale:1.2}).call(function(){cc.tween(e.node).to(.2,{scale:1.1}).call(function(){e.setArrCannonUp(!1)}).start()}).start():(this.p_nodeLiang.active=!0,cc.tween(this.node).to(.3,{scale:1.2}).call(function(){cc.tween(e.node).to(.3,{scale:1}).call(function(){e.setArrCannonUp(!1)}).start()}).start(),cc.tween(this.p_nodeLiang).delay(.3).to(1,{opacity:0}).call(function(){e.p_nodeLiang.opacity=255,e.p_nodeLiang.active=!1}).start())},e.prototype.playAction=function(t,e){var n=this;void 0===e&&(e=!1),1==t?(1==this.m_isLiang&&1==e?this._playUpAni():0==this.m_isLiang&&1==e?cc.tween(this).delay(.5).call(function(){n.p_nodeLiang.active=!0,n.playLight()}).start():(this.p_nodeLiang.active=!0,this.playLight()),this.m_isLiang=!0):this.playDark(e)},e.prototype.playLight=function(){var t=this;this.p_nodeSprShanGuang.active=!0,this.p_nodeSprShanGuang.scale=.5,cc.tween(this.p_nodeSprShanGuang).to(.3,{scale:.8}).call(function(){t.p_nodeSprShanGuang.active=!1}).start();var e=cc.sequence(cc.scaleTo(.5,1.2,1.2),cc.callFunc(function(){t.p_nodeNumAn.active=!1,t.p_nodeLiang.active=!0}),cc.scaleTo(.1,1.1,1.1));this.node.runAction(e)},e.prototype._playUpAni=function(t){var e=this;this.p_nodeFxAni.active=!0,this.p_nodeFxAni.getComponent(sp.Skeleton).setAnimation(0,this.p_strFxAniName,!1),this.p_nodeFxAni.getComponent(sp.Skeleton).setCompleteListener(function(){e.p_nodeFxAni.active=!1,t&&t(),cc.tween(e.node).to(.2,{scale:1}).start()})},e.prototype.playDark=function(t){var e=this;t&&this.p_strFxAniName.length>0&&1==this.m_isLiang?this._playUpAni(function(){e.p_nodeNumAn.active=!0,e.p_nodeLiang.active=!1}):(this.p_nodeNumAn.active=!0,this.p_nodeLiang.active=!1,cc.tween(this.node).to(.2,{scale:1}).start()),this.m_isLiang=!1},e.prototype.setCommonNum=function(){},e.prototype.start=function(){},a([c(cc.Node)],e.prototype,"p_nodeNumAn",void 0),a([c(cc.Node)],e.prototype,"p_nodeNumLiang",void 0),a([c(cc.Node)],e.prototype,"p_nodeLiang",void 0),a([c(cc.Node)],e.prototype,"p_nodeSprShanGuang",void 0),a([c(cc.Node)],e.prototype,"p_nodeFxAni",void 0),a([c({type:[cc.Node]})],e.prototype,"p_nodeUpShow",void 0),a([c(cc.String)],e.prototype,"p_strFxAniName",void 0),a([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],CommonNumAtlas111001501:[function(t,e,n){"use strict";cc._RF.push(e,"4b4eeau0QVJ0qVL2hHp+KpY","CommonNumAtlas111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},a([s],e)}(slot.CommonNumAtlasBase));n.default=c,cc._RF.pop()},{}],EliminateEffectUtils111001501:[function(t,e,n){"use strict";cc._RF.push(e,"9050681m01D5bDQBK+lz6Qq","EliminateEffectUtils111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EliminateEffectUtils111001501=void 0;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.runFallAction=function(t,e){for(var n=t.items,o=t.config,i=0;i<o.col;i++)for(var a=n[i],r=a.config,s=r.row-1;s>=0;s--){var c=a.renders[s],l=c.y,p=-a.config.row*a.config.gapHeight-a.config.girdHeight/2,h=a.config.gapHeight-a.config.girdHeight/2,u=a.dataList[s+1],m=.15*Math.abs(i-(r.col-1)/2)+.05*(r.row-s);if(c.active=!0,i==r.col-1&&0==s){var d=slot.Handler.create(this,function(){e.run(),slot.SoundMger.instance.playEffect(slot.SOUND_NAME.Symbol_Drop,!1)});this.fallItem(m,c,p,u,.3,h,l,d)}else this.fallItem(m,c,p,u,.3,h,l)}},e.fallItem=function(t,e,n,o,i,a,r,s){var c=Math.abs(n-e.y)/this.speed/1.2,l=Math.abs(r-a)/this.speed/1.2;cc.tween(e).delay(t).to(c,{y:n}).delay(i).call(function(){e.y=a,e.data=o,e.gotoAndStop(slot.SpinSlotView.STATE_ROLLING)}).to(l,{y:r}).call(function(){s&&s.run(),e.gotoAndStop(slot.SpinSlotView.STATE_DEFAULT),e.onDropEnd()}).start()},e}(slot.EliminateEffectUtils);n.EliminateEffectUtils111001501=a,cc._RF.pop()},{}],FreeGameResult:[function(t,e,n){"use strict";cc._RF.push(e,"d6e6cadh2pDRrrh49UHplWd","FreeGameResult");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onOpen=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]},e.prototype.onClose=function(){},e.prototype.update=function(){},a([s],e)}(game.UIView));n.default=c,cc._RF.pop()},{}],GameBg111001501:[function(t,e,n){"use strict";cc._RF.push(e,"597fcE2jUVAnZlW9rkQGMfA","GameBg111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GameEventName111001501"),s=t("../main/GameDataManager"),c=t("../main/HP111001501"),l=t("../main/MonsterCtr111001501"),p=t("../main/Result111001501"),h=t("../NumAtlasLabel111001501"),u=cc._decorator,m=u.ccclass,d=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mNBg1=null,e.mNBg2=null,e.mSBg1=null,e.mSBg2=null,e.mAnimNode=null,e.mGate=null,e.mGoldBag=null,e.mResult=null,e.mBaoXiang=null,e.mAwardNum=null,e.mPlayerNode=null,e.mPlayer=null,e.mPlayer2=null,e.mPlayerHP=null,e.mBossHp=null,e.mCat=null,e.mTip=null,e.mActAnimNode=null,e.mActAnimNode2=null,e.mBagImg=null,e.mBagImg2=null,e.mStoneParent=null,e.mSpGem=null,e.mStonePrefab=null,e.mMonstersPrefab=null,e.mGoldPrefab=null,e.mGoldPool=new cc.NodePool,e.mSkillPrefab=null,e.Boy_Idle_ELE_00=null,e.Attack_Hit_00=null,e.mSkillPool=new cc.NodePool,e.mIdleTipKeys=["111001501_element07","111001501_element08","111001501_element09","111001501_element10","111001501_element11","111001501_element12","111001501_element13","111001501_element14"],e.mCatStartFigktKeys=["111001501_element17","111001501_element18","111001501_element20","111001501_element21"],e.mPlayerStartFigktKeys=["111001501_element15","111001501_element16","111001501_element19","111001501_element22"],e.mCatFightEndKey=["111001501_element24","111001501_element25","111001501_element26","111001501_element28"],e.mPlayerFightEndKey=["111001501_element23","111001501_element27"],e.mBaoxiangKeys=["111001501_element41","111001501_element42","111001501_element43"],e.mIndex=0,e.mTipCd=8,e.mCanShowTip=!0,e.mCatY=450,e.mCatDist=170,e.mPlayerX=-140,e.mScene=1,e.mHasDrop=!1,e.mIsFristHit=!0,e.mIsShowWeek=!1,e.mHasFristAttack=!1,e.mRunTime=0,e.mIsAddTime=!1,e.mCurrPlayerAnim="",e.mStones=[],e.mStonePool=new cc.NodePool,e.mStoneDist=128,e.mStoneScale=.8,e.mGolds=[],e.mFloodY=180,e.mUpY=720,e}return i(e,t),e.prototype.onLoad=function(){game.EventManager.getInstance().addEventListener(r.EventName.EVENT_START_ROLL,this.onStartRoll,this),game.EventManager.getInstance().addEventListener(r.EventName.EVENT_END_ROLL,this.onEndRoll,this),game.EventManager.getInstance().addEventListener(r.EventName.EVENT_FREE_GAME_NUM,this._updateFreeGameNum,this),game.EventManager.getInstance().addEventListener(r.EventName.EVENT_PLAYER_START,this.go,this),game.EventManager.getInstance().addEventListener(r.EventName.EVENT_MONSTR_JT,this.monsterJT,this),game.EventManager.getInstance().addEventListener(r.EventName.EVENT_PLAY_ROLE_ANI,this.playerAnimEvet,this),game.EventManager.getInstance().addEventListener(r.EventName.EVENT_REREST_INFO,this.freshView,this),game.EventManager.getInstance().addEventListener(r.EventName.EVENT_START_PERV,this.startPerv,this),game.EventManager.getInstance().addEventListener(r.EventName.EVENT_FRIST_ATTACT,this.fristAttact,this),game.EventManager.getInstance().addEventListener(slot.CommonEventNames.EVENT_CLOSE_LOADING_VIEW,this.onCloseLoadingViewUI,this),this.Boy_Idle_ELE_00.active=!1,this.Attack_Hit_00.active=!1},e.prototype.initLayer=function(){},e.prototype.onEnable=function(){this.schedule(this.timeUpdate,1),this.changeBg(s.default.scene),this.playPlayerAnim("idle_relax"),this.mPlayerHP.active=!1,this.mBossHp.active=!1,s.default.cat=this.mCat,s.default.spGem=this.mSpGem},e.prototype.onDisable=function(){this.unschedule(this.timeUpdate)},e.prototype.changeBg=function(t){this.mScene=t,this.mNBg1.active=1==this.mScene,this.mNBg2.active=1==this.mScene,this.mSBg1.active=2==this.mScene,this.mSBg2.active=2==this.mScene,this.stopBgAnim(),slot.SoundMger.instance.playMusic(this.getMusic())},e.prototype.playBgAnim=function(){1==this.mScene?(this.mNBg1.getComponent(sp.Skeleton).timeScale=1,this.mNBg2.getComponent(sp.Skeleton).timeScale=1):2==this.mScene&&(this.mSBg1.getComponent(sp.Skeleton).timeScale=1,this.mSBg2.getComponent(sp.Skeleton).timeScale=1)},e.prototype.stopBgAnim=function(){1==this.mScene?(this.mNBg1.getComponent(sp.Skeleton).timeScale=0,this.mNBg2.getComponent(sp.Skeleton).timeScale=0):2==this.mScene&&(this.mSBg1.getComponent(sp.Skeleton).timeScale=0,this.mSBg2.getComponent(sp.Skeleton).timeScale=0)},e.prototype.onCloseLoadingViewUI=function(){this.mPlayerNode.x=slot.PlayerManager.instance.isNew?this.mPlayerX-440:this.mPlayerX,this.mCat.x=this.mPlayerNode.x-this.mCatDist,slot.PlayerManager.instance.isNew?this.mCanShowTip=!1:this.showCatTxtTip(this.mIdleTipKeys[Math.floor(Math.random()*this.mIdleTipKeys.length)]),this.mMonsterNode||slot.SoundMger.instance.playMusic(this.getMusic())},e.prototype.timeUpdate=function(){0==s.default.status&&this.mCanShowTip&&(this.mIndex++,this.mIndex>=this.mTipCd&&this.showCatTxtTip(this.mIdleTipKeys[Math.floor(Math.random()*this.mIdleTipKeys.length)]))},e.prototype.showCatTxtTip=function(t,e){void 0===e&&(e=0),this.mIndex=0;var n=this.mTip;n.opacity=0,n.active=!0,n.getChildByName("bg0").active=0==e,n.getChildByName("bg1").active=1==e,n.getChildByName("txt").getComponent(cc.Label).string=game.LanguageManager.getInstance().getDstStr(t),cc.Tween.stopAllByTarget(n),cc.tween(n).to(.2,{opacity:255}).delay(2).to(.2,{opacity:0}).call(function(){n.active=!1}).start()},e.prototype.showPlayerTip=function(t){this.mIndex=0;var e=this.node.getChildByName("playerTxtTip");e.opacity=0,e.active=!0,cc.Tween.stopAllByTarget(e),e.getChildByName("txt").getComponent(cc.Label).string=game.LanguageManager.getInstance().getDstStr(t),cc.tween(e).to(.2,{opacity:255}).delay(2).to(.2,{opacity:0}).call(function(){e.active=!1}).start()},e.prototype.showBossTip=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=130),this.mIndex=0;var o=this.node.getChildByName("bossTxtTip");o.opacity=0,o.active=!0,o.x=n,cc.Tween.stopAllByTarget(o),o.getChildByName("txt").getComponent(cc.Label).string=game.LanguageManager.getInstance().getDstStr(t),cc.tween(o).delay(e).to(.2,{opacity:255}).delay(2).to(.2,{opacity:0}).call(function(){o.active=!1}).start()},e.prototype.go=function(){var t=this;this.playPlayerAnim("run");var e=this.mPlayerX-this.mCatDist;cc.tween(this.mCat).to(1.2,{x:e}).start(),cc.tween(this.mPlayerNode).to(1.2,{x:this.mPlayerX}).call(function(){0==t.mRunTime&&t.playPlayerAnim("run_to_idle","idle_relax")}).start(),this.scheduleOnce(function(){t.mCanShowTip=!0,t.showCatTxtTip("111001501_element06")},1)},e.prototype.playPlayerAnim=function(t,e,n,o,i){var a=this;void 0===e&&(e=null),void 0===n&&(n=!0),void 0===o&&(o=0),void 0===i&&(i=0),"hit"==t&&(this.Attack_Hit_00.active=!0,this.Attack_Hit_00.getComponent(cc.Animation).on("finished",function(){a.Attack_Hit_00.active=!1},this),this.Attack_Hit_00.getComponent(cc.Animation).play()),this.Boy_Idle_ELE_00.active="idle_battle"==e;var r=null!=e;this.mPlayer.active=0==o,this.mPlayer2.active=1==o,this.mCurrPlayerAnim=t,0==o?(this.mPlayer.getComponent(sp.Skeleton).setAnimation(0,t,!r&&n),e&&(this.mCurrPlayerAnim=e,this.mPlayer.getComponent(sp.Skeleton).setCompleteListener(function(){a.mPlayer.getComponent(sp.Skeleton).animation==t&&a.mPlayer.getComponent(sp.Skeleton).setAnimation(0,e,n)}))):(this.mPlayer2.getComponent(cc.Animation).play(t,0),e&&(this.mCurrPlayerAnim=e,this.mPlayer2.getComponent(cc.Animation).on("finished",function(){a.mPlayer2.getComponent(cc.Animation).currentClip.name==t&&a.playPlayerAnim(e,null,!0,i)},this)))},e.prototype.playPlayerAnimOnce=function(t,e,n){var o=this;if(this.mPlayer.active=0==n,this.mPlayer2.active=1==n,this.mCurrPlayerAnim=t,0==n)this.mPlayer.getComponent(sp.Skeleton).setAnimation(0,t,!1),this.mPlayer.getComponent(sp.Skeleton).setCompleteListener(function(){o.mPlayer.getComponent(sp.Skeleton).animation==t&&e()});else{this.mPlayer2.getComponent(cc.Animation).play(t,0);var i=!1;this.mPlayer2.getComponent(cc.Animation).on("finished",function(){i||e(),i=!0},this)}},e.prototype.onStartRoll=function(){var t=this;s.default.playAnimOnNode(this.mPlayer,"run",!0),this.playBgAnim(),this.mGate.active&&cc.tween(this.mGate).to(1,{x:-550}).call(function(){t.mGate.active=!1}).start(),this.mHasDrop=!1,this.mIsFristHit=!0,this.mSpGem.active&&(s.default.specialGem||(this.mSpGem.active=!1)),this.mRunTime=(new Date).getTime()},e.prototype.onEndRoll=function(){var t=this;if(s.default.isRolling=!1,0==s.default.status||s.default.isTriStartStone()||s.default.isTriStartFight()){var e=1;(s.default.isTriStartStone()||s.default.isTriStartFight())&&(e=0),this.scheduleOnce(function(){s.default.isRolling&&0!=e||(t.mHasFristAttack||t.mIsShowWeek||s.default.playAnimOnNode(t.mPlayer,"idle_relax",!0),t.stopBgAnim())},e),0==this.mAnimNode.x||s.default.isTriStartStone()||s.default.isTriStartFight()||cc.tween(this.mAnimNode).to(1,{x:0}).start()}},e.prototype.playFightWinAnim=function(t){void 0===t&&(t=!0),this.playCatAnim("victory","idle");var e="dong";s.default.fightResult&&s.default.fightResult.length&&s.default.getReaward()<5*slot.SpinManager.instance.betCost&&(e="cheer"),this.playPlayerAnim(e,"idle_relax",!0,1),slot.SoundMger.instance.playEffect(r.SOUND_NAME.Cat_Victory),slot.SoundMger.instance.playEffect(r.SOUND_NAME.Player_Celebrate)},e.prototype.playCatAnim=function(t,e){void 0===e&&(e=null);var n=this.mCat.getChildByName("cat");n.getComponent(cc.Animation).play(t,0),e&&n.getComponent(cc.Animation).on("finished",function(){n.getComponent(cc.Animation).currentClip.name==t&&n.getComponent(cc.Animation).play(e,0)},this)},e.prototype.initStones=function(t,e){var n,o=this;void 0===e&&(e=null),this.mStoneParent.y=180,this.mStones=[];var i=this.mPlayerNode.x+200;this.mStoneParent.x=i+500;for(var a=s.default.getReawardType(),r=0;r<t;r++)(n=this.mStonePool.get())||((n=cc.instantiate(this.mStonePrefab)).scale=this.mStoneScale),n.x=0,n.y=r*this.mStoneDist,n.name="stone_"+this.getStoneIndex(r,r==t-1),this.mStoneParent.addChild(n),this.mStones.push(n),s.default.playAnimOnNode(n,n.name);var c=e?4:0;cc.tween(this.mStoneParent).to(c,{x:i}).call(function(){3==a?o.showCatTxtTip("111001501_element40"):o.showCatTxtTip("111001501_element44")}).start(),this.scheduleOnce(function(){e&&e()},c),1==a||2==a?(this.mGoldBag.x=this.mStoneParent.x,this.mGoldBag.y=this.mStoneParent.y+this.mStones.length*this.mStoneDist+50,this.mGoldBag.active=!0,this.mGoldBag.getChildByName("props04").active=1==a,this.mGoldBag.getChildByName("props02").active=2==a,cc.tween(this.mGoldBag).to(c,{x:i}).start()):3==a&&(this.mBaoXiang.x=i+200+500,this.mBaoXiang.active=!0,s.default.playAnimOnNode(this.mBaoXiang.getChildByName("baoxiang"),"animation3"),this.mBaoXiang.getChildByName("baoxiangpc").active=!1,cc.tween(this.mBaoXiang).to(c,{x:i+200}).start()),cc.tween(this.mAnimNode).to(c,{x:-50}).start()},e.prototype.cutStone=function(t,e){var n=this,o=s.default.stoneResult[0];if(e&&(o=s.default.stoneResult[1]),o&&(s.default.gemTimes>1?(this.playPlayerAnim("liankan","idle_battle",!0,1),slot.SoundMger.instance.playEffect(r.SOUND_NAME.Player_Combo)):(slot.SoundMger.instance.playEffect(r.SOUND_NAME.Player_Attack),this.playPlayerAnim("atk","idle_battle"))),this.showActEff(!1),o){var i=this;this.scheduleOnce(function(){var a=i.mStoneParent.getChildByName("stoneBreak");a.active=!0,a.setSiblingIndex(i.mStoneParent.childrenCount-1),a.getComponent(cc.Animation).play("stoneBreak",0);var c=!1;a.getComponent(cc.Animation).on("finished",function(){if(!c){c=!0,a.active=!1;for(var l,p=i.mStones.length-o.newStoneNum,h=0;h<p;h++)(l=n.mStones.shift())&&s.default.playAnimOnNode(l,l.name+"_broken",!1,null,function(t){t.removeFromParent(),i.mStonePool.put(t)});slot.SoundMger.instance.playEffect(r.SOUND_NAME.Stone_Break),i.scheduleOnce(function(){for(var t,e=0,o=0;o<i.mStones.length;o++)l=i.mStones[o],t=o*i.mStoneDist,cc.tween(l).to(.1*p,{y:t},{easing:"elasticOut"}).call(function(){if(0==e){var t=i.mStoneParent.getChildByName("hui");t.active=!0,s.default.playAnimOnNode(t,"hui",!1,null,function(){t.active=!1})}e++}).start();i.mGoldBag.active&&(t=i.mStoneParent.y+n.mStones.length*n.mStoneDist+50,cc.tween(i.mGoldBag).to(.1*p,{y:t},{easing:"elasticOut"}).start())},.5),e?i.cutStoneComplete(t,o):t&&t()}},i)},.6)}else e?this.cutStoneComplete(t,o):t&&t()},e.prototype.cutStoneComplete=function(t){var e=this,n=slot.SpinManager.instance.isInTurbo?1.5:1;this.scheduleOnce(function(){if(0==s.default.stoneInfo.stoneNum){var n=s.default.getReawardType();1==n&&slot.SoundMger.instance.playEffect(r.SOUND_NAME.Player_Money_To_Pocket),cc.tween(e.mGoldBag).to(.5,{x:e.mPlayerNode.x,y:e.mPlayerNode.y+100}).call(function(){if(e.mGoldBag.active=!1,1==n){e.mAwardNum.active=!0,e.mAwardNum.opacity=255,e.mAwardNum.y=316;var o=s.default.getReaward();e.mAwardNum.getComponent(h.default).string=slot.SlotUtils.formatNumber(o),cc.tween(e.mAwardNum).to(1,{opacity:0,y:516}).call(function(){e.mAwardNum.active=!1,game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_UPDATE_WINSCORE,s.default.currWinScore,!1,!1,!1,null,!0),game.EventManager.getInstance().raiseEvent(r.EventName.EVENT_PLAY_SCORE_ANI,s.default.currWinScore,2,!0)}).start(),slot.SoundMger.instance.playEffect(r.SOUND_NAME.Stone_Drop_Bag),e.scheduleOnce(function(){t()},1.1)}else 2==n?e.showCangBaoTu(function(){t()}):3==n&&(game.EventManager.getInstance().raiseEvent(r.EventName.EVENT_KEY_EVENT,!0,2),e.scheduleOnce(function(){e.openBaoXiang(function(){t()})},2))}).start()}else t()},n)},e.prototype.showCangBaoTu=function(t){s.default.mapInfo?(this.showCatTxtTip("111001501_element39"),game.EventManager.getInstance().raiseEvent(r.EventName.EVENT_KEY_EVENT,!0,0),this.scheduleOnce(function(){t&&t()},5)):(s.default.isCutCangBaoTuStone=!0,t&&t())},e.prototype.openBaoXiang=function(t){var e=this;this.showCatTxtTip(this.mBaoxiangKeys[Math.floor(Math.random()*this.mBaoxiangKeys.length)]),slot.SoundMger.instance.playEffect(r.SOUND_NAME.Treasure_Open),s.default.playAnimOnNode(this.mBaoXiang.getChildByName("baoxiang"),"animation",!1,null,function(){s.default.playAnimOnNode(e.mBaoXiang.getChildByName("baoxiang"),"animation2",!0)}),this.scheduleOnce(function(){e.mBaoXiang.getChildByName("baoxiangpc").active=!0;var n,o=e.mBaoXiang.x,i=e.mBaoXiang.y+130;e.mBagImg.x=o+20,e.mBagImg.y=i,e.mBagImg.active=!0,e.flyNode(e.mBagImg,0,!0);for(var a=0;a<15;a++)(n=e.mGoldPool.get())||(n=cc.instantiate(e.mGoldPrefab)),e.mAnimNode.addChild(n),n.x=o,n.y=i-10,e.mGolds.push(n),e.flyNode(n,.1*a);e.scheduleOnce(function(){e.showResult(function(){t()})},5)},.2)},e.prototype.showResult=function(t){var e=this;this.mResult.getChildByName("bg").active=!0;var n=s.default.getReaward();this.mResult.getComponent(p.default).setData(n),this.mResult.active=!0,this.mResult.scale=.8,this.mBaoXiang.active=!1,this.mResult.x=0,-50==this.mAnimNode.x&&(this.mResult.x=50),this.clearGolds(),game.EventManager.getInstance().raiseEvent(r.EventName.EVENT_PLAY_SCORE_ANI,0,2,!0),game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_UPDATE_WINSCORE,s.default.currWinScore,!1,!1,!1,null,!0),this.scheduleOnce(function(){e.mResult.getChildByName("bg").active=!1,cc.tween(e.mResult).to(.2,{scale:0}).call(function(){e.mResult.active=!1,t()}).start()},5),this.scheduleOnce(function(){e.playFightWinAnim()},3),slot.SoundMger.instance.playEffect(r.SOUND_NAME.Player_Money_To_Pocket),slot.SoundMger.instance.playEffect(r.SOUND_NAME.Battle_Victory)},e.prototype.bossChat=function(t){var e=this;cc.tween(this.mAnimNode).to(.3,{x:-200}).call(function(){e.showBossTip("111001501_element37",0,-200),e.mMonsterNode.getComponent(l.default).playBossLiveAnim()}).delay(4).to(.5,{x:0}).call(function(){t(),e.clearMonster()}).start()},e.prototype.clearGolds=function(){var t,e,n=this,o=this.mPlayerNode.x,i=this.mPlayerNode.y+150;cc.tween(this.mBagImg).to(.5,{x:o,y:i}).call(function(){n.mBagImg.active=!1}).start(),this.mBagImg2&&cc.tween(this.mBagImg2).to(.5,{x:o,y:i}).call(function(){n.mBagImg2.active=!1}).start();for(var a=0;a<this.mGolds.length;a++)t=this.mGolds[a],(e=Math.abs(t.x-o)/200)<.2&&(e=.2),cc.tween(t).to(e,{x:o,y:i}).call(function(t){t.removeFromParent(),n.mGoldPool.put(t)}).start();this.mGolds=[]},e.prototype.flyNode=function(t,e,n){void 0===n&&(n=!1);var o,i=t.x,a=this.mUpY+250,r=i-50*Math.random(),s=100+100*Math.random(),c=50;n?(o=i-150,a=this.mUpY-40*Math.random(),c=0):o=i-700*Math.random(),cc.tween(t).delay(e).to(.6,{x:r,y:a}).to(.1,{x:o+c}).to(.6,{x:o,y:this.mFloodY}).to(.5,{x:o-10,y:this.mFloodY+s}).to(.5,{x:o-10,y:this.mFloodY}).to(.6,{x:o-20,y:this.mFloodY+.6*s}).to(.6,{x:o-20,y:this.mFloodY}).to(.8,{x:o-30,y:this.mFloodY+.3*s}).to(.8,{x:o-30,y:this.mFloodY}).start()},e.prototype.flyNode2=function(t,e){var n=t.x,o=t.y+100*Math.random(),i=n+-200*Math.random(),a=t.y-this.mFloodY,r=i;cc.tween(t).delay(e).to(.4,{x:i,y:o}).to(.6,{x:r,y:this.mFloodY}).to(.5,{x:r-10,y:this.mFloodY+a}).to(.5,{x:r-10,y:this.mFloodY}).to(.6,{x:r-20,y:this.mFloodY+.6*a}).to(.6,{x:r-20,y:this.mFloodY}).to(.8,{x:r-30,y:this.mFloodY+.3*a}).to(.8,{x:r-30,y:this.mFloodY}).start()},e.prototype.getStoneIndex=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=!1);var n=["a","b","c"],o=n[0];return e?o=n[2]:t>0&&(o=n[1]),o},e.prototype.playerAnimEvet=function(t,e){if(1==e){if(this.mIsShowWeek)return;this.playPlayerAnim("win_to_run","run"),slot.SoundMger.instance.playEffect(r.SOUND_NAME.Player_Celebrate_Normal)}else if(2==e){if(this.mIsShowWeek)return;s.default.showXuLi1()&&this.xuli()}else 3==e&&this.showCatTxtTip("111001501_element38")},e.prototype.xuli=function(){if(s.default.showXuLi2()){var t=this.mAnimNode.getChildByName("xuliEffNode").getChildByName("xuli2");t.angle=0,t.scaleX=2,this.scheduleOnce(function(){t.active=!0},.5)}"jujian"!=this.mCurrPlayerAnim&&this.playPlayerAnim("xulistart","jujian",!0,1,1),this.showActEff(!0)},e.prototype.clearStones=function(){for(var t,e=0;e<this.mStones.length;e++)(t=this.mStones[e]).removeFromParent(),this.mStonePool.put(t);this.mStones=[],this.mBagImg.active=!1,this.mBaoXiang.active=!1,this.mGoldBag.active=!1,this.mBagImg2&&(this.mBagImg2.active=!1)},e.prototype.fristAttact=function(){this.mHasFristAttack=!1,s.default.isTriStone()?(this.cutStone(null,!1),this.mHasFristAttack=!0):s.default.isTriFight()&&(this.cutMonster(null,!1),this.mHasFristAttack=!0)},e.prototype.startPerv=function(t,e){var n=this,o=0;s.default.isShowingRespin&&0==s.default.gemTimes&&(o=2,s.default.isShowingRespin=!1),s.default.isCutCangBaoTuStone&&(this.scheduleOnce(function(){n.showCangBaoTu(null),s.default.isCutCangBaoTuStone=!1},2),o+=5),this.mIsAddTime||0==o&&this.mHasFristAttack&&(o=2,slot.SpinManager.instance.isInTurbo&&s.default.isTriFight()&&(o=4),this.mIsAddTime=!0),this.scheduleOnce(function(){e.run()},o)},e.prototype.monsterJT=function(t,e){var n=this;if(1!=s.default.isFristLogin&&s.default.hasRun){var o=0;s.default.isShowingRespin&&(o=1,s.default.isShowingRespin=!1),s.default.isReapRun&&(o=slot.SpinManager.instance.isInTurbo?3:1),s.default.isCutCangBaoTuStone&&(this.scheduleOnce(function(){n.showCangBaoTu(null),s.default.isCutCangBaoTuStone=!1},1),o+=5),this.mIsAddTime||0==o&&this.mHasFristAttack&&slot.SpinManager.instance.isInTurbo&&s.default.isTriFight()&&(o=3),this.scheduleOnce(function(){s.default.isTriStartStone()?n.initStones(s.default.stoneInfo.stoneNum,function(){e.run()}):s.default.isTriStone()?n.cutStone(function(){e.run()},!0):s.default.isTriStartFight()?n.initMonster(s.default.fightInfo,function(){e.run()}):s.default.isTriFight()?n.cutMonster(function(){e.run()},!0):s.default.scene!=n.mScene?(n.changeScene(null),n.scheduleOnce(function(){e.run()},9)):e.run(),n.mIsAddTime=!1},o)}else e.run()},e.prototype.initMonster=function(t,e){var n=this;this.mMonsterNode||(this.mMonsterNode=cc.instantiate(this.mMonstersPrefab),this.mMonsterNode.y=200,this.mAnimNode.addChild(this.mMonsterNode));var o=s.default.getBossInfo();if(!e){this.mMonsterNode.x=this.mPlayerNode.x+360,o&&(slot.SoundMger.instance.playEffect(r.SOUND_NAME.Witch_Teleport),this.mBossHp.getComponent(c.default).setData(o.hp.toNumber(),o.curHp.toNumber()),this.mBossHp.active=!0,this.mBossHp.opacity=0,cc.tween(this.mBossHp).to(.3,{opacity:255}).start()),this.mAnimNode.x=-50,this.mMonsterNode.active=!0,this.mMonsterNode.getComponent(l.default).setData(t,!0);var i=s.default.getRoleInfo();return this.mPlayerHP.getComponent(c.default).setData(i.hp.toNumber(),i.curHp.toNumber()),this.mPlayerHP.active=!0,slot.SoundMger.instance.playMusic(this.getFightMusic(!!o)),void this.showWeak(1==i.status)}game.EventManager.getInstance().raiseEvent(r.EventName.EVENT_SHOW_WARNING),this.mMonsterNode.x=this.mPlayerNode.x+360+500,cc.tween(this.mMonsterNode).delay(.5).to(3,{x:this.mPlayerNode.x+360}).call(function(){if(n.mMonsterNode.getComponent(l.default).hidePortal(),o)n.showBossTip(Math.random()>=.5?"111001501_element33":"111001501_element34",1),n.showCatTxtTip(Math.random()>=.5?"111001501_element31":"111001501_element32"),slot.SoundMger.instance.playEffect(r.SOUND_NAME.Witch_Teleport),n.mBossHp.getComponent(c.default).setData(o.hp.toNumber(),o.curHp.toNumber()),n.mBossHp.active=!0,n.mBossHp.opacity=0,cc.tween(n.mBossHp).to(.3,{opacity:255}).start();else{var e=Math.random()>=.5,i=void 0;if(t.monster[0].id==r.MonsterType.rockgiant)i="111001501_element30",e=!1;else{var a=e?n.mCatStartFigktKeys:n.mPlayerStartFigktKeys;i=s.default.isSameMonster?a[3]:a[Math.floor(Math.random()*a.length-1)]}i&&(e?n.showCatTxtTip(i):n.showPlayerTip(i))}}).start(),this.scheduleOnce(function(){e&&e()},4),cc.tween(this.mAnimNode).to(3,{x:-50}).start(),this.mMonsterNode.active=!0,this.mMonsterNode.getComponent(l.default).setData(t);var a=s.default.getRoleInfo();this.mPlayerHP.getComponent(c.default).setData(a.hp.toNumber(),a.curHp.toNumber()),this.mPlayerHP.active=!0,o&&this.showCatTxtTip(Math.random()>-.5?"111001501_element31":"111001501_element32"),slot.SoundMger.instance.playMusic(this.getFightMusic(!!o))},e.prototype.cutMonster=function(t,e){if(this.mMonsterNode){var n=this,o=s.default.fightResult[0];e&&(o=s.default.fightResult[1]),o?this.attack(o,function(){e?n.cutMonsterComplete(t):t&&t()},e):e?n.cutMonsterComplete(t):t&&t()}else t&&t()},e.prototype.cutMonsterComplete=function(t){var e=this;if(0!=s.default.status&&s.default.haveMonsterLive())t();else{var n=this;this.scheduleOnce(function(){n.mPlayerHP.active=!1,n.mBossHp.active=!1;var o=s.default.getBossInfo(!0);if(o)n.showPlayerTip("111001501_element36");else{var i=Math.random()>=.5,a=i?e.mCatFightEndKey:e.mPlayerFightEndKey,r=a[Math.floor(Math.random()*a.length)];i?n.showCatTxtTip(r):n.showPlayerTip(r),n.clearMonster()}n.showResult(function(){o?n.bossChat(function(){t()}):t(),slot.SoundMger.instance.playMusic(n.getMusic())})},1)}},e.prototype.attack=function(t,e,n){var o=this,i=t;if(i){var a=this,p=s.default.getRoleInfo(),h=(s.default.gemTimes,s.default.getActInfo(i,1)),u=0,m="";if(h){if(1==h.actionType){var d=h.skill+"",f=d.length,_=parseInt(d.substring(f-1,f));m="atk";var g=r.SOUND_NAME.Player_Attack;3==_||h.multi_attack>0?(m="liankan",g=r.SOUND_NAME.Player_Combo):2!=_&&4!=_||(m="tuci");var y=0;if(u=150,s.default.specialGem&&s.default.specialGem.triggerPos&&n&&this.showCatTxtTip("111001501_element35",1),"tuci"==m)y=1,slot.SoundMger.instance.playEffect(r.SOUND_NAME.Player_Elec_Attack),this.playPlayerAnimOnce(m,function(){if(a.playPlayerAnim("liankan","idle_battle",!0,y),slot.SoundMger.instance.playEffect(r.SOUND_NAME.Player_Combo),"tuci"==m){var t=a.mAnimNode.getChildByName("effAnimNode").getChildByName("light2");t.active=!0,t.getComponent(cc.Animation).play("light2",0),t.getComponent(cc.Animation).on("finished",function(){t.active=!1})}},1),game.EventManager.getInstance().raiseEvent(r.EventName.EVENT_SHOW_FULL_SCENE_EFF,!0,2);else{"liankan"==m&&(y=1),slot.SoundMger.instance.playEffect(g);var v=a.mAnimNode.getChildByName("effAnimNode").getChildByName("light2");v.active=!0,v.getComponent(cc.Animation).play("light2",0),v.getComponent(cc.Animation).on("finished",function(){v.active=!1}),this.playPlayerAnim(m,"idle_battle",!0,y)}this.showWeak(!1)}else 2==h.actionType&&this.mPlayerHP.getComponent(c.default).updateHp(p.curHp.toNumber());this.chengePlayerLayer(!0)}this.showActEff(!1,m),cc.Tween.stopAllByTarget(this.mPlayerNode),cc.tween(this.mPlayerNode).to(.2,{x:this.mPlayerX+u}).call(function(){}).delay(.5).call(function(){h&&1==h.actionType&&a.mMonsterNode.getComponent(l.default).hurt(i,function(t,e){3==t.status&&a.dropGold(t,e),t&&s.default.isBoss(t.id)&&a.mBossHp.getComponent(c.default).updateHp(t.curHp.toNumber())},"tuci"==m)}).delay(1).to(.2,{x:a.mPlayerX}).call(function(){o.chengePlayerLayer(!1),a.mMonsterNode.getComponent(l.default).attack(i,function(){a.mPlayerHP.getComponent(c.default).updateHp(p.curHp.toNumber()),a.checkDropGem(i.actorAction);for(var t=i.actorChange,n=!1,r=0;r<t.length;r++)if(1==t[r].status){n=!0;break}o.showWeak(n),o.scheduleOnce(function(){e()},0)},function(t,e){t&&(a.mPlayerHP.getComponent(c.default).subHp(t.beingDamage.toNumber()),s.default.isBoss(t.id)&&a.mBossHp.getComponent(c.default).updateHp(t.curHp.toNumber()),e&&1==e.actionType&&(a.mIsShowWeek||a.playPlayerAnim("hit","idle_battle"),slot.SoundMger.instance.playEffect(r.SOUND_NAME.Player_Hit),e.id!=r.MonsterType.rockgiant&&e.id!=r.MonsterType.werewolf||(a.mIsFristHit&&a.showCatTxtTip("111001501_element29"),a.mIsFristHit=!1)))})}).start()}else e()},e.prototype.checkDropGem=function(t){if(s.default.isFristLogin)return!1;var e=!1;if(t)for(var n=0;n<t.length;n++)for(var o=t[n].actionValue,i=0;i<o.length;i++)if(o[i].isDropSpecialGem){this.dropGem(),e=!0;break}return e},e.prototype.dropGem=function(){this.mHasDrop||(this.mHasDrop=!0,this.mSpGem.removeFromParent(),this.mAnimNode.addChild(this.mSpGem),this.mSpGem.active=!0,this.mSpGem.x=230,this.mSpGem.y=360,cc.tween(this.mSpGem).to(.2,{y:410}).delay(.1).to(.5,{x:180,y:this.mFloodY}).to(.5,{x:50,y:280}).call(function(){}).start(),slot.SoundMger.instance.playEffect(r.SOUND_NAME.Cat_Protect))},e.prototype.dropGold=function(t,e){var n=0;1008==t?n=2:t.id>1005&&(n=1);var o,i=7;1==n?i=12:2==n&&(i=18);for(var a=this.mMonsterNode.x+e.x,s=0;s<i;s++)(o=this.mGoldPool.get())||(o=cc.instantiate(this.mGoldPrefab)),this.mAnimNode.addChild(o),o.x=a,o.y=360,this.mGolds.push(o),this.flyNode2(o,.1*s);n>=1&&(this.mBagImg.active=!0,this.mBagImg.x=a,this.mBagImg.y=360,this.flyNode2(this.mBagImg,0)),n>=2&&(this.mBagImg2||(this.mBagImg2=cc.instantiate(this.mBagImg2),this.mAnimNode.addChild(this.mBagImg2)),this.mBagImg2.active=!0,this.mBagImg2.x=a,this.mBagImg2.y=360,this.flyNode2(this.mBagImg2,.1)),slot.SoundMger.instance.playEffect(r.SOUND_NAME.Monster_Coin_Drop),game.EventManager.getInstance().raiseEvent(r.EventName.EVENT_PLAY_SCORE_ANI,0,0,!0)},e.prototype.clearMonster=function(){this.mMonsterNode&&this.mMonsterNode.active&&(this.mMonsterNode.getComponent(l.default).clear(),this.mMonsterNode.active=!1)},e.prototype.changeScene=function(t){var e=this;this.mGate.active=!0,this.mGate.x=700;var n=this;s.default.playAnimOnNode(this.mGate,"open",!1,null,function(){n.showLoadTip(),n.scheduleOnce(function(){n.changeBg(s.default.scene),s.default.playAnimOnNode(n.mGate,"idle",!0),n.mGate.x=-350},.5)}),cc.Tween.stopAllByTarget(this.mGate),cc.tween(this.mGate).to(3,{x:200}).call(function(){slot.SoundMger.instance.playEffect(r.SOUND_NAME.Portal_Level_End),n.playPlayerAnim("idle_relax"),e.stopBgAnim(),e.showCatTxtTip("111001501_element45")}).delay(6).call(function(){t&&t()}).start()},e.prototype.showActEff=function(t,e){var n=this;if(void 0===e&&(e=""),this.mActAnimNode.active=t,t)this.mActAnimNode.x=this.mPlayerNode.x-64,this.mActAnimNode.y=this.mPlayerNode.y+340,this.mActAnimNode.getComponent(cc.Animation).play("swordcharge",0),this.mActAnimNode.getComponent(cc.Animation).on("finished",function(){n.mActAnimNode.active=!1,n.mActAnimNode2.active=!0,n.mActAnimNode2.x=n.mPlayerNode.x-84,n.mActAnimNode2.y=n.mPlayerNode.y+390},this);else{this.mActAnimNode2.active=!1;var o=this.mAnimNode.getChildByName("xuliEffNode").getChildByName("xuli2");if(o.active){var i=.5;"tuci"==e&&(i=1.5),cc.tween(o).to(.05,{angle:90}).delay(i).to(.5,{scaleX:0}).call(function(){o.active=!1}).start()}}game.EventManager.getInstance().raiseEvent(r.EventName.EVENT_SHOW_FULL_SCENE_EFF,t,1)},e.prototype.showWeak=function(t){var e=this;if(t!=this.mIsShowWeek){this.mIsShowWeek=t;var n=t?"weak_recover_fail":"weak_to_idle_battle",o=t?"weak":"idle_battle";this.playPlayerAnim(n,o,!0),t?(slot.SoundMger.instance.playEffect(r.SOUND_NAME.Cat_Protect),this.playCatAnim("sheild","idle"),this.scheduleOnce(function(){slot.SoundMger.instance.playEffect(r.SOUND_NAME.Player_Shield),e.mPlayerNode.getChildByName("zhao").active=t},.6)):this.mPlayerNode.getChildByName("zhao").active=t}},e.prototype.showLoadTip=function(){game.UIManager.getInstance().open(507)},e.prototype._updateFreeGameNum=function(){},e.prototype.freshView=function(){if(this.mGate.active=!1,this.mPlayerHP.active=!1,this.mBossHp.active=!1,this.clearMonster(),this.clearStones(),s.default.isTriStartFight(!1)){var t=s.default.fightInfo;this.initMonster(t,null)}(s.default.isTriStartStone()||s.default.isTriStone())&&this.initStones(s.default.stoneInfo.stoneNum),this.changeBg(s.default.scene)},e.prototype.chengePlayerLayer=function(t){var e=this.mStoneParent.getSiblingIndex();t?(this.mMonsterNode.setSiblingIndex(e+1),this.mPlayerNode.setSiblingIndex(e+2)):(this.mPlayerNode.setSiblingIndex(e+1),this.mMonsterNode.setSiblingIndex(e+2))},e.prototype.getMusic=function(){return 1==this.mScene?Math.random()>=.5?r.SOUND_NAME.Forest_Bg_01:Math.random()>=.5?r.SOUND_NAME.Forest_Bg_02:r.SOUND_NAME.Forest_Bg_03:Math.random()>=.5?r.SOUND_NAME.Dungeon_Bg_01:r.SOUND_NAME.Dungeon_Bg_02},e.prototype.getFightMusic=function(t){var e=r.SOUND_NAME.Battle_Bg_02;if(t)e=r.SOUND_NAME.Battle_Boss_Bg;else for(var n=s.default.fightInfo.monster,o=0;o<n.length;o++)if(n[o].id>1003){e=r.SOUND_NAME.Battle_Bg_01;break}return e},e.prototype.onDestroy=function(){game.EventManager.getInstance().removeEventListener(r.EventName.FREE_GAME_START,this.onStartRoll,this),game.EventManager.getInstance().removeEventListener(r.EventName.FREE_GAME_OVER,this.onEndRoll,this),game.EventManager.getInstance().removeEventListener(r.EventName.EVENT_FREE_GAME_NUM,this._updateFreeGameNum,this),game.EventManager.getInstance().removeEventListener(r.EventName.EVENT_PLAYER_START,this.go,this),game.EventManager.getInstance().removeEventListener(r.EventName.EVENT_MONSTR_JT,this.monsterJT,this),game.EventManager.getInstance().removeEventListener(r.EventName.EVENT_PLAY_ROLE_ANI,this.playerAnimEvet,this),game.EventManager.getInstance().removeEventListener(r.EventName.EVENT_REREST_INFO,this.freshView,this),game.EventManager.getInstance().removeEventListener(r.EventName.EVENT_START_PERV,this.startPerv,this),game.EventManager.getInstance().removeEventListener(r.EventName.EVENT_FRIST_ATTACT,this.fristAttact,this),game.EventManager.getInstance().removeEventListener(slot.CommonEventNames.EVENT_CLOSE_LOADING_VIEW,this.onCloseLoadingViewUI,this)},e.prototype.test11111111111111111=function(){this.showResult(function(){})},a([d(cc.Node)],e.prototype,"mNBg1",void 0),a([d(cc.Node)],e.prototype,"mNBg2",void 0),a([d(cc.Node)],e.prototype,"mSBg1",void 0),a([d(cc.Node)],e.prototype,"mSBg2",void 0),a([d(cc.Node)],e.prototype,"mAnimNode",void 0),a([d(cc.Node)],e.prototype,"mGate",void 0),a([d(cc.Node)],e.prototype,"mGoldBag",void 0),a([d(cc.Node)],e.prototype,"mResult",void 0),a([d(cc.Node)],e.prototype,"mBaoXiang",void 0),a([d(cc.Node)],e.prototype,"mAwardNum",void 0),a([d(cc.Node)],e.prototype,"mPlayerNode",void 0),a([d(cc.Node)],e.prototype,"mPlayer",void 0),a([d(cc.Node)],e.prototype,"mPlayer2",void 0),a([d(cc.Node)],e.prototype,"mPlayerHP",void 0),a([d(cc.Node)],e.prototype,"mBossHp",void 0),a([d(cc.Node)],e.prototype,"mCat",void 0),a([d(cc.Node)],e.prototype,"mTip",void 0),a([d(cc.Node)],e.prototype,"mActAnimNode",void 0),a([d(cc.Node)],e.prototype,"mActAnimNode2",void 0),a([d(cc.Node)],e.prototype,"mBagImg",void 0),a([d(cc.Node)],e.prototype,"mStoneParent",void 0),a([d(cc.Node)],e.prototype,"mSpGem",void 0),a([d(cc.Prefab)],e.prototype,"mStonePrefab",void 0),a([d(cc.Prefab)],e.prototype,"mMonstersPrefab",void 0),a([d(cc.Prefab)],e.prototype,"mGoldPrefab",void 0),a([d(cc.Prefab)],e.prototype,"mSkillPrefab",void 0),a([d(cc.Node)],e.prototype,"Boy_Idle_ELE_00",void 0),a([d(cc.Node)],e.prototype,"Attack_Hit_00",void 0),a([m],e)}(slot.BaseView);n.default=f,cc._RF.pop()},{"../GameEventName111001501":"GameEventName111001501","../NumAtlasLabel111001501":"NumAtlasLabel111001501","../main/GameDataManager":"GameDataManager","../main/HP111001501":"HP111001501","../main/MonsterCtr111001501":"MonsterCtr111001501","../main/Result111001501":"Result111001501"}],GameDataManager:[function(t,e,n){"use strict";cc._RF.push(e,"5cc37TPF/dHYJ5uHhHSn67i","GameDataManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.initTaskInfo=function(t){if(this.mRemoveIndex=0,this.spGemIsUsing=!1,console.log("initTaskInfo:"+this.mRemoveIndex),this.specialGem=t.specialGem,this.fightInfo=t.fightInfo,this.fightResult=t.fightResult,this.mapInfo=t.mapInfo,this.mapInfo&&this.updateMapType(this.mapInfo.mapPos),this.stoneInfo=t.stoneInfo,this.stoneResult=t.stoneResult,this.withKey=t.withKey,this.scene=t.scene,this.status=t.status,this.gemTimes=0,this.isSameMonster=!1,this.stoneInfo&&this.stoneInfo.reward&&this.stoneInfo.reward.length)this.mawardType=this.stoneInfo.reward[0].rewardType,this.award=this.stoneInfo.reward[0].rewardNum.toNumber();else if(this.fightInfo&&this.fightInfo.monster.length){var e=this.fightInfo.monster,n=void 0;this.award=0,this.mawardType=e[0].reward.rewardType;for(var o=0;o<e.length;o++)n=e[o],this.award+=n.reward.rewardNum.toNumber();1==this.fightInfo.monster.length?(this.fightInfo.monster[0].id==this.preMonster&&(this.isSameMonster=!0),this.preMonster=this.fightInfo.monster[0].id):this.preMonster=0}},t.initRemoveInfo=function(t){if(this.mRemoveInfo=t.resultList,this.triReapin2=!1,this.mRemoveInfo)for(var e=this.mRemoveInfo[0].spinResult.grid,n=0;n<e.length;n++)if(9==e[n]){this.triReapin2=!0;break}},t.getMonsterNameById=function(t){return this.monsterNames[t]},t.getMonsterIdByName=function(t){for(var e in this.monsterNames)if(t.indexOf(this.monsterNames[e])>=0)return parseInt(e);return null},t.isTriStartStone=function(){return 1==this.status&&0==this.stoneResult.length},t.isTriStone=function(){return!!(this.stoneResult&&this.stoneResult.length>0)},t.isTriStartFight=function(t){if(void 0===t&&(t=!0),2==this.status&&this.fightInfo&&this.fightInfo.monster.length){for(var e=this.fightInfo.monster,n=0;n<e.length;n++)if(t&&e[n].hp.toNumber()!=e[n].curHp.toNumber())return!1;return!0}return!1},t.isTriFight=function(){return!!(this.fightResult&&this.fightResult.length>0)},t.haveMonsterLive=function(){if(this.fightInfo){var t=this.fightInfo.monster;if(t&&t.length)for(var e=0;e<t.length;e++)if(3!=t[e].status)return!0}return!1},t.showXuLi1=function(){var t=!1;return this.stoneResult&&this.stoneResult.length>1?t=!0:this.fightResult&&this.fightResult.length>1&&(t=!0),t},t.showXuLi2=function(){if(this.fightResult&&this.fightResult.length>1)for(var t=this.fightResult[1].actorAction,e=0;e<t.length;e++)if(1==t[e].id&&t[e].skill>101)return!0;return!1},t.getReawardType=function(){return this.mawardType},t.getReaward=function(){return this.award},t.getBossInfo=function(t){if(void 0===t&&(t=!1),this.fightInfo)for(var e=0;e<this.fightInfo.monster.length;e++)if(this.isBoss(this.fightInfo.monster[e].id))return this.fightInfo.monster[e];if(t&&this.fightResult&&this.fightResult.length){var n=this.fightResult[this.fightResult.length-1].actorChange;for(e=0;e<n.length;e++)if(this.isBoss(n[e].id))return n[e]}return null},t.isBoss=function(t){return 1008==t},t.getRoleInfo=function(){return this.fightResult&&this.fightResult.length?this.fightResult[0].actorChange[0]:this.fightInfo?this.fightInfo.role:null},t.getActInfo=function(t,e){for(var n=t.actorAction,o=0;o<n.length;o++)if(n[o].id==e)return n[o];return null},t.isActSpGem=function(){if(this.specialGem){if(this.mRemoveIndex++,0==this.specialGem.triggerPos)return!1;var t=this.mRemoveInfo[this.mRemoveIndex-1];if(t){for(var e=t.removePos,n=t.spinResult.grid,o=void 0,i=0;i<this.specialGem.replacePosList.length;i++)if(o=this.specialGem.replacePosList[i]-1,e.indexOf(o)<0||n[o]!=this.specialGem.gemElem)return!1;return this.spGemIsUsing=!0,!0}}return!1},t.updateMapType=function(t){for(var e,n=0,o=0;o<this.mMinTypes.length;o++){var i=this.mMinTypes[o];e=!0;for(var a=0;a<i.length;a++)if(t.indexOf(i[a])<0){e=!1;break}if(e){n=o;break}}this.mMapType=n},t.getMapType=function(){return this.mMapType},t.shake=function(t,e,n,o,i){void 0===n&&(n=6),void 0===o&&(o=.018),void 0===i&&(i=0);var a=e.x,r=e.y,s=cc.sequence(cc.moveTo(o,cc.v2(a+(5+i),r+(i+7))),cc.moveTo(o,cc.v2(a-(6+i),r+(i+7))),cc.moveTo(o,cc.v2(a-(13+i),r+(i+3))),cc.moveTo(o,cc.v2(a+(3+i),r-(6+i))),cc.moveTo(o,cc.v2(a-(5+i),r+(i+5))),cc.moveTo(o,cc.v2(a+(2+i),r-(8+i))),cc.moveTo(o,cc.v2(a-(8+i),r-(10+i))),cc.moveTo(o,cc.v2(a+(3+i),r+(i+10))),cc.moveTo(o,cc.v2(a,r)));cc.tween(t).then(s).repeat(n).start()},t.playAnimOnNode=function(t,e,n,o,i){void 0===n&&(n=!1),void 0===o&&(o=""),void 0===i&&(i=null);var a=n;o&&(a=!1),t.getComponent(sp.Skeleton).setAnimation(0,e,a),t.getComponent(sp.Skeleton).setCompleteListener(function(){t.getComponent(sp.Skeleton).animation==e&&(o?(t.getComponent(sp.Skeleton).setAnimation(0,o,n),t.getComponent(sp.Skeleton).setCompleteListener(function(){t.getComponent(sp.Skeleton).animation==o&&i&&i(t)})):i&&i(t))})},t.createBoom=function(t){var e=this.mBoomPool.get();return e||(e=cc.instantiate(t)),e},t.recoveBoom=function(t){t.removeFromParent(),this.mBoomPool.put(t)},t.fightInfo={monster:[],role:{}},t.fightResult=[],t.mapInfo={activePos:[],mapPos:[]},t.stoneInfo={reward:[],stoneNum:0},t.stoneResult=[],t.specialGem={gemElem:1,replacePosList:[],triggerPos:0},t.withKey=!1,t.status=0,t.scene=1,t.monsterNames={1001:"bianfu",1002:"skeleton",1003:"treasurechest",1004:"gargoyle",1005:"treemonster",1006:"werewolf",1007:"rockgiant",1008:"witch"},t.gemTimes=0,t.mawardType=0,t.award=0,t.mMapType=0,t.triReapin=!1,t.triReapin2=!1,t.isShowingRespin=!1,t.isReapRun=!1,t.isFristLogin=!0,t.preMonster=0,t.isSameMonster=!1,t.isCutCangBaoTuStone=!1,t.hasRun=!1,t.spGemIsUsing=!1,t.mRemoveInfo=[],t.mRemoveIndex=0,t.currWinScore=0,t.isRolling=!1,t.mMinTypes=[[18,24,30,17],[12,18,24,23],[13,19,25,14],[7,13,19,20],[33,34,35,27],[32,33,34,28],[3,4,5,9],[2,3,4,10]],t.mBoomPool=new cc.NodePool,t}();n.default=o,cc._RF.pop()},{}],GameEventName111001501:[function(t,e,n){"use strict";cc._RF.push(e,"ca65fGvksNAQrdlFI+FdLPW","GameEventName111001501"),Object.defineProperty(n,"__esModule",{value:!0}),n.mouseEvent=n.SOUND_NAME=n.SkillNames=n.MonsterType=n.EventName=void 0,function(t){t.EVENT_WIN_GAME="EVENT_WIN_GAME",t.GAME_PLAY_LINES_TASK="GAME_PLAY_LINES_TASK",t.EVENT_CONTINUE_REWARD="EVENT_CONTINUE_REWARD",t.EVENT_CONTINUE_REWARD_END="EVENT_CONTINUE_REWARD_END",t.FREE_GAME_START="FREE_GAME_START",t.FREE_GAME_OVER="FREE_GAME_OVER",t.EVENT_FREE_GAME_NUM="EVENT_FREE_GAME_NUM",t.EVENT_ADD_FREE_GAME_NUM="EVENT_ADD_FREE_GAME_NUM",t.EVENT_PLAY_ROLE_ANI="EVENT_PLAY_ROLE_ANI",t.EVENT_SHOW_FULL_SCENE_EFF="EVENT_SHOW_FULL_SCENE_EFF",t.EVENT_PLAY_SCORE_ANI="EVENT_PLAY_SCORE_ANI",t.EVENT_PLAYER_START="EVENT_PLAYER_START",t.EVENT_START_ROLL="EVENT_START_ROLL",t.EVENT_END_ROLL="EVENT_END_ROLL",t.EVENT_LAST_JT="EVENT_LAST_JT",t.EVENT_MONSTR_JT="EVENT_MONSTR_JT",t.EVENT_KEY_EVENT="EVENT_KEY_EVENT",t.EVENT_SHOW_WARNING="EVENT_SHOW_WARNING",t.EVENT_REREST_INFO="EVENT_REREST_INFO",t.EVENT_START_PERV="EVENT_START_PERV",t.EVENT_FRIST_ATTACT="EVENT_FRIST_ATTACT"}(n.EventName||(n.EventName={})),function(t){t[t.bianfu=1001]="bianfu",t[t.skeleton=1002]="skeleton",t[t.treasurechest=1003]="treasurechest",t[t.gargoyle=1004]="gargoyle",t[t.treemonster=1005]="treemonster",t[t.werewolf=1006]="werewolf",t[t.rockgiant=1007]="rockgiant",t[t.witch=1008]="witch"}(n.MonsterType||(n.MonsterType={})),function(t){t.shuyaogongji="shuyaogongji",t.shuyaoatk1="shuyaoatk1",t.spark="spark",t.witchLaser="witchLaser",t.wolfAtk1="wolfAtk",t.magicBall="magicBall",t.magicFireBall="magicFireBall",t.portal="portal",t.rock="rock",t.rockHit="rockHit",t.rockVfx="rockVfx",t.witchAtk3="atk3",t.baoxianggongji1="baoxianggongji1",t.baoxianggongji2="baoxianggongji2"}(n.SkillNames||(n.SkillNames={})),function(t){t.Bat_Combo_Atk="Bat_Combo_Atk",t.Bat_Die="Bat_Die",t.Bat_Normal_Atk="Bat_Normal_Atk",t.Battle_Bg_01="Battle_Bg_01",t.Battle_Bg_02="Battle_Bg_02",t.Battle_Boss_Bg="Battle_Boss_Bg",t.Battle_Victory="Battle_Victory",t.Cat_Collect_Gem="Cat_Collect_Gem",t.Cat_Place_Symbol="Cat_Place_Symbol",t.Cat_Protect="Cat_Protect",t.Cat_Victory="Cat_Victory",t.Chest_Guy_Atk="Chest_Guy_Atk",t.Chest_Guy_Die="Chest_Guy_Die",t.Chest_Guy_Jump_Atk="Chest_Guy_Jump_Atk",t.Display_Respin_Word="Display_Respin_Word",t.Dizzy_Loop="Dizzy_Loop",t.Dungeon_Bg_01="Dungeon_Bg_01",t.Dungeon_Bg_02="Dungeon_Bg_02",t.Forest_Bg_01="Forest_Bg_01",t.Forest_Bg_02="Forest_Bg_02",t.Forest_Bg_03="Forest_Bg_03",t.Gargoyle_Combo_Atk="Gargoyle_Combo_Atk",t.Gargoyle_Die="Gargoyle_Die",t.Gargoyle_Normal_Atk="Gargoyle_Normal_Atk",t.Gem_Color_Change="Gem_Color_Change",t.Gem_Drop="Gem_Drop",t.Gems_Break="Gems_Break",t.Gems_Combo_02="Gems_Combo_02",t.Gems_Combo_03="Gems_Combo_03",t.Gems_Combo_04="Gems_Combo_04",t.Gems_Combo_05="Gems_Combo_05",t.Gems_Combo_06="Gems_Combo_06",t.Gems_Combo_07="Gems_Combo_07",t.Gems_Combo_08="Gems_Combo_08",t.Gems_Highlight="Gems_Highlight",t.Gems_Respin="Gems_Respin",t.Key_Appear="Key_Appear",t.Key_Get="Key_Get",t.Key_Open_Treasure="Key_Open_Treasure",t.Map_Appear="Map_Appear",t.Map_Begin_Drop="Map_Begin_Drop",t.Mega_Win_Zap="Mega_Win_Zap",t.Money_Reached="Money_Reached",t.Money_Rolling="Money_Rolling",t.Monster_Coin_Drop="Monster_Coin_Drop",t.Player_Attack="Player_Attack",t.Player_Celebrate="Player_Celebrate",t.Player_Celebrate_Normal="Player_Celebrate_Normal",t.Player_Charge="Player_Charge",t.Player_Charge_Loop="Player_Charge_Loop",t.Player_Combo="Player_Combo",t.Player_Elec_Attack="Player_Elec_Attack",t.Player_Hit="Player_Hit",t.Player_Money_To_Pocket="Player_Money_To_Pocket",t.Player_Second_Charge="Player_Second_Charge",t.Player_Shield="Player_Shield",t.Portal_Level_End="Portal_Level_End",t.Respin_Gem_Move="Respin_Gem_Move",t.Rock_Combo_Atk="Rock_Combo_Atk",t.Rock_Die="Rock_Die",t.Rock_Normal_Atk="Rock_Normal_Atk",t.Skeleton_Die="Skeleton_Die",t.Skeleton_Jump_Atk="Skeleton_Jump_Atk",t.Skeleton_Normal_Atk="Skeleton_Normal_Atk",t.Special_Gem_Match="Special_Gem_Match",t.Special_Gem_Spawn="Special_Gem_Spawn",t.Spin_Click="Spin_Click",t.Stone_Break="Stone_Break",t.Stone_Drop_Bag="Stone_Drop_Bag",t.Super_Mega_Win_Roll="Super_Mega_Win_Roll",t.Super_Mega_Win_Zap="Super_Mega_Win_Zap",t.Treasure_Open="Treasure_Open",t.Tree_Die="Tree_Die",t.Tree_Normal_Atk="Tree_Normal_Atk",t.Tree_Scissor_Atk="Tree_Scissor_Atk",t.Tree_Toxic_Atk="Tree_Toxic_Atk",t.Win_Great="Win_Great",t.Win_Super_Mega_2="Win_Super_Mega_2",t.Win_Wonderful="Win_Wonderful",t.Witch_Combo_Atk="Witch_Combo_Atk",t.Witch_Die="Witch_Die",t.Witch_Laser_Atk="Witch_Laser_Atk",t.Witch_Normal_Atk="Witch_Normal_Atk",t.Witch_Run_Away="Witch_Run_Away",t.Witch_Struggle_Loop="Witch_Struggle_Loop",t.Witch_Teleport="Witch_Teleport",t.Wolf_Die="Wolf_Die",t.Wolf_Impact_Atk="Wolf_Impact_Atk",t.Wolf_Normal_Atk="Wolf_Normal_Atk",t.Wolf_Turn_Around_Atk="Wolf_Turn_Around_Atk",t.Currency_Button="Currency_Button"}(n.SOUND_NAME||(n.SOUND_NAME={})),function(t){t.GET_REWARD_AND_POP_TIME="GET_REWARD_AND_POP_TIME",t.GET_REWARD_BOARD_CALL="GET_REWARD_BOARD_CALL",t.GET_REWARD_BEFOR="GET_REWARD_BEFOR",t.INIT_TO_FREE_GAME="INIT_TO_FREE_GAME",t.FREE_GAME_CLOSE="FREE_GAME_CLOSE",t.INIT_MOUSE_MOVE_POS="INIT_MOUSE_MOVE_POS",t.INIT_MOUSE_MOVE_POS_REWARD="INIT_MOUSE_MOVE_POS_REWARD",t.MOUSE_MOVE_POS="MOUSE_MOVE_POS",t.CLEAR_MOUSE_MOVE="CLEAR_MOUSE_MOVE",t.SEVER_DATA_INIT="SEVER_DATA_INIT",t.ANIMATION_STOP_CALL_BACK="ANIMATION_STOP_CALL_BACK",t.NORMAL_RECONNECTION_DATA="NORMAL_RECONNECTION_DATA",t.PUSH_MONYeVENT="PUSH_MONYeVENT",t.FREE_RECONNECTION_DATA="FREE_RECONNECTION_DATA",t.ROLL_ANI_START="ROLL_ANI_START",t.ROLL_ANI_START_WHO="ROLL_ANI_START_WHO",t.ROLL_ANI_END="ROLL_ANI_END",t.FREE_GAME_ADD_TIME="FREE_GAME_ADD_TIME",t.ROLL_END_CALL_BACK="ROLL_END_CALL_BACK",t.MOUSE_MOVE_END="MOUSE_MOVE_END",t.MOUSE_BIG_MOVE_END="MOUSE_BIG_MOVE_END",t.OPACITY_END="OPACITY_END",t.GET_RAWARD_FOOD="GET_RAWARD_FOOD",t.GET_REWARD_BEGAN="GET_REWARD_BEGAN",t.GET_FREE_REWARD_BEGAN_MOUSE_BG="GET_FREE_REWARD_BEGAN_MOUSE_BG",t.PLAY_BURST_ANI_BEGAN="PLAY_BURST_ANI_BEGAN",t.PLAY_ROLL_ANI_BEGAN="PLAY_ROLL_ANI_BEGAN",t.PLAY_ROLL_ANI_END="PLAY_ROLL_ANI_END",t.ROLL_END_STEP_TASK="ROLL_END_STEP_TASK",t.NOT_HAVE_MONY_OPEN_ROLL="NOT_HAVE_MONY_OPEN_ROLL"}(n.mouseEvent||(n.mouseEvent={})),cc._RF.pop()},{}],GameLayer111001501:[function(t,e,n){"use strict";cc._RF.push(e,"03dfd0k2WFPcJVsFSNgFaM+","GameLayer111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Banner111001501"),s=t("../GameEventName111001501"),c=t("../GemBoom111001501"),l=t("../main/GameDataManager"),p=t("../main/Main111001501"),h=t("../main/RespinCtr111001501"),u=t("../NumAtlasLabel111001501"),m=t("./GameRoller111001501"),d=t("./scrollerSkins/JTChildManager111001501"),f=t("./scrollerSkins/JTLayerManager111001501"),_=t("./scrollerSkins/JTLogicFactroy111001501"),g=t("./scrollerSkins/JTRun111001501"),y=cc._decorator,v=y.ccclass,E=y.property,N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roller=null,e.m_scoreNode=null,e.totalSpinCoin=0,e.scatterDopGapTime=.5,e.scatterDopWaitTime=1,e.isFirstInGame=!0,e.mWinTxt=null,e.mItemBg1=null,e.mItemBg2=null,e.mItemBg3=null,e.mItemBg4=null,e.mBoomPrefab=null,e.mWinTxtPool=new cc.NodePool,e.mItemBgPool1=new cc.NodePool,e.mItemBgPool2=new cc.NodePool,e.mItemBgPool3=new cc.NodePool,e.mItemBgPool4=new cc.NodePool,e.mGemBreakEffPrefab=null,e.mGemBreakEffPool=new cc.NodePool,e.mRespinNode=null,e.mItemBgParent=null,e.mItemsBg=[],e.mCoinTxts=[],e.curMoney=0,e.m_isChufaFree=!1,e.scatterTask=null,e.wildTask=null,e.scroller=null,e.m_isRunning=!1,e.mCache={},e.gameControPrefabPos=null,e}return i(e,t),e.prototype.onLoad=function(){slot.SlotConfigManager.instance.registerJPTypes(3),t.prototype.onLoad.call(this),console.log("game111001501 onload",this.node),game.EventManager.getInstance().addEventListener(slot.NetSlotConst.SPINRESP,this._onRollingResp,this),game.EventManager.getInstance().addEventListener(slot.NetSlotConst.RESTORERESP,this.restoreResp,this),game.EventManager.getInstance().addEventListener(slot.NetSlotConst.CHANGECOSTRESP,this.changeCostResp,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_UPDATE_WIN_ANI_END,this.winAniEnd,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_BIGWIN_TEXT_SHOW,this.winAniStart,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_ELEMENT_PAY_ID_SHOW,this.reelClick,this),game.EventManager.getInstance().addEventListener(s.mouseEvent.ROLL_END_STEP_TASK,this.stepTask,this),game.EventManager.getInstance().addEventListener(s.mouseEvent.MOUSE_BIG_MOVE_END,this.onScrollerStartComplete,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_UPDATE_COIN_SCROLLER_END,this.callBackSuperOver,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_STOP_SLOT_MACHINE_IMMEDIATELY,this.event_stop_slot_machine_immediately,this),game.EventManager.getInstance().addEventListener(slot.CommonEventNames.EVENT_CLOSE_LOADING_VIEW,this.onCloseLoadingViewUI,this),game.EventManager.getInstance().addEventListener(s.EventName.EVENT_LAST_JT,this.lastJT,this),game.EventManager.getInstance().addEventListener(s.EventName.EVENT_LAST_JT,this.lastJT,this)},e.prototype.onDestroy=function(){this.dispose(),game.EventManager.getInstance().removeEventListener(slot.NetSlotConst.SPINRESP,this._onRollingResp,this),game.EventManager.getInstance().removeEventListener(slot.NetSlotConst.RESTORERESP,this.restoreResp,this),game.EventManager.getInstance().removeEventListener(slot.NetSlotConst.CHANGECOSTRESP,this.changeCostResp,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_BIGWIN_TEXT_SHOW,this.winAniStart,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_UPDATE_WIN_ANI_END,this.winAniEnd,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_ELEMENT_PAY_ID_SHOW,this.reelClick,this),game.EventManager.getInstance().removeEventListener(s.mouseEvent.MOUSE_BIG_MOVE_END,this.onScrollerStartComplete,this),game.EventManager.getInstance().removeEventListener(s.mouseEvent.ROLL_END_STEP_TASK,this.stepTask,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_UPDATE_COIN_SCROLLER_END,this.callBackSuperOver,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_STOP_SLOT_MACHINE_IMMEDIATELY,this.event_stop_slot_machine_immediately,this),game.EventManager.getInstance().removeEventListener(slot.CommonEventNames.EVENT_CLOSE_LOADING_VIEW,this.onCloseLoadingViewUI,this)},e.prototype.start=function(){},e.prototype.stepTask=function(t,e){this.isFirstInGame?(e.run(),this.isFirstInGame=!1):e.run()},e.prototype.lastJT=function(t,e){var n=this;l.default.isFristLogin||this.node.getComponent(m.default).restInfoAnim(!1);var o=0;this.node.getComponent(m.default).checkGetKey()&&(o=4),this.scheduleOnce(function(){l.default.triReapin?n.showRespin(e):e.run(),l.default.hasRun=!1,0==o&&game.EventManager.getInstance().raiseEvent(s.EventName.EVENT_END_ROLL)},o),o>0&&game.EventManager.getInstance().raiseEvent(s.EventName.EVENT_END_ROLL)},e.prototype.reelClick=function(){},e.prototype.onCloseLoadingViewUI=function(){slot.PlayerManager.instance.isNew&&game.UIManager.getInstance().open(p.UIID.START_FRIST_DIALOG)},e.prototype.onInit=function(){slot.SpinManager.instance.isFullLineAvailable=!1,this._initSlotMachineView(),console.log("oninit"),slot.SpinManager.customResultCallBack=function(){return console.log("ywb\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u7ed3\u679c\uff08\u9002\u7528\u4e8e\u6d88\u9664\u7c7b)----------------:",slot.SpinManager.instance.customUpdateData),slot.SpinManager.instance.customUpdateData.game_10017.data.resultList}},e.prototype.onInitScroller=function(t){var e=this.scroller=t.scroller;e.isShowAllLine=!1;var n=slot.SlotConfigManager.instance.DataGame.getData(slot.SlotConfigManager.instance.gameID);e.setupFactory(new f.default,new d.default,new _.default),slot.JTDefaultItemRender.setPlayCoinIndex(2,7);var o=e.options(slot.JTEliminatePipeline,slot.JTScrollerGroup.USE_CONVERT_MROE_LIST,n.column,t.scrollingComplete);o.childOption(slot.JTCreateScrolling,slot.JTOptionType.OPTION_CREATE),o.childOption(slot.JTEmptyBeginEliminate,slot.JTOptionType.OPTION_BEGIN_RUNNING,t.beginScrolling),o.childOption(g.default,slot.JTOptionType.OPTION_RUNNING,t.onSpinPreStop),o.childOption(slot.JTOverScrollEliminate,slot.JTOptionType.OPTION_OVER_RUNNING,t.scrollingProgress),e.setupDefaultItemList(this.getSourceList,slot.SlotConfigManager.instance.DataElement.getKeys(),!1),slot.JTDefaultItemRender.setPlayCoinIndex(1,7),slot.EliminateEffectUtils.elePlayAni=slot.Handler.create(this,this.playPrizeAni,[],!1)},e.prototype.event_stop_slot_machine_immediately=function(){this.m_isRunning=!1},e.prototype.playPrizeAni=function(t,e,n,o){this.hideRespin(),0==l.default.gemTimes?game.EventManager.getInstance().raiseEvent(s.EventName.EVENT_START_PERV,new slot.Handler(this,this.checkActSpGem,[t,e,n,o],!0)):this.checkActSpGem(t,e,n,o)},e.prototype.checkActSpGem=function(t,e,n,o){if(l.default.gemTimes++,l.default.isActSpGem(t)){var i=this;this.scheduleOnce(function(){i.actSpGem(function(){i.removeItems(t,e,n,o)})},2)}else this.removeItems(t,e,n,o)},e.prototype.removeItems=function(t,e,n,o){var i=this,a=t.length;if(a<=0)e.run();else{for(var r=0;r<t.length;r++)t[r].shake();this.showTip(a),this.addItemsBgs(o.lineResult),this.addWinCoin(t,o);var c=!1;(l.default.isTriStone()||l.default.isTriFight())&&(game.EventManager.getInstance().raiseEvent(s.EventName.EVENT_PLAY_ROLE_ANI,2),c=!0),this.scheduleOnce(function(){for(var e=i.scroller.renders,a=0;a<e.length;a++)e[a].shakeByForce();i.clearWinCoinTxt();for(var r=0;r<t.length;r++){var l=t[r];i.addBoom(l),l.clearSkin()}c||game.EventManager.getInstance().raiseEvent(s.EventName.EVENT_PLAY_ROLE_ANI,1),i.node.getComponent(m.default).changeItemBgSkin(o,n),slot.SoundMger.instance.playEffect(i.getRemoveSound()),slot.PlayerManager.instance.syncShowingCoin(slot.PlayerManager.instance.showCoin+o.curSpinCoin),game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_UPDATE_WINSCORE,o.totalSpinCoin,!1,!1,!1,null,!0),game.EventManager.getInstance().raiseEvent(s.EventName.EVENT_PLAY_SCORE_ANI,o.curSpinCoin,0,n),i.clearItemBg()},1.1),this.scheduleOnce(function(){i.curMoney+=Number(o.curSpinCoin),e.run(),n&&(i.curMoney=0);var t=i.mItemBgParent.parent.getChildByName("spGemMask");t.active&&(t.active=!1),i.scheduleOnce(function(){slot.SoundMger.instance.playEffect(s.SOUND_NAME.Gem_Drop)},.5)},2.2)}},e.prototype.getRemoveSound=function(){var t=l.default.gemTimes;return 1==t?s.SOUND_NAME.Gems_Break:(t>8&&(t=8),s.SOUND_NAME["Gems_Combo_0"+t])},e.prototype.showTip=function(t){var e=0;t>20?e=3:t>12?e=2:t>5&&(e=1),e>0&&this.node.getComponent(m.default).showTip(e)},e.prototype.addItemsBgs=function(t){this.mCache={};for(var e=0;e<t.length;e++)this.addItemsBg(t[e])},e.prototype.addItemsBg=function(t){for(var e,n,o,i,a=t.winPos,r={},s={},c=[],l=0;l<a.length;l++)r[(n=(e=Number(a[l])-1)%6)+"_"+(o=Math.floor(e/6))]=1,this.mCache[n+"_"+o]=1,i={pos:e,row:n,col:o},c.push(i);if(c.length){var p;for(l=0;l<c.length;l++)p=c[l],this.addItemBgByRC(p,r,s);for(var h=0;h<c.length;h++)this.addItemForce(c[h],this.mCache)}},e.prototype.getAroundInfo=function(t,e,n){var o={up:null,down:null,left:null,right:null,downLeft:null,downRight:null,upLeft:null,upRight:null,num1:0,num2:0},i=0,a=0;return n[t+1+"_"+e]&&(o.down=1,i++),n[t-1+"_"+e]&&(o.up=1,i++),n[t+"_"+(e+1)]&&(o.right=1,i++),n[t+"_"+(e-1)]&&(o.left=1,i++),n[t+1+"_"+(e+1)]&&(o.downRight=1,a++),n[t+1+"_"+(e-1)]&&(o.downLeft=1,a++),n[t-1+"_"+(e+1)]&&(o.upRight=1,a++),n[t-1+"_"+(e-1)]&&(o.upLeft=1,a++),o.num1=i,o.num2=a,o},e.prototype.addItemBgByRC=function(t,e,n){var o=this.getAroundInfo(t.row,t.col,e);o.num1+o.num2<8&&(1==o.num1?(o.up?(this.addItemBg(t,1,1,3),this.addItemBg(t,1,1,4)):o.down?(this.addItemBg(t,1,2,1),this.addItemBg(t,1,2,2)):o.left?(this.addItemBg(t,1,3,2),this.addItemBg(t,1,3,3)):o.right&&(this.addItemBg(t,1,4,1),this.addItemBg(t,1,4,4)),this.addType2Bg(t,o,n)):2==o.num1?(this.addType4Bg(t,o),o.up||o.left?o.up||o.right?o.down||o.left?o.down||o.right||this.addItemBg(t,1,3,3):this.addItemBg(t,1,4,4):this.addItemBg(t,1,3,2):this.addItemBg(t,1,2,1),this.addType2Bg(t,o,n)):3==o.num1?(this.addType4Bg(t,o),this.addType2Bg(t,o,n)):4==o.num1&&(this.addType4Bg(t,o),this.addType2Bg(t,o,n)))},e.prototype.addType4Bg=function(t,e){e.left&&e.up&&!e.upLeft&&this.addItemBg(t,4,1,1),e.right&&e.up&&!e.upRight&&this.addItemBg(t,4,1,2),e.down&&e.left&&!e.downLeft&&this.addItemBg(t,4,2,1),e.down&&e.right&&!e.downRight&&this.addItemBg(t,4,2,2)},e.prototype.addType2Bg=function(t,e,n){n[t.row+"_"+t.col]||(e.right&&(n[t.row+"_"+(t.col+1)]||(e.up||e.upRight||this.addItemBg(t,2,4,1),e.down||e.downRight||this.addItemBg(t,2,4,2))),e.left&&(n[t.row+"_"+(t.col-1)]||(e.up||e.upLeft||this.addItemBg(t,2,3,1),e.down||e.downLeft||this.addItemBg(t,2,3,2))),e.down&&(n[t.row+1+"_"+t.col]||(e.left||e.downLeft||this.addItemBg(t,3,2,1),e.right||e.downRight||this.addItemBg(t,3,2,2))),e.up&&(n[t.row-1+"_"+t.col]||(e.left||e.upLeft||this.addItemBg(t,3,1,1),e.right||e.upRight||this.addItemBg(t,3,1,2))),n[t.row+"_"+t.col]=1)},e.prototype.addItemBg=function(t,e,n,o){var i=this.createBgNode(e),a=187*t.col-474,r=424-170*t.row,s=0,c=0;i.scaleX=1,i.scaleY=1,1==e?1==o?(s=a-53,c=r+49):2==o?(s=a+53,c=r+49,i.scaleX=-1):3==o?(s=a+53,c=r-49,i.scaleX=-1,i.scaleY=-1):4==o&&(s=a-53,c=r-49,i.scaleY=-1):2==e?3==n?1==o?(s=a-92,c=r+49):(s=a-92,c=r-49,i.scaleY=-1):4==n&&(1==o?(s=a+94,c=r+49):(s=a+94,c=r-49,i.scaleY=-1)):3==e?1==n?1==o?(s=a-54,c=r+85):(s=a+54,c=r+85,i.scaleX=-1):2==n&&(1==o?(s=a-54,c=r-85):(s=a+54,c=r-85,i.scaleX=-1)):4==e&&(1==n?1==o?(s=a-93,c=r+86,i.scaleY=-1):2==o&&(s=a+93,c=r+86,i.scaleX=-1,i.scaleY=-1):2==n&&(1==o?(s=a-93,c=r-85):2==o&&(s=a+93,c=r-85,i.scaleX=-1))),this.mItemBgParent.addChild(i),i.x=s,i.y=c,this.mItemsBg.push(i),i.opacity=0,cc.tween(i).to(.1,{opacity:255}).start()},e.prototype.createBgNode=function(t){var e=this.mItemBgPool1;2==t?e=this.mItemBgPool2:3==t?e=this.mItemBgPool3:4==t&&(e=this.mItemBgPool4);var n=e.get();return n||(n=2==t?cc.instantiate(this.mItemBg2):3==t?cc.instantiate(this.mItemBg3):4==t?cc.instantiate(this.mItemBg4):cc.instantiate(this.mItemBg1)),n},e.prototype.addWinCoin=function(t,e){for(var n,o={},i=0;i<e.lineResult.length;i++)o[e.lineResult[i].elementResult.elem]=Math.floor(Number(e.lineResult[i].spinCoin)/e.lineResult[i].winPos.length);for(i=0;i<t.length;i++)(n=o[t[i].data])<=0&&l.default.specialGem&&(n=o[l.default.specialGem.gemElem]),this.addWinCoin2(t[i].parent.convertToWorldSpaceAR(t[i].position),n)},e.prototype.addWinCoin2=function(t,e){var n=this.mWinTxtPool.get();if(!n){var o=(n=cc.instantiate(this.mWinTxt)).getChildByName("num").getComponent(u.default);o.offScale=.5,o.spaceX=-2}var i=this.node.getChildByName("effecLayer"),a=i.convertToNodeSpaceAR(t);a.y+=20,n.setPosition(a),n.opacity=255,n.angle=0,i.addChild(n),n.getChildByName("num").getComponent(u.default).string=slot.SlotUtils.formatNumber(e),this.mCoinTxts.push(n)},e.prototype.clearItemBg=function(){for(var t,e=0;e<this.mItemsBg.length;e++){t=this.mItemsBg[e];var n=this.mItemBgPool1;t.name.indexOf("Bg2")>=0?n=this.mItemBgPool2:t.name.indexOf("Bg3")>=0?n=this.mItemBgPool3:t.name.indexOf("Bg4")>=0&&(n=this.mItemBgPool4),t.removeFromParent(),n.put(t)}this.mItemsBg=[]},e.prototype.clearWinCoinTxt=function(){for(var t,e,n=this,o=this.node.getChildByName("scrollerLayer"),i=o.getChildByName("infobar"),a=this.node.getChildByName("effecLayer"),r=o.x+i.x-a.x,s=o.y+i.y-a.y,c=0;c<this.mCoinTxts.length;c++)t=this.mCoinTxts[c],e=this.getAngle(t.position,{x:r,y:s})-90,cc.tween(t).to(.5,{x:r,y:s,opacity:0,angle:e}).call(function(t){t.removeFromParent(),n.mWinTxtPool.put(t)}).start()},e.prototype.addItemForce=function(t,e){for(var n,o=0,i=t.row,a=t.col,r=i;r<6;r++)e[r+"_"+a]||(o++,(n=this.scroller.renders[6*a+r])&&n.addForce(2,o));for(o=0,r=i;r>=0;r--)e[r+"_"+a]||(o++,(n=this.scroller.renders[6*a+r])&&n.addForce(1,o));o=0;for(var s=a;s<6;s++)e[i+"_"+s]||(o++,(n=this.scroller.renders[6*s+i])&&n.addForce(4,o));for(o=0,s=a;s>=0;s--)e[i+"_"+s]||(o++,(n=this.scroller.renders[6*s+i])&&n.addForce(3,o))},e.prototype.addBoom=function(t){var e=this,n=this.node.getChildByName("effecLayer"),o=l.default.createBoom(this.mBoomPrefab),i=t.parent.convertToWorldSpaceAR(t.position),a=n.convertToNodeSpaceAR(i);o.setPosition(a),o.getComponent(c.default).setData(t.data),n.addChild(o);var r=this.mGemBreakEffPool.get();r||(r=cc.instantiate(this.mGemBreakEffPrefab)),r.setPosition(a),n.addChild(r),r.getChildByName("starpc").getComponent(cc.ParticleSystem).resetSystem(),r.getComponent(cc.Animation).play("GemBreak",0),r.getComponent(cc.Animation).on("finished",function(){r.removeFromParent(),e.mGemBreakEffPool.put(r)},this)},e.prototype.actSpGem=function(t){var e=this,n=l.default.cat,o=l.default.spGem;o.active=!0;var i=n.parent,a=n.position.clone(),r=o.position.clone(),c=i.convertToWorldSpaceAR(a),p=i.convertToWorldSpaceAR(r),h=this.node.convertToNodeSpaceAR(c),u=this.node.convertToNodeSpaceAR(p);o.parent=this.node,o.setPosition(u),n.parent=this.node,n.setPosition(h);var m=this.node.getChildByName("gyun"),d=this.node.getChildByName("light1"),f=this.mItemBgParent.parent.getChildByName("spGemMask"),_=l.default.specialGem,g=slot.SlotMachineView.instance.scroller.getRenderByIndex(_.triggerPos),y=g.parent.convertToWorldSpaceAR(g.position),v=this.node.convertToNodeSpaceAR(y);n.getChildByName("cat").getComponent(cc.Animation).play("flyAtGemGrabStart",0),cc.tween(o).delay(.9).to(.5,{x:v.x,y:v.y}).start(),slot.SoundMger.instance.playEffect(s.SOUND_NAME.Cat_Collect_Gem),cc.tween(n).to(.7,{x:u.x,y:u.y}).call(function(){n.getChildByName("cat").getComponent(cc.Animation).play("flyAtGemGrab",0)}).delay(.2).call(function(){o.getChildByName("guang").active=!1,n.getChildByName("cat").getComponent(cc.Animation).play("flyAtGemGrabFlyDown",0),slot.SoundMger.instance.playEffect(s.SOUND_NAME.Cat_Place_Symbol)}).to(.5,{x:v.x,y:v.y}).call(function(){f.active=!0;for(var n,a,c=o.getChildByName("spGemFrame"),l=1;l<=8;l++)(a=o.getChildByName("s_gem_"+l)).active=l==9-_.gemElem,a.active&&((n=a).scale=.5);c.active=!1;var p=o.getChildByName("spgemS");p.active=!0,p.getComponent(sp.Skeleton).setAnimation(0,"animation",!0),cc.tween(n).to(.2,{scale:1.5}).call(function(){n.active=!1,slot.SoundMger.instance.stopEffect(s.SOUND_NAME.Special_Gem_Match)}).start(),e.scheduleOnce(function(){var t=e.getAniName(_.gemElem);p.getComponent(sp.Skeleton).setAnimation(0,t,!1),p.getComponent(sp.Skeleton).setCompleteListener(function(){p.getComponent(sp.Skeleton).animation==t&&(o.removeFromParent(),i.addChild(o),p.active=!1,o.active=!1,c.active=!0,o.getChildByName("guang").active=!0,o.x=r.x,o.y=r.y)}),e.scheduleOnce(function(){m.active=!0,m.x=v.x,m.y=v.y,m.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),m.getComponent(sp.Skeleton).setCompleteListener(function(){"animation"==m.getComponent(sp.Skeleton).animation&&(m.active=!1)})},.4),e.scheduleOnce(function(){d.active=!0,d.x=v.x,d.y=v.y+100,d.getComponent(cc.Animation).play("light1",0),d.getComponent(cc.Animation).on("finished",function(){d.active=!1},e),slot.SoundMger.instance.playEffect(s.SOUND_NAME.Mega_Win_Zap)},.5)},1);var h=_.replacePosList;for(g.changeData(_.gemElem),l=0;l<h.length;l++)(g=slot.SlotMachineView.instance.scroller.getRenderByIndex(h[l])).changeData(_.gemElem);e.scheduleOnce(function(){t&&t()},.5)}).to(.5,{x:-500}).call(function(){n.parent=i,n.x=a.x-200,n.y=a.y,n.getChildByName("cat").getComponent(cc.Animation).play("idle",0),cc.tween(n).to(.5,{x:a.x,y:a.y}).start()}).start()},e.prototype.getAniName=function(t){var e="fx_silver";return 2==t?e="fx_yellow":3==t?e="fx_red":4==t?e="fx_pink":5==t?e="fx_orange":6==t?e="fx_celeste":7==t?e="fx_blue":8==t&&(e="fx_green"),e},e.prototype._initSlotMachineView=function(){slot.EliminateEffectUtils.setup(1500,.12,.08,.1,.8,.1,slot.EliminateDisappearUtils.disappearTime,slot.EliminateDisappearUtils.disappreaDelayTime,.05,this.scatterDopGapTime,this.scatterDopWaitTime),this.slotMachine.spaceX=0,this.slotMachine.spaceY=0,this.slotMachine.gridWidth=114,this.slotMachine.gridHeight=103,this.slotMachine.afterRender(this,this._rederAfter),this.slotMachine.onItemRender(this,this._onSpinSlotRender),this._registerSlotMachineAnimation()},e.prototype._rederAfter=function(){slot.SpinManager.instance.spinTouchEnable=!0,this.initRenderState()},e.prototype.initRenderState=function(){slot.SlotMachineView._instance.scroller.renders.length,this.changeElementData(null)},e.prototype.callBackSuperOver=function(){},e.prototype._registerSlotMachineAnimation=function(){this.slotMachine.onContinuousNotWinAnimation(this,this._playContinuousNotWinAnimation),this.slotMachine.onNormalRewardsAnimation(this,this._playNormalRewardsAnimation),this.slotMachine.onFullLineAnimation(this,this._playFullLineAnimation),this.slotMachine.onGreatRewardsAnimation(this,this._playGreatRewardsAnimation),this.slotMachine.onMiddleRewardsAnimation(this,this._playMiddleRewardsAnimation),this.slotMachine.onSmallRewardsAnimation(this,this._playSmallRewardsAnimation),this.slotMachine.onSpinStart(this,this._onSpinStart),this.slotMachine.onSpinStop(this,this._onSpinStop),this.slotMachine.onSpinComplete(this,this._onSpinComplete),this.slotMachine.onSpinBegin(this,this._onSpinBegin)},e.prototype._onSpinComplete=function(){l.default.isReapRun||game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_GAMECONTROL_ALL_BTN_CLICK,!0),this.changeElementData(),this.m_isRunning=!1},e.prototype.changeElementData=function(t){void 0===t&&(t=null)},e.prototype._onSpinStop=function(){},e.prototype._onRollingResp=function(t,e){this.respInfo=e,l.default.initTaskInfo(e.updateList[0].value.handleState.game_1110015.data),l.default.initRemoveInfo(e.updateList[0].value.handleState.game_10017.data),l.default.isTriStone()||l.default.isTriFight()?slot.SpinManager.instance.isInTurbo&&game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_GAMECONTROL_ALL_BTN_CLICK,!1):(game.EventManager.getInstance().raiseEvent(s.EventName.EVENT_START_ROLL),game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_GAMECONTROL_ALL_BTN_CLICK,!1)),l.default.isShowingRespin&&this.mRespinNode.getComponent(h.default).changeSkins(e.spinResult.grid),this.node.getComponent(m.default).clearWinScore(),l.default.isFristLogin&&(l.default.isFristLogin=!1),l.default.hasRun=!0,game.EventManager.getInstance().raiseEvent(s.EventName.EVENT_FRIST_ATTACT),l.default.currWinScore=Number(e.spinResult.spinCoin)+Number(e.spinResult.attachCoin)},e.prototype.restoreResp=function(t,e){slot.PlayerManager.instance.isNew=e.state.normalData.isNewer,l.default.initTaskInfo(e.state.normalData.handleState.game_1110015.data),this.node.getComponent(r.default).setNodeBanner(!1),this.node.getComponent(m.default).showStartTip(),game.EventManager.getInstance().raiseEvent(s.EventName.EVENT_REREST_INFO)},e.prototype.changeCostResp=function(t,e){l.default.isFristLogin=!0,l.default.initTaskInfo(e.normalData.handleState.game_1110015.data),game.EventManager.getInstance().raiseEvent(s.EventName.EVENT_REREST_INFO),this.node.getComponent(r.default).setNodeBanner(!1),this.node.getComponent(m.default).showBanner(!0)},e.prototype._onSpinStart=function(){this.unschedule(this._clearSpinReelAni),this._clearSpinReelAni()},e.prototype._onSpinBegin=function(){l.default.isRolling=!0,this.node.getComponent(m.default).showBanner(!0),this.node.getComponent(m.default).playDropAnim(),slot.SpinManager.instance.isInAuto&&slot.SoundMger.instance.playEffect("Spin_Button_Sound"),game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_GAMECONTROL_ALL_BTN_CLICK,!1)},e.prototype.beforeScorllerStartRoller=function(){this.slotMachine.scroller.setOncePendingSchedule()},e.prototype.onScrollerStartComplete=function(){this.slotMachine.scroller.continuePendingTask()},e.prototype._clearSpinReelAni=function(){},e.prototype._playContinuousNotWinAnimation=function(t,e){e.run()},e.prototype._playNormalRewardsAnimation=function(t,e){this.showWinAniView(slot.WinAniType.Normal,t,e,!slot.FreeGameManager.instance.isTreateFromFreeGame)},e.prototype._playFullLineAnimation=function(t,e){e.run()},e.prototype._playGreatRewardsAnimation=function(t,e){e.run()},e.prototype.winAniStart=function(){},e.prototype.winAniEnd=function(){},e.prototype._playMiddleRewardsAnimation=function(t,e){this.showWinAniView(slot.WinAniType.Middle,t,e,!slot.FreeGameManager.instance.isTreateFromFreeGame)},e.prototype._playSmallRewardsAnimation=function(t,e){this.showWinAniView(slot.WinAniType.Small,t,e,!slot.FreeGameManager.instance.isTreateFromFreeGame)},e.prototype._onSpinSlotRender=function(){},e.prototype.addEventListener=function(){t.prototype.addEventListener.call(this)},e.prototype.removeEventListener=function(){t.prototype.removeEventListener.call(this)},e.prototype.addFreeSpinsAni=function(t,e,n){void 0===e&&(e=null),console.log("\u8fdb\u5165\u4e86\u514d\u8d39\u6e38\u620f"),n.run()},e.prototype.freeGameChangeBg=function(){},e.prototype.refreshRoom=function(){},e.prototype.onInitFreeGame=function(t,e){switch(console.log("oniniffreegame",t),t.type){case slot.OperationState.Free:game.EventManager.getInstance().raiseEvent(s.EventName.FREE_GAME_START,t.sumTimes);break;case slot.OperationState.ReSpin:}e.runWith(!0)},e.prototype.onFreeGameTriggered=function(t,e){switch(console.log("onFreeGameTriggered",t),t.type){case slot.OperationState.Free:break;case slot.OperationState.ReSpin:l.default.triReapin=!0}e.runWith(!0)},e.prototype.onFreeGameInfoUpdated=function(t){switch(console.log("onFreeGameInfoUpdated",t),t.type){case slot.OperationState.Free:case slot.OperationState.ReSpin:}},e.prototype.onFreeGameOver=function(t,e){switch(console.log("onFreeGameOver",t),t.type){case slot.OperationState.Free:case slot.OperationState.ReSpin:}e.runWith(!0)},e.prototype.onFreeGameTriggerAgain=function(t,e){switch(console.log("onFreeGameTriggerAgain",t),t.type){case slot.OperationState.Free:e.run();break;case slot.OperationState.ReSpin:}},e.prototype.onFreeGameTimesUpdated=function(t){game.EventManager.getInstance().raiseEvent(s.EventName.EVENT_FREE_GAME_NUM,t)},e.prototype.onBonusGameTriggered=function(t,e){slot.Handler.create(this,function(){}),e.runWith(!0)},e.prototype.onBonusGameOver=function(t,e){e.runWith(!0)},e.prototype.showRespin=function(t){this.mRespinNode.getComponent(h.default).setData(this.scroller.renders,t),l.default.triReapin=!1},e.prototype.hideRespin=function(){this.mRespinNode.getComponent(h.default).end()},e.prototype.getAngle=function(t,e){var n=e.x-t.x,o=e.y-t.y;return 180*Math.atan2(o,n)/Math.PI},e.prototype.test000000000000000=function(){},a([E(cc.Node)],e.prototype,"roller",void 0),a([E(cc.Prefab)],e.prototype,"mWinTxt",void 0),a([E(cc.Prefab)],e.prototype,"mItemBg1",void 0),a([E(cc.Prefab)],e.prototype,"mItemBg2",void 0),a([E(cc.Prefab)],e.prototype,"mItemBg3",void 0),a([E(cc.Prefab)],e.prototype,"mItemBg4",void 0),a([E(cc.Prefab)],e.prototype,"mBoomPrefab",void 0),a([E(cc.Prefab)],e.prototype,"mGemBreakEffPrefab",void 0),a([E(cc.Node)],e.prototype,"mRespinNode",void 0),a([E(cc.Node)],e.prototype,"mItemBgParent",void 0),a([v],e)}(slot.AbstractMainView);n.default=N,cc._RF.pop()},{"../Banner111001501":"Banner111001501","../GameEventName111001501":"GameEventName111001501","../GemBoom111001501":"GemBoom111001501","../NumAtlasLabel111001501":"NumAtlasLabel111001501","../main/GameDataManager":"GameDataManager","../main/Main111001501":"Main111001501","../main/RespinCtr111001501":"RespinCtr111001501","./GameRoller111001501":"GameRoller111001501","./scrollerSkins/JTChildManager111001501":"JTChildManager111001501","./scrollerSkins/JTLayerManager111001501":"JTLayerManager111001501","./scrollerSkins/JTLogicFactroy111001501":"JTLogicFactroy111001501","./scrollerSkins/JTRun111001501":"JTRun111001501"}],GameRoller111001501:[function(t,e,n){"use strict";cc._RF.push(e,"abb6bi47QpMaoarOAE3uHhF","GameRoller111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Banner111001501"),s=t("../GameEventName111001501"),c=t("../main/GameDataManager"),l=t("../main/ScoreRoll111001501"),p=t("../NumAtlasLabel111001501"),h=t("./GameLayer111001501"),u=cc._decorator,m=u.ccclass,d=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mYaoShi=null,e.p_nodeWin=null,e.p_num=null,e.p_txtNum=null,e.mDropAnimNode=null,e.mItemBgSkins=[],e.mItemBgs=[],e.m_isFirstApp=!0,e.mWinScore=0,e.mPreLevel=1,e._winMoney=0,e._winMoney2=0,e}return i(e,t),e.prototype.onLoad=function(){game.EventManager.getInstance().addEventListener(s.EventName.FREE_GAME_START,this._onFreeGameStart,this),game.EventManager.getInstance().addEventListener(s.EventName.FREE_GAME_OVER,this._onFreeGameOver,this),game.EventManager.getInstance().addEventListener(s.EventName.EVENT_CONTINUE_REWARD,this._continueReward,this),game.EventManager.getInstance().addEventListener(s.EventName.EVENT_CONTINUE_REWARD_END,this._continueRewardEnd,this),game.EventManager.getInstance().addEventListener(s.EventName.EVENT_PLAY_SCORE_ANI,this._playRewardAni,this),game.EventManager.getInstance().addEventListener(s.EventName.EVENT_SHOW_WARNING,this.showWarning,this),game.EventManager.getInstance().addEventListener(s.EventName.EVENT_KEY_EVENT,this.yaoshiEvent,this),game.EventManager.getInstance().addEventListener(s.EventName.EVENT_SHOW_FULL_SCENE_EFF,this.showFullSceneEff,this),game.EventManager.getInstance().addEventListener(s.EventName.EVENT_REREST_INFO,this.freshView,this),game.EventManager.getInstance().addEventListener(s.mouseEvent.PUSH_MONYeVENT,this.reconnetion,this),game.EventManager.getInstance().addEventListener(s.mouseEvent.FREE_RECONNECTION_DATA,this.freeReconnetion,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_UPDATE_WINSCORE,this.updateWinscore,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_STOP_SLOT_MACHINE_IMMEDIATELY,this.event_stop_slot_machine_immediately,this),game.EventManager.getInstance().addEventListener(s.EventName.GAME_PLAY_LINES_TASK,this.game_PLAY_LINES_TASK,this)},e.prototype.freeReconnetion=function(){},e.prototype.reconnetion=function(){},e.prototype._continueReward=function(){},e.prototype._continueRewardEnd=function(){},e.prototype._stopWinNum=function(){this.showBanner(!0)},e.prototype.event_stop_slot_machine_immediately=function(){var t=Number(slot.SpinManager.instance.rollingResult.spinResult.spinCoin);t>0&&this.updateWinscore("",t)},e.prototype._playRewardAni=function(t,e,n,o){void 0===n&&(n=1),o&&(this.mWinScore=c.default.currWinScore);var i=e;if(i<=0&&(i=this.mWinScore),!(i<=0)){var a=1;2==n?a=i>=5*slot.SpinManager.instance.betCost?3:2:c.default.gemTimes>1&&(a=2),this.updateScoreByLevel(a,i,!0),this.showBanner(!1)}},e.prototype.updateWinscore=function(t,e,n){void 0===n&&(n=null),this.mWinScore=e},e.prototype.updateScoreByLevel=function(t,e,n){var o=this;void 0===n&&(n=!1),this.p_nodeWin.active=!0,n&&this.playInfoAmin(t);var i=3==t;if(this.p_num.active=i,this.p_txtNum.active=!i,this.p_nodeWin.width=i?420:360,e>0){if(this.p_txtNum.active){var a=game.LanguageManager.getInstance().getDstStr("111005301_element09");this.p_txtNum.getComponent(cc.Label).string=a+" "+slot.SlotUtils.formatNumber(e),this.p_txtNum.scale=1==t?1:1.3,this._winMoney2=0,slot.SoundMger.instance.playEffect(s.SOUND_NAME.Money_Rolling,!0),2==t&&slot.SoundMger.instance.playEffect(s.SOUND_NAME.Mega_Win_Zap),cc.tween(this).to(1,{winMoney2:e}).call(function(){o.p_txtNum.getComponent(l.default).startRoll(),slot.SoundMger.instance.stopEffect(s.SOUND_NAME.Money_Rolling),slot.SoundMger.instance.playEffect(s.SOUND_NAME.Money_Reached)}).start()}if(this.p_num.active){var r=.5;slot.SlotUtils.formatNumber(e).length>6&&(r=.4),this.p_num.getComponent(p.default).offScale=r,this.p_num.getComponent(p.default).string="",this._winMoney=0,slot.SoundMger.instance.playEffect(s.SOUND_NAME.Super_Mega_Win_Roll,!0),slot.SoundMger.instance.playEffect(s.SOUND_NAME.Super_Mega_Win_Zap),cc.tween(this).to(1,{winMoney:e}).call(function(){slot.SoundMger.instance.stopEffect(s.SOUND_NAME.Super_Mega_Win_Roll),slot.SoundMger.instance.playEffect(s.SOUND_NAME.Money_Reached)}).start()}}},e.prototype.playInfoAmin=function(t){if(t!=this.mPreLevel){var e=this.node.getChildByName("scrollerLayer").getChildByName("infobar"),n=void 0,o=void 0;1==t?(o="small_idle",2==this.mPreLevel?n="medium_fadeout":3==this.mPreLevel&&(n="large_fadeout")):2==t?(o="medium_loop",1==this.mPreLevel?n="medium_fadein":3==this.mPreLevel&&(n="large_fadeout")):3==t&&(o="large_loop",n="large_fadein"),this.playAnimOnNode(e,n,!1,o)}var i="win";2==t?i="win_medium":3==t&&(i="win_large");var a=this.node.getChildByName("scrollerLayer").getChildByName("infobar_anim");a.active=!0;var r=1!=t;this.playAnimOnNode(a,i,r,null,function(){1==t&&(a.active=!1)}),this.mPreLevel=t,this.changeYaoShiLayer(1==t)},e.prototype.restInfoAnim=function(t){slot.SoundMger.instance.stopEffect(s.SOUND_NAME.Mega_Win_Zap),slot.SoundMger.instance.stopEffect(s.SOUND_NAME.Super_Mega_Win_Zap);var e=this.node.getChildByName("scrollerLayer").getChildByName("infobar"),n="small_idle";if("small_idle",2==this.mPreLevel?n="medium_fadeout":3==this.mPreLevel&&(n="large_fadeout"),this.playAnimOnNode(e,n,!1,"small_idle"),!t){this.p_txtNum.active=!0,this.p_num.active=!1;var o=game.LanguageManager.getInstance().getDstStr("111005301_element10");this.p_txtNum.getComponent(cc.Label).string=o+" "+slot.SlotUtils.formatNumber(this.mWinScore),this.p_txtNum.getComponent(l.default).startRoll()}this.p_txtNum.scale=1,this.mPreLevel=1,this.node.getChildByName("scrollerLayer").getChildByName("infobar_anim").active=!1},e.prototype.playAnimOnNode=function(t,e,n,o,i){void 0===n&&(n=!1),void 0===o&&(o=""),void 0===i&&(i=null);var a=n;o&&(a=!1),t.getComponent(sp.Skeleton).setAnimation(0,e,a),t.getComponent(sp.Skeleton).setCompleteListener(function(){t.getComponent(sp.Skeleton).animation==e&&o?(t.getComponent(sp.Skeleton).setAnimation(0,o,n),t.getComponent(sp.Skeleton).setCompleteListener(function(){t.getComponent(sp.Skeleton).animation==o&&i&&i()})):i&&i()})},e.prototype.showStartTip=function(){this.p_txtNum.getComponent(cc.Label).string=game.LanguageManager.getInstance().getDstStr("111001501_element52"),this.p_nodeWin.active=!0,this.p_txtNum.getComponent(l.default).startRoll()},e.prototype.showTip=function(t,e){void 0===e&&(e=null);for(var n=this.node.getChildByName("tip"),o=1;o<=3;o++)n.getChildByName("img"+o).active=o==t;n.active=!0,n.y=-138,n.scale=0,n.opacity=255;var i=s.SOUND_NAME.Win_Great;2==t?i=s.SOUND_NAME.Win_Wonderful:3==t&&(i=s.SOUND_NAME.Win_Super_Mega_2),slot.SoundMger.instance.playEffect(i,!1),cc.tween(n).to(.2,{scale:1.2}).to(.2,{scale:1}).delay(1).to(.2,{y:-150}).to(.3,{y:0,opacity:0}).call(function(){n.active=!1,e&&e()}).start()},e.prototype.playDropAnim=function(){var t=this;this.mDropAnimNode.active=!0,this.mDropAnimNode.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),this.mDropAnimNode.getComponent(sp.Skeleton).setCompleteListener(function(){"animation"==t.mDropAnimNode.getComponent(sp.Skeleton).animation&&(t.mDropAnimNode.active=!1)});var e=this.node.getChildByName("scrollerLayer").getChildByName("rollerMask");this.mRollerPos||(this.mRollerPos=e.position.clone()),c.default.shake(e,this.mRollerPos,4,.012)},e.prototype.showBaoCangAnim=function(){var t=this,e=this.node.getChildByName("effecLayer").getChildByName("baocang"),n=e.getChildByName("cbt"),o=e.getChildByName("cbtlizi"),i=e.getChildByName("yaoshilizi2"),a=e.getChildByName("cangbaotu_08");o.active=!1,i.active=!1,a.scale=0,a.angle=0;var r=1,l=1,p=c.default.getMapType();0==p?a.angle=90:1==p?(a.angle=90,l=-1):2==p?(a.angle=-90,l=-1):3==p?a.angle=-90:4==p?r=-1:5==p?(r=-1,l=-1):6==p||7==p&&(l=-1),e.active=!0,n.active=!0,a.color=new cc.Color(169,124,72),this.playAnimOnNode(n,"baotu_fadein",!1,null,function(){cc.tween(a).to(.2,{scaleX:.7*r,scaleY:.7*l}).delay(1).call(function(){a.color=cc.Color.WHITE,slot.SoundMger.instance.playEffect(s.SOUND_NAME.Map_Begin_Drop)}).to(.2,{scaleX:1*r,scaleY:1*l}).call(function(){e.active=!1,t.initCBaoCangItems()}).start(),o.active=!0,i.active=!0,t.playAnimOnNode(n,"baotu_loop",!1,null,function(){n.active=!0})}),slot.SoundMger.instance.playEffect(s.SOUND_NAME.Map_Appear)},e.prototype.initCBaoCangItems=function(){this.showKey(!0);for(var t,e,n=this.node.getChildByName("scrollerLayer").getChildByName("bg").getChildByName("itembgs"),o=c.default.mapInfo,i=o.mapPos,a=0;a<i.length;a++){(t=this.mItemBgs[a])||((t=new cc.Node).addComponent(cc.Sprite),t.scaleX=.65,t.scaleY=.54,this.mItemBgs[a]=t);var r=i[a]-1;t.name="b_"+r,e=n.getChildByName("b"+r),t.getComponent(cc.Sprite).spriteFrame=o.activePos.indexOf(r+1)>=0?this.mItemBgSkins[1]:this.mItemBgSkins[0],t.x=e.x,t.y=e.y,n.addChild(t)}},e.prototype.changeItemBgSkin=function(t,e){var n=c.default.mapInfo,o=n?n.activePos:[];if(o.length){for(var i,a=0;a<o.length;a++)if(i=o[a],e||this.isInResultPos(t,i))for(var r=0;r<this.mItemBgs.length;r++)if(this.mItemBgs[r].name=="b_"+(i-1)){this.mItemBgs[r].getComponent(cc.Sprite).spriteFrame=this.mItemBgSkins[1];break}}else this.mItemBgs.length&&(this.clearItemBgs(),c.default.withKey||this.showKey(!1))},e.prototype.isInResultPos=function(t,e){for(var n=[],o=0;o<t.lineResult.length;o++)for(var i=0;i<t.lineResult[o].winPos.length;i++)n.push(Number(t.lineResult[o].winPos[i]));return n.indexOf(e)>=0},e.prototype.clearItemBgs=function(){for(var t=0;t<this.mItemBgs.length;t++)this.mItemBgs[t].removeFromParent()},e.prototype.checkGetKey=function(){return!(this.mYaoShi.active||!c.default.withKey||(this.yaoshiEvent("",!0,1),game.EventManager.getInstance().raiseEvent(s.EventName.EVENT_PLAY_ROLE_ANI,3),0))},e.prototype.yaoshiEvent=function(t,e,n){var o=this;if(e){var i=this.node.getChildByName("scrollerLayer").getChildByName("keyNode");0==n?this.showBaoCangAnim():1==n?(this.showYaoShiAnim(!0,0,-90,"huode_fadein",!1,function(){o.showYaoShiAnim(!0,0,-90,"huode_flay",!0,function(){i.getChildByName("key").active=!1},!0,i.x,i.y+11,"idle"),o.clearItemBgs()}),slot.SoundMger.instance.playEffect(s.SOUND_NAME.Key_Get)):2==n&&(this.showYaoShiAnim(!0,i.x,i.y+11,"kaixiang",!1,function(){o.yaoshiEvent("",!1,null)}),this.scheduleOnce(function(){slot.SoundMger.instance.playEffect(s.SOUND_NAME.Key_Open_Treasure)},1.2))}else this.showYaoShiAnim(!1),this.showKey(!1)},e.prototype.showKey=function(t,e){void 0===e&&(e=!0);var n=this.node.getChildByName("scrollerLayer").getChildByName("keyNode"),o=t?-225:-160;e?(cc.tween(n).to(.2,{x:o}).call(function(){n.active=t}).start(),t&&(n.active=!0,n.getChildByName("key").active=!0)):(n.active=t,n.x=o)},e.prototype.showYaoShiAnim=function(t,e,n,o,i,a,r,s,c,l){var p=this;if(void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=""),void 0===i&&(i=!0),void 0===a&&(a=null),void 0===r&&(r=!1),void 0===s&&(s=0),void 0===c&&(c=0),void 0===l&&(l=""),this.mYaoShi.active=t,t){this.mYaoShi.x=e,this.mYaoShi.y=n;var h=!r&&i;this.mYaoShi.getComponent(sp.Skeleton).setAnimation(0,o,h),this.mYaoShi.getComponent(sp.Skeleton).setCompleteListener(function(){p.mYaoShi.getComponent(sp.Skeleton).animation==o&&(r&&(p.mYaoShi.getComponent(sp.Skeleton).setAnimation(0,l,i),p.mYaoShi.x=s,p.mYaoShi.y=c),a&&a())})}},e.prototype.changeYaoShiLayer=function(t){if(this.mYaoShi.active){var e=this.node.getChildByName("scrollerLayer").getChildByName("keyNode").getSiblingIndex(),n=1;t&&(n=3),this.mYaoShi.setSiblingIndex(e+n)}},e.prototype.showWarning=function(){this.node.getComponent(h.default).hideRespin();var t=this.node.getChildByName("scrollerLayer").getChildByName("bg").getChildByName("warning"),e=this.node.getChildByName("scrollerLayer").getChildByName("rollerMask");e.opacity=0,t.opacity=0,t.active=!0,cc.tween(t).to(.2,{opacity:255}).delay(3).to(.2,{opacity:0}).call(function(){t.active=!1,e.opacity=255}).start()},e.prototype.showFullSceneEff=function(t,e,n){if(1==n)if(this.node.getChildByName("effecLayer").getChildByName("xuli").active=e,e){c.default.specialGem&&c.default.specialGem.triggerPos?c.default.spGemIsUsing?slot.SoundMger.instance.playEffect(s.SOUND_NAME.Player_Elec_Attack):slot.SoundMger.instance.playEffect(s.SOUND_NAME.Player_Second_Charge):slot.SoundMger.instance.playEffect(s.SOUND_NAME.Player_Charge),slot.SoundMger.instance.playEffect(s.SOUND_NAME.Player_Charge_Loop);var o=this.node.getChildByName("effecLayer").getChildByName("swordcharge_lv3");o.active=!0,o.getComponent(cc.Animation).play("swordcharge_lv3",0),o.getComponent(cc.Animation).on("finished",function(){o.active=!1},this)}else slot.SoundMger.instance.stopEffect(s.SOUND_NAME.Player_Charge_Loop);else if(2==n){var i=this.node.getChildByName("effecLayer").getChildByName("light7");i.active=!0,i.getComponent(cc.Animation).play("light7",0);var a=!1;i.getComponent(cc.Animation).on("finished",function(){a||(a=!0,i.active=!1)},this)}},Object.defineProperty(e.prototype,"winMoney",{get:function(){return this._winMoney},set:function(t){this._winMoney=Number(t),this.p_num.getComponent(p.default).string=slot.SlotUtils.formatNumber(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"winMoney2",{get:function(){return this._winMoney2},set:function(t){this._winMoney2=Number(t);var e=game.LanguageManager.getInstance().getDstStr("111005301_element09");this.p_txtNum.getComponent(cc.Label).string=e+" "+slot.SlotUtils.formatNumber(t)},enumerable:!1,configurable:!0}),e.prototype.clearWinScore=function(){this.mWinScore=0},e.prototype.showBanner=function(t){this.node.getComponent(r.default).setNodeBanner(t),t&&(this.p_nodeWin.active=!1,this.restInfoAnim(!0))},e.prototype.freshView=function(){this.clearItemBgs();var t=!1,e=c.default.withKey;c.default.mapInfo&&c.default.mapInfo.mapPos.length!=c.default.mapInfo.activePos.length&&(this.initCBaoCangItems(),t=!0),this.showKey(t||e,!1);var n=this.node.getChildByName("scrollerLayer").getChildByName("keyNode");n&&(n.getChildByName("key").active=!e),this.mYaoShi.active=e,e&&this.showYaoShiAnim(!0,n.x,n.y+11,"idle",!0)},e.prototype._onFreeGameStart=function(){},e.prototype._onFreeGameOver=function(){},e.prototype.start=function(){},e.prototype.onDestroy=function(){game.EventManager.getInstance().removeEventListener(s.EventName.FREE_GAME_START,this._onFreeGameStart,this),game.EventManager.getInstance().removeEventListener(s.EventName.FREE_GAME_OVER,this._onFreeGameOver,this),game.EventManager.getInstance().removeEventListener(s.EventName.EVENT_CONTINUE_REWARD,this._continueReward,this),game.EventManager.getInstance().removeEventListener(s.EventName.EVENT_CONTINUE_REWARD_END,this._continueRewardEnd,this),game.EventManager.getInstance().removeEventListener(s.EventName.EVENT_PLAY_SCORE_ANI,this._playRewardAni,this),game.EventManager.getInstance().removeEventListener(s.EventName.EVENT_KEY_EVENT,this.yaoshiEvent,this),game.EventManager.getInstance().removeEventListener(s.EventName.EVENT_SHOW_WARNING,this.showWarning,this),game.EventManager.getInstance().removeEventListener(s.EventName.EVENT_SHOW_FULL_SCENE_EFF,this.showFullSceneEff,this),game.EventManager.getInstance().removeEventListener(s.EventName.EVENT_REREST_INFO,this.freshView,this),game.EventManager.getInstance().removeEventListener(s.mouseEvent.FREE_RECONNECTION_DATA,this.freeReconnetion,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_UPDATE_WINSCORE,this.updateWinscore,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_STOP_SLOT_MACHINE_IMMEDIATELY,this.event_stop_slot_machine_immediately,this),game.EventManager.getInstance().removeEventListener(s.EventName.GAME_PLAY_LINES_TASK,this.game_PLAY_LINES_TASK,this)},e.prototype.game_PLAY_LINES_TASK=function(t,e){if(this.m_isFirstApp&&!slot.FreeGameManager.instance.hasFreeGame){var n=slot.SpinManager.instance.rollingResult.spinResult,o=Number(n.spinCoin);this._playRewardAni("",o,0,!0)}e.run()},a([d(cc.Node)],e.prototype,"mYaoShi",void 0),a([d(cc.Node)],e.prototype,"p_nodeWin",void 0),a([d(cc.Node)],e.prototype,"p_num",void 0),a([d(cc.Node)],e.prototype,"p_txtNum",void 0),a([d(cc.Node)],e.prototype,"mDropAnimNode",void 0),a([d(cc.SpriteFrame)],e.prototype,"mItemBgSkins",void 0),a([m],e)}(slot.BaseView);n.default=f,cc._RF.pop()},{"../Banner111001501":"Banner111001501","../GameEventName111001501":"GameEventName111001501","../NumAtlasLabel111001501":"NumAtlasLabel111001501","../main/GameDataManager":"GameDataManager","../main/ScoreRoll111001501":"ScoreRoll111001501","./GameLayer111001501":"GameLayer111001501"}],GemBoom111001501:[function(t,e,n){"use strict";cc._RF.push(e,"87e79URWURPlp31Qv3PhwqS","GemBoom111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./main/GameDataManager"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=t.call(this)||this;return e.mFrames1=[],e.mFrames2=[],e.mFrames3=[],e.mFrames4=[],e.mFrames5=[],e.mFrames6=[],e.mFrames7=[],e.mFrames8=[],e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.mparticle=this.node.getComponent(cc.ParticleSystem),this.scheduleOnce(function(){r.default.recoveBoom(t.node)},2)},e.prototype.onEnable=function(){var t=this["mFrames"+(9-this.mData)];t&&(this.mparticle.spriteFrame=t[Math.floor(Math.random()*t.length)]),this.mparticle.resetSystem()},e.prototype.setData=function(t){this.mData=t},a([l([cc.SpriteFrame])],e.prototype,"mFrames1",void 0),a([l([cc.SpriteFrame])],e.prototype,"mFrames2",void 0),a([l([cc.SpriteFrame])],e.prototype,"mFrames3",void 0),a([l([cc.SpriteFrame])],e.prototype,"mFrames4",void 0),a([l([cc.SpriteFrame])],e.prototype,"mFrames5",void 0),a([l([cc.SpriteFrame])],e.prototype,"mFrames6",void 0),a([l([cc.SpriteFrame])],e.prototype,"mFrames7",void 0),a([l([cc.SpriteFrame])],e.prototype,"mFrames8",void 0),a([c],e)}(cc.Component);n.default=p,cc._RF.pop()},{"./main/GameDataManager":"GameDataManager"}],HP111001501:[function(t,e,n){"use strict";cc._RF.push(e,"0228e5rlgFIa5BT/zIB+a29","HP111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){var e=t.call(this)||this;return e.mHp=null,e.hp=1,e.mCurrHp=0,e.mTwHp=0,e}return i(e,t),e.prototype.onEnable=function(){this.fresh(!1)},e.prototype.setData=function(t,e){this.hp=t,this.mCurrHp=e,this.node.active&&this.fresh(!1)},e.prototype.updateHp=function(t){this.mCurrHp=t,this.fresh()},e.prototype.subHp=function(t){this.mCurrHp-=t,this.mCurrHp<0&&(this.mCurrHp=0),this.fresh()},e.prototype.fresh=function(t){void 0===t&&(t=!0),t?cc.tween(this).to(.2,{twHp:this.mCurrHp/this.hp}).start():this.twHp=this.mCurrHp/this.hp},Object.defineProperty(e.prototype,"twHp",{get:function(){return this.mTwHp},set:function(t){this.mTwHp=t,this.mHp&&(this.mHp.getComponent(cc.Sprite).fillRange=t)},enumerable:!1,configurable:!0}),a([c(cc.Node)],e.prototype,"mHp",void 0),a([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],JTChildManager111001501:[function(t,e,n){"use strict";cc._RF.push(e,"5719b+lJVtDfYSZeMtE0kix","JTChildManager111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=t("../SpinSlotViewExtend111001501"),r=function(t){function e(){return t.call(this)||this}return i(e,t),e.prototype.registerClassAlias=function(){return this.registerClass(slot.JTChildFactory.SCROLLER_TYPE,slot.JTScroller),this.registerClass(slot.JTChildFactory.ITEMRENDER_TYPE,a.default),this.registerClass(slot.JTChildFactory.GIRD_TYPE,slot.JTSkinnableGridRender),this.registerClass(slot.JTChildFactory.SCATTER_TYPE,slot.JTScatterGridRender),this.registerClass(slot.JTChildFactory.LINE_TYPE,slot.JTSkinnableRuntimeLineAnimationRender),this},e.prototype.changedLine=function(e,n){t.prototype.changedLine.call(this,e,n)},e}(slot.JTChildFactory);n.default=r,cc._RF.pop()},{"../SpinSlotViewExtend111001501":"SpinSlotViewExtend111001501"}],JTLast111001501:[function(t,e,n){"use strict";cc._RF.push(e,"0f2cdhj+tNCiK+dVJa5Bguu","JTLast111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../GameEventName111001501"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return t.call(this)||this}return i(e,t),e.prototype.addEventListenner=function(){},e.prototype.runningTask=function(){this.caculate(),this.nextStep()},e.prototype.caculate=function(){this.addStepTask(r.EventName.EVENT_LAST_JT)},a([c],e)}(slot.JTPerformanceTask));n.default=l,cc._RF.pop()},{"../../GameEventName111001501":"GameEventName111001501"}],JTLayerManager111001501:[function(t,e,n){"use strict";cc._RF.push(e,"aa69cmSY1FEmpzsFRlItGKh","JTLayerManager111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=function(t){function e(){return t.call(this)||this}return i(e,t),e.prototype.initialize=function(t){this.addChildNode(slot.JTLayerFactory.EFFECT_BELOW_CONTAINER,t);var e=this.addChildNode(slot.JTLayerFactory.LAYER_SORT_SCATTER_STOP_CONTAINER,t),n=this.addChildNode(slot.JTLayerFactory.SCATTER_BLACK_BACK_GROUND,t);this.addChildNode(slot.JTLayerFactory.SKIN_LOADER_CONTAINER,t);var o=this.addChildNode(slot.JTLayerFactory.SCROLLER_MASK_CONTAINER,t);this.addChildNode(slot.JTLayerFactory.SCROLLER_CONTAINER,o);var i=this.addChildNode(slot.JTLayerFactory.LAYER_SORT_SCATTER_PLAY_CONTAINER,t),a=this.addChildNode(slot.JTLayerFactory.LAYER_SORT_STOP_RENDER,t),r=this.addChildNode(slot.JTLayerFactory.SCOLLER_GROUP_BLACK_BACK_GROUND,t),s=this.addChildNode(slot.JTLayerFactory.LAYER_SORT_PLAY_RENDER,t);this.addChildNode(slot.JTLayerFactory.LINE_CONTAINER,t),this.addChildNode(slot.JTLayerFactory.EFFECT_ABOVE_CONTAINER,t),this.addChildNode(slot.JTLayerFactory.LINE_NUMBER_CONTAINER,t),o.launch(t),r.setup(t.config.getWidth(),t.config.getHeight(),100),n.setup(t.config.getWidth(),t.config.getHeight(),100),e.setupMask(t.config.getWidth(),t.config.getHeight()),i.setupMask(t.config.getWidth(),t.config.getHeight()),a.setupMask(t.config.getWidth(),t.config.getHeight()),s.setupMask(t.config.getWidth(),t.config.getHeight())},e.prototype.registerClassAlias=function(){return this.registerClass(slot.JTLayerFactory.EFFECT_BELOW_CONTAINER,slot.JTGComponent),this.registerClass(slot.JTLayerFactory.SCROLLER_CONTAINER,slot.JTGComponent),this.registerClass(slot.JTLayerFactory.LINE_CONTAINER,slot.JTGComponent),this.registerClass(slot.JTLayerFactory.GIRD_CONTAINER,slot.JTGComponent),this.registerClass(slot.JTLayerFactory.SCROLLER_MASK_CONTAINER,slot.JTScrollerGroupMask),this.registerClass(slot.JTLayerFactory.EFFECT_ABOVE_CONTAINER,slot.JTGComponent),this.registerClass(slot.JTLayerFactory.SCATTER_GRID_CONTAINER,slot.JTGComponent),this.registerClass(slot.JTLayerFactory.SKIN_LOADER_CONTAINER,slot.JTGComponent),this.registerClass(slot.JTLayerFactory.SCOLLER_GROUP_BLACK_BACK_GROUND,slot.JTBlackBackGround),this.registerClass(slot.JTLayerFactory.LAYER_SORT_PLAY_RENDER,slot.JTLayerSortMaskContainer),this.registerClass(slot.JTLayerFactory.LAYER_SORT_STOP_RENDER,slot.JTLayerSortMaskContainer),this.registerClass(slot.JTLayerFactory.LAYER_SORT_SCATTER_PLAY_CONTAINER,slot.JTLayerSortMaskContainer),this.registerClass(slot.JTLayerFactory.LAYER_SORT_SCATTER_STOP_CONTAINER,slot.JTLayerSortMaskContainer),this.registerClass(slot.JTLayerFactory.SCATTER_BLACK_BACK_GROUND,slot.JTBlackBackGround),this.registerClass(slot.JTLayerFactory.LINE_NUMBER_CONTAINER,slot.JTGComponent),this},e}(slot.JTLayerFactory);n.default=a,cc._RF.pop()},{}],JTLogicFactroy111001501:[function(t,e,n){"use strict";cc._RF.push(e,"045e8hMhx1Mv6JCUAsS9oLb","JTLogicFactroy111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./JTLast111001501"),s=t("./JTMonster111001501"),c=t("./JTPpayLinesask111001501"),l=cc._decorator,p=l.ccclass,h=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.adjustFlowOptions=function(){this.childOption(s.default,slot.JTTaskPriority.JTELIMANATE_SCORE_TASk-1),this.childOption(r.default,slot.JTTaskPriority.JTLOOP_DISPLAY_LINES-1),this.childOption(c.default,slot.JTTaskPriority.JTCONVERT_PLAYLINES-1)},a([p],e)}(slot.JTLogicFactroy));n.default=h,cc._RF.pop()},{"./JTLast111001501":"JTLast111001501","./JTMonster111001501":"JTMonster111001501","./JTPpayLinesask111001501":"JTPpayLinesask111001501"}],JTMonster111001501:[function(t,e,n){"use strict";cc._RF.push(e,"edc62hVD35OcIZvi7JA7dAE","JTMonster111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../GameEventName111001501"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return t.call(this)||this}return i(e,t),e.prototype.addEventListenner=function(){},e.prototype.runningTask=function(){this.caculate(),this.nextStep()},e.prototype.caculate=function(){this.addStepTask(r.EventName.EVENT_MONSTR_JT)},a([c],e)}(slot.JTPerformanceTask));n.default=l,cc._RF.pop()},{"../../GameEventName111001501":"GameEventName111001501"}],JTPpayLinesask111001501:[function(t,e,n){"use strict";cc._RF.push(e,"2875eBlbZpE57xKTaNZfQfD","JTPpayLinesask111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../GameEventName111001501"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return t.call(this)||this}return i(e,t),e.prototype.addEventListenner=function(){},e.prototype.runningTask=function(){this.caculate(),this.nextStep()},e.prototype.caculate=function(){this.addStepTask(r.EventName.GAME_PLAY_LINES_TASK)},a([c],e)}(slot.JTPerformanceTask));n.default=l,cc._RF.pop()},{"../../GameEventName111001501":"GameEventName111001501"}],JTRun111001501:[function(t,e,n){"use strict";cc._RF.push(e,"b7cb4vfJWRN4opTrW8HRTDp","JTRun111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=t("./EliminateEffectUtils111001501"),r=function(t){function e(){return t.call(this)||this}return i(e,t),e.prototype.running=function(){var t=this.scroller;t.isRunning=!0,t.index==t.config.col-1&&this.dropItem()},e.prototype.dropItem=function(){a.EliminateEffectUtils111001501.runFallAction(this.scrollerGroup,slot.Handler.create(this,this.endComplete,[]))},e.prototype.endComplete=function(){for(var t=this.scrollerGroup.items,e=0;e<t.length;e++)t[e].pipeline.getCurrentTask().complete()},e}(slot.JTRunning);n.default=r,cc._RF.pop()},{"./EliminateEffectUtils111001501":"EliminateEffectUtils111001501"}],JTTest111001501:[function(t,e,n){"use strict";cc._RF.push(e,"fc79arM6IJHrZhh+K3BgNv1","JTTest111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../GameEventName111001501"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.addEventListenner=function(){},e.prototype.runningTask=function(){this.caculate(),this.nextStep()},e.prototype.caculate=function(){this.addStepTask(r.mouseEvent.ROLL_END_STEP_TASK)},a([c],e)}(slot.JTPerformanceTask));n.default=l,cc._RF.pop()},{"../../GameEventName111001501":"GameEventName111001501"}],LanguageInfo111001501:[function(t,e,n){"use strict";cc._RF.push(e,"a7534kriytEJZ/5P6CpM60F","LanguageInfo111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},a([s],e)}(slot.LanguageInfoBase));n.default=c,cc._RF.pop()},{}],LanguageInfoTest:[function(t,e,n){"use strict";cc._RF.push(e,"6b3c9HNNWhAPZm6dSW28G1z","LanguageInfoTest");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),a([s],e)}(slot.LanguageInfoBase));n.default=c,cc._RF.pop()},{}],LanguangeCompSlot111001501:[function(t,e,n){"use strict";cc._RF.push(e,"71e3a2+QYZBnrKNZAM8kcxr","LanguangeCompSlot111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),a([s],e)}(slot.LanguangeCompSlot));n.default=c,cc._RF.pop()},{}],Main111001501:[function(t,e,n){"use strict";cc._RF.push(e,"57d00zdnbpIl73C/PZZzTrK","Main111001501");var o,i,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.UICF=n.UIID=void 0;var s,c=cc._decorator,l=c.ccclass,p=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>"),game.BaseUIConf.getInstance().mergeUIConf(n.UICF);var e=game.BaseUIConf.getInstance().getUICF();game.UIManager.getInstance().initUIConf(e)},r([l],e)}(slot.MainView));n.default=p,function(t){t[t.START_FRIST_DIALOG=210101]="START_FRIST_DIALOG",t[t.FREE_GAME_RESULT=210102]="FREE_GAME_RESULT"}(s=n.UIID||(n.UIID={})),n.UICF=((i={})[s.START_FRIST_DIALOG]={bundleName:"game_111001501",path:"prefabs/StartFristDialog",preventKeyboard:!0,preventTouch:!1,quickClose:!1,cache:!0,showType:game.UIShowTypes.UI_FULLSCREEN,openAni:game.UIDefAni.UI_NONE,closeAni:game.UIDefAni.UI_NONE,zOrder:slot.LayerManage.tip},i[s.FREE_GAME_RESULT]={bundleName:"game_111001501",path:"prefabs/freeGameResult/freeGameResult",preventKeyboard:!0,preventTouch:!1,quickClose:!1,cache:!0,showType:game.UIShowTypes.UI_FULLSCREEN,openAni:game.UIDefAni.UI_NONE,closeAni:game.UIDefAni.UI_NONE,zOrder:slot.LayerManage.tip},i[10001]={bundleName:"slot",path:"slot/common/prefabs/loadingTip",preventKeyboard:!0,preventTouch:!1,quickClose:!1,cache:!0,showType:game.UIShowTypes.UI_FULLSCREEN,openAni:game.UIDefAni.UI_NONE,closeAni:game.UIDefAni.UI_NONE,zOrder:slot.LayerManage.tip},i),cc._RF.pop()},{}],MonsterCtr111001501:[function(t,e,n){"use strict";cc._RF.push(e,"15bf4OYO7lPXITydKvS3QvE","MonsterCtr111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GameEventName111001501"),s=t("./GameDataManager"),c=t("./HP111001501"),l=cc._decorator,p=l.ccclass,h=l.property,u=function(t){function e(){var e=t.call(this)||this;return e.mMonsters=[],e.mDist=100,e.mSkillPrefab=null,e.mSkillPool=new cc.NodePool,e.mDieCahhe={},e.mWriteMat=null,e.mDeaultMat={},e}return i(e,t),e.prototype.onLoad=function(){var t=s.default.monsterNames;for(var e in t)this.node.getChildByName(t[e]).active=!1},e.prototype.onEnable=function(){},e.prototype.init=function(){this.mMonsters&&this.clear(),this.mDieCahhe={};for(var t,e,n={},o=this.mFightData.monster,i=!1,a=0;a<o.length;a++){e=o[a],t=this.getMonster(e.id),n[e.id]&&((t=cc.instantiate(t)).name=t.name+"_copy",this.node.addChild(t)),t.x=-a*this.mDist,t.y=1001==e.id?200:0;var s=t.getChildByName("MonsterHp");s&&(s.getComponent(c.default).setData(e.hp.toNumber(),e.curHp.toNumber()),s.active=!0);var l=t.getChildByName("portal");l&&(l.active=!this.mIsRelogin),n[e.id]=!0,t.active=3!=e.status,this.showMaoOne(t,!1),this.showYun(t,2==e.status),2==e.status&&(i=!0),this.playOneAnimOnNode(t,this.getAnimName(t,0),!0),this.mMonsters.push(t)}i&&slot.SoundMger.instance.playEffect(r.SOUND_NAME.Dizzy_Loop,!0)},e.prototype.setData=function(t,e){var n=this;void 0===e&&(e=!1),this.mFightData=t,this.mIsRelogin=e,this.mDieCahhe={},this.scheduleOnce(function(){n.init()},.5)},e.prototype.attack=function(t,e,n){if(this.mFightResult=t,this.mMonsters.length<=0)e(null);else{for(var o=this.getCanActMonstrNum(t.actorAction),i=0,a=!1,r=function(r){var c=s.mMonsters[r];if(c){var l=t.actorAction[r+1];l&&1==l.actionType&&(a=!0,s.playAttackAnim(c,l,.9*r,function(n,a){if(++i==o){var r=t.actorChange[a];e(r,n,c.x)}},r+1),s.scheduleOnce(function(t,e,o){n(t,e,o.x)}.bind(s,t.actorChange[r+1],l,c),.9*r+.5))}},s=this,c=0;c<this.mMonsters.length;c++)r(c);a||e(null)}},e.prototype.playAttackAnim=function(t,e,n,o,i){var a=this;void 0===o&&(o=null);var s=0,c=0,l=0,p=0,h=0,u=e,m=e.skill+"",d=m.length,f=parseInt(m.substring(d-1,d));f>3&&(f=3);var _=this.getAnimName(t,f);_||(f=1,_=this.getAnimName(t,f));var g=-(i-1)*this.mDist,y=t.y,v=this;e.id==r.MonsterType.bianfu?(s=-50,c=-50,l=-200,p=-50,console.log("bianfu skill :"+e.skill+":"+f)):e.id==r.MonsterType.skeleton?(s=-100,c=0,l=-200,p=0):e.id==r.MonsterType.treasurechest?(s=g-50,l=-200):e.id==r.MonsterType.gargoyle?(s=-50,l=-200,c=-50,p=-80):e.id==r.MonsterType.treemonster?1!=f&&3!=f||(s=0,l=-200,c=100,p=0,h=.4):e.id==r.MonsterType.werewolf?(s=-50,l=-200):e.id==r.MonsterType.rockgiant?2!=f&&(s=-50,l=-200):e.id==r.MonsterType.witch&&3==f&&(s=-50);var E=g+l;E<-200&&(E=-200),cc.tween(t).delay(n).call(function(){slot.SoundMger.instance.playEffect(a.getSound(e.id,f)),v.playTwoAnimOnNode(t,_,null,!0,v.getAnimName(t,0)),a.playSkill(t,f,e.id)}).to(.2,{x:g+s,y:y+c}).delay(h).to(.2,{x:E,y:y+p}).delay(.5).to(.2,{x:g,y:y}).call(function(){o&&o(u,i)}).start()},e.prototype.hasYun=function(t){for(var e=t.actorChange,n=0;n<e.length;n++)if(2==e[n].status)return!0;return!1},e.prototype.freshStView=function(t){for(var e,n=!1,o=0;o<this.mMonsters.length;o++)if(e=this.mMonsters[o]){var i=t.actorChange[o+1];i&&(this.showYun(e,2==i.status),2==i.status&&(n=!0))}n||slot.SoundMger.instance.stopEffect(r.SOUND_NAME.Dizzy_Loop)},e.prototype.hurt=function(t,e){var n,o,i=this;this.mFightResult=t,this.hasYun(t)?slot.SoundMger.instance.playEffect(r.SOUND_NAME.Dizzy_Loop,!0):slot.SoundMger.instance.stopEffect(r.SOUND_NAME.Dizzy_Loop);for(var a=this,l=function(r){if(n=p.mMonsters[r]){if(p.mDieCahhe[n.uuid])return"continue";var l=s.default.getMonsterIdByName(n.name),h=t.actorChange[r+1];if(h){3!=h.suatus&&(n.active||(n.active=!0));var u=n.getChildByName("MonsterHp"),m=h.curHp.toNumber();if(o=p.getAnimName(n,5)){u&&u.getComponent(c.default).updateHp(m);var d=p.isFremeAnim(n,o);p.showHitFilter(n,d),p.playOneAnimOnNode(n,o,!1,function(t,n){n<=0?(a.die(t),slot.SoundMger.instance.playEffect(i.getSound(l,4)),u&&(u.active=!1)):a.playOneAnimOnNode(t,i.getAnimName(t,0),!0),e(h,t)},m)}else{var f=n.getChildByName("MonsterHp");m<=0?(p.die(n),slot.SoundMger.instance.playEffect(p.getSound(l,4)),f&&(f.active=!1)):(p.showHitFilter(n,!0),f&&f.getComponent(c.default).updateHp(m)),e(h,n)}}p.showYun(n,2==h.status)}},p=this,h=0;h<this.mMonsters.length;h++)l(h)},e.prototype.playLianJiHitAnim=function(t,e,n,o){void 0===o&&(o=0);for(var i=0;i<=4;i++)this.scheduleOnce(this.playHitAnim2.bind(this,t,e,n,4==i),o+.2*i)},e.prototype.playHitAnim2=function(t,e,n,o){if(t&&t.active)if(o)this.playOneAnimOnNode(t,this.getAnimName(t,0),!0);else{var i=n;this.showHitFilter(t,i),e&&this.playOneAnimOnNode(t,e)}},e.prototype.die=function(t){var e=this.mMonsters.indexOf(t);if(e>=0){this.mDieCahhe[t.uuid]=!0,this.showYun(t,!1);var n=t.name.indexOf("witch")>=0,o=t.name.indexOf("gargoyle")>=0;t.name.indexOf("bianfu")>=0?cc.tween(t).to(.5,{y:0}).start():n?(cc.tween(t).to(.5,{y:-120}).start(),n&&slot.SoundMger.instance.playEffect(r.SOUND_NAME.Witch_Struggle_Loop,!0)):o&&cc.tween(t).to(.5,{y:-200}).start();var i=this;n||(this.mMonsters[e]=null),this.playOneAnimOnNode(t,this.getAnimName(t,4),!1,function(){n?i.playOneAnimOnNode(t,"dieIdle",!1):i.scheduleOnce(function(){t.name.indexOf("copy")>=0?(t.removeFromParent(),t.destroy(),t=null):t.active=!1},2)})}},e.prototype.playSkill=function(t,e,n){var o,i=this,a=0,s=0,c=0,l=0,p=1,h=1,u=p,m=h,d=.3,f=0,_=.1,g=cc.macro.ONE_MINUS_SRC_ALPHA,y=this.getSkillEffName(n,e);if(y){var v,E,N=1,A=!1,S=0;if(v=this.getSkillParents(t,y,n,e),n==r.MonsterType.treemonster?y==r.SkillNames.shuyaogongji?(o=!0,A=!0,a=t.x-50,s=t.y+90,c=-360,l=s,f=.4,S=-90):y==r.SkillNames.shuyaoatk1&&(o=!0,f=0):n==r.MonsterType.witch?y==r.SkillNames.magicFireBall?(o=!0,A=!0,p=0,h=0,u=1,m=1,N=2,d=.3,c=-400,l=120,f=.4,_=.3,S=-150):y==r.SkillNames.witchLaser&&(o=!0,d=1,S=-80,c=a=-70,l=s=420,p=2.8,u=2.8,m=2,f=.4):n==r.MonsterType.rockgiant?y==r.SkillNames.rockHit&&(o=!0,A=!0,c=a=-450,l=s=110,f=.4):n==r.MonsterType.werewolf?y==r.SkillNames.wolfAtk1&&(u=p=5,m=h=5,o=!0,f=.2,S=30,c=a=100,2==e&&(S=120)):n==r.MonsterType.treasurechest?(g=cc.macro.ONE,y==r.SkillNames.baoxianggongji1?(o=!0,f=.4,c=a=160,l=s=-600,S=180,u=10,m=10):y==r.SkillNames.baoxianggongji2&&(o=!0,f=.4,u=10,m=10,c=a=160,l=s=-600,S=180)):n==r.MonsterType.gargoyle&&y==r.SkillNames.wolfAtk1&&(o=!0,f=.1,u=p=5,m=h=5),o){var T;y==r.SkillNames.magicFireBall&&((T=this.createSkillNode()).x=0,T.y=0,T.scale=2,T.getComponent(cc.Sprite).dstBlendFactor=cc.macro.ONE,v[0].addChild(T),T.getComponent(cc.Animation).play(r.SkillNames.magicBall,0));for(var O=v.length>1,M=function(t){E=O?v[t%v.length]:v[0];var e=C.createSkillNode();e.getComponent(cc.Sprite).dstBlendFactor=g,e.angle=S,e.x=a,e.y=s,e.scaleX=p,e.scaleY=h,cc.tween(e).delay(f+t*_).to(.2,{scaleX:u,scaleY:m}).call(function(){if(A){if(n==r.MonsterType.witch){var t=i.convetPos(E,e.position);t.x-=10,e.setPosition(t)}i.node.addChild(e)}else E.addChild(e);e.getComponent(cc.Animation).play(y,0)}).to(d,{x:c,y:l}).call(function(){i.recoverSkillNode(T),i.recoverSkillNode(e)}).start()},C=this,R=0;R<N;R++)M(R)}}},e.prototype.createSkillNode=function(){var t=this.mSkillPool.get();return t||((t=cc.instantiate(this.mSkillPrefab)).name="MonsterSkill"),t},e.prototype.recoverSkillNode=function(t){t&&(t.removeFromParent(),this.mSkillPool.put(t))},e.prototype.test=function(t,e){var n=this;this.mFightData={monster:[]},this.node.active=!0;var o=this.getMonster(t);this.mMonsters[0]=o,this.getAnimName(o,e),o.active=!0,this.playOneAnimOnNode(o,this.getAnimName(o,0)),this.scheduleOnce(function(){n.die(o)},4)},e.prototype.clear=function(){for(var t,e=0;e<this.mMonsters.length;e++)(t=this.mMonsters[e])&&(t.name.indexOf("copy")>=0?(t.removeFromParent(),t.destroy(),t=null):t.active=!1);this.mMonsters=[]},e.prototype.getMonster=function(t){var e=s.default.getMonsterNameById(t);return this.node.getChildByName(e)},e.prototype.getCanActMonstrNum=function(t){for(var e,n=0,o=0;o<this.mMonsters.length;o++)this.mMonsters[o]&&t[e=o+1]&&1!=t[e].id&&1==t[e].actionType&&n++;return n},e.prototype.playTwoAnimOnNode=function(t,e,n,o,i,a){void 0===n&&(n=null),void 0===o&&(o=!0),void 0===i&&(i=null),void 0===a&&(a=null);var r=this;this.playOneAnimOnNode(t,e,!1,function(){n&&n(t,a),i&&r.playOneAnimOnNode(t,i,o)})},e.prototype.playOneAnimOnNode=function(t,e,n,o,i){if(void 0===n&&(n=!1),void 0===o&&(o=null),void 0===i&&(i=null),t.active&&e){var a=this.getSpAnimNode(t),r=t.getChildByName("frameAnim"),s=this.isFremeAnim(t,e);if(a&&(a.active=!s),r&&(r.active=s),s){r.getComponent(cc.Animation).play(e,0);var c=!1;r.getComponent(cc.Animation).on("finished",function(){c||(c=!0,o&&o(t,i))},this)}else{var l=!o&&n;a.getComponent(sp.Skeleton).setAnimation(0,e,l),a.getComponent(sp.Skeleton).setCompleteListener(function(){a.getComponent(sp.Skeleton).animation==e&&o&&o(t,i)})}}else o&&o(t,i)},e.prototype.getSpAnimNode=function(t){var e=t.name;return t.name.indexOf("_")>=0&&(e=t.name.split("_")[0]),t.getChildByName(e)},e.prototype.hidePortal=function(){for(var t,e=0;e<this.mMonsters.length;e++)(t=this.mMonsters[e])&&t.active&&t.name.indexOf("witch")>=0&&(t.getChildByName("portal").active=!1)},e.prototype.showYun=function(t,e){t&&(t.getChildByName("xuanyun").active=e)},e.prototype.showMaoHan=function(t){for(var e,n=0;n<this.mMonsters.length;n++)(e=this.mMonsters[n]).active&&this.showMaoOne(e,t)},e.prototype.showMaoOne=function(t,e){var n=this;t.getChildByName("maohan").active=e;var o=t.getChildByName("zhengjing"),i=t.getChildByName("tanhao");e?this.scheduleOnce(function(t){t.active&&(o.active=!0,n.playOneAnimOnNode(o,"zhengjing",!1,function(){o.active=!1}),i.active=!0,n.playOneAnimOnNode(i,"tanhao",!1,function(){i.active=!1}))},1):(o.active=!1,i.active=!1)},e.prototype.playBossLiveAnim=function(){for(var t,e=0;e<this.mMonsters.length;e++)if((t=this.mMonsters[e])&&t.active&&t.name.indexOf("witch")>=0){slot.SoundMger.instance.playEffect(r.SOUND_NAME.Witch_Run_Away),t.y=0,this.playOneAnimOnNode(t,"disappear",!1,function(t){cc.tween(t).delay(2).to(.3,{opacity:0}).call(function(t){t.active=!1,t.opacity=255,slot.SoundMger.instance.stopEffect(r.SOUND_NAME.Witch_Struggle_Loop)}).start()});break}},e.prototype.isFremeAnim=function(t,e){var n=!1;return t.name.indexOf("bianfu")>=0?n=!0:t.name.indexOf("gargoyle")>=0?"atk2"!=e&&"die"!=e||(n=!0):t.name.indexOf("rockgiant")>=0?"atk2"!=e&&"atk3"!=e||(n=!0):t.name.indexOf("werewolf")>=0?"atk3"==e&&(n=!0):t.name.indexOf("witch")>=0&&("atk3"!=e&&"die"!=e&&"dieIdle"!=e&&"disappear"!=e||(n=!0)),n},e.prototype.getAnimName=function(t,e){var n="",o=t.name;return o.indexOf("bianfu")>=0?0==e?n="idle":1==e?n="atk1":2==e?n="atk2":3==e?n="":4==e?n="death":5==e?n="":6==e&&(n=""):o.indexOf("gargoyle")>=0?0==e?n="Idle_01":1==e?n="Attack_01":2==e?n="atk2":3==e?n="":4==e?n="die":5==e?n="hit":6==e&&(n="Deflect"):o.indexOf("rockgiant")>=0?0==e?n="Idle":1==e?n="Attack_01":2==e?n="atk2":3==e?n="atk3":4==e?n="Death":5==e?n="Hit":6==e&&(n="Deflect"):o.indexOf("skeleton")>=0?0==e?n="idle":1==e?n="atk1":2==e?n="atk2":3==e?n="":4==e?n="dead":5==e?n="hit":6==e&&(n="deflect"):o.indexOf("treasurechest")>=0?0==e?n="Idle":1==e?n="Attack_01":2==e?n="Attack_02":3==e?n="":4==e?n="Death":5==e?n="Hit":6==e&&(n="Deflect"):o.indexOf("treemonster")>=0?0==e?n="idle":1==e?n="atk1":2==e?n="atk2":3==e?n="atk3":4==e?n="dead":5==e?n="hit":6==e&&(n="deflect"):o.indexOf("werewolf")>=0?0==e?n="idle":1==e?n="atk1":2==e?n="atk2":3==e?n="atk3":4==e?n="dead":5==e?n="hit":6==e&&(n="deflection"):o.indexOf("witch")>=0&&(0==e?n="Idle_01":1==e?n="Attack_02":2==e?n="Eye_Lazer_01":3==e?n="atk3":4==e?n="die":5==e?n="Hit":6==e&&(n="Deflection")),""==n&&new Error(o+" not find anim by st "+e),n},e.prototype.getSkillParents=function(t,e,n,o){void 0===o&&(o=0);var i=null,a=this.getSpAnimNode(t);n==r.MonsterType.treemonster?e==r.SkillNames.shuyaoatk1&&(i=this.getNode("ATTACHED_NODE_TREE/ATTACHED_NODE:root/ATTACHED_NODE:Main_Controler/ATTACHED_NODE:bone/ATTACHED_NODE:bone2/ATTACHED_NODE:bone9/ATTACHED_NODE:bone10/ATTACHED_NODE:bone11",a)):n==r.MonsterType.witch?e!=r.SkillNames.magicBall&&e!=r.SkillNames.magicFireBall&&e!=r.SkillNames.witchLaser||(i=this.getNode("ATTACHED_NODE_TREE/ATTACHED_NODE:root/ATTACHED_NODE:Main_Controler/ATTACHED_NODE:waist/ATTACHED_NODE:bone/ATTACHED_NODE:bone2/ATTACHED_NODE:bone3/ATTACHED_NODE:Head/ATTACHED_NODE:Eye",a)):n==r.MonsterType.rockgiant?e==r.SkillNames.rockHit&&(i=this.getNode("ATTACHED_NODE_TREE/ATTACHED_NODE:root/ATTACHED_NODE:World_Controler/ATTACHED_NODE:MainControl/ATTACHED_NODE:Hips/ATTACHED_NODE:Body/ATTACHED_NODE:Chest/ATTACHED_NODE:bone11/ATTACHED_NODE:bone12",a)):n==r.MonsterType.werewolf?e==r.SkillNames.wolfAtk1&&(i=this.getNode("ATTACHED_NODE_TREE/ATTACHED_NODE:root/ATTACHED_NODE:Main_Controler/ATTACHED_NODE:bone/ATTACHED_NODE:bone2/ATTACHED_NODE:bone6/ATTACHED_NODE:bone7/ATTACHED_NODE:bone8/ATTACHED_NODE:bone15",a),2==o&&(i=this.getNode("ATTACHED_NODE_TREE/ATTACHED_NODE:root/ATTACHED_NODE:Main_Controler/ATTACHED_NODE:bone/ATTACHED_NODE:bone2/ATTACHED_NODE:bone4/ATTACHED_NODE:bone49",a))):n==r.MonsterType.treasurechest?i=this.getNode("ATTACHED_NODE_TREE/ATTACHED_NODE:root/ATTACHED_NODE:World_Controler_Main/ATTACHED_NODE:World_Controler_Sub/ATTACHED_NODE:Root/ATTACHED_NODE:Main_Back/ATTACHED_NODE:Bottom_Box",a):n==r.MonsterType.gargoyle&&(i=this.getNode("ATTACHED_NODE_TREE/ATTACHED_NODE:root/ATTACHED_NODE:Main_Controler_World/ATTACHED_NODE:Main_Controler_Sub/ATTACHED_NODE:Root_Main/ATTACHED_NODE:bone34/ATTACHED_NODE:bone23/ATTACHED_NODE:bone25/ATTACHED_NODE:bone28",a));var s=[];return i&&s.push(i),s},e.prototype.getSkillEffName=function(t,e){var n="";return t==r.MonsterType.treasurechest?1==e?n=r.SkillNames.baoxianggongji1:2==e&&(n=r.SkillNames.baoxianggongji2):t==r.MonsterType.gargoyle?1==e&&(n=r.SkillNames.wolfAtk1):t==r.MonsterType.rockgiant?1==e&&(n=r.SkillNames.rockHit):t==r.MonsterType.treemonster?2==e?n=r.SkillNames.shuyaogongji:1!=e&&3!=e||(n=r.SkillNames.shuyaoatk1):t==r.MonsterType.witch?2==e?n=r.SkillNames.witchLaser:1==e&&(n=r.SkillNames.magicFireBall):t==r.MonsterType.werewolf&&(1==e?n=r.SkillNames.wolfAtk1:2==e&&(n=r.SkillNames.wolfAtk1)),n},e.prototype.getSound=function(t,e){var n;if(t==r.MonsterType.bianfu)switch(e){case 1:n=r.SOUND_NAME.Bat_Normal_Atk;break;case 2:n=r.SOUND_NAME.Bat_Combo_Atk;break;case 3:break;case 4:n=r.SOUND_NAME.Bat_Die}else if(t==r.MonsterType.gargoyle)switch(e){case 1:n=r.SOUND_NAME.Gargoyle_Normal_Atk;break;case 2:n=r.SOUND_NAME.Gargoyle_Combo_Atk;break;case 3:break;case 4:n=r.SOUND_NAME.Gargoyle_Die}else if(t==r.MonsterType.rockgiant)switch(e){case 1:n=r.SOUND_NAME.Rock_Normal_Atk;break;case 2:n=r.SOUND_NAME.Rock_Combo_Atk;break;case 3:break;case 4:n=r.SOUND_NAME.Rock_Die}else if(t==r.MonsterType.skeleton)switch(e){case 1:n=r.SOUND_NAME.Skeleton_Normal_Atk;break;case 2:n=r.SOUND_NAME.Skeleton_Jump_Atk;break;case 3:break;case 4:n=r.SOUND_NAME.Skeleton_Die}else if(t==r.MonsterType.treasurechest)switch(e){case 1:n=r.SOUND_NAME.Chest_Guy_Atk;break;case 2:n=r.SOUND_NAME.Chest_Guy_Jump_Atk;break;case 3:break;case 4:n=r.SOUND_NAME.Chest_Guy_Die}else if(t==r.MonsterType.treemonster)switch(e){case 1:n=r.SOUND_NAME.Tree_Normal_Atk;break;case 2:n=r.SOUND_NAME.Tree_Scissor_Atk;break;case 3:n=r.SOUND_NAME.Tree_Toxic_Atk;break;case 4:n=r.SOUND_NAME.Tree_Die}else if(t==r.MonsterType.werewolf)switch(e){case 1:n=r.SOUND_NAME.Wolf_Normal_Atk;break;case 2:n=r.SOUND_NAME.Wolf_Impact_Atk;break;case 3:n=r.SOUND_NAME.Wolf_Turn_Around_Atk;break;case 4:n=r.SOUND_NAME.Wolf_Die}else if(t==r.MonsterType.witch)switch(e){case 1:n=r.SOUND_NAME.Witch_Normal_Atk;break;case 2:n=r.SOUND_NAME.Witch_Laser_Atk;break;case 3:n=r.SOUND_NAME.Witch_Combo_Atk;break;case 4:n=r.SOUND_NAME.Witch_Die}return n},e.prototype.showHitFilter=function(t,e){var n=this.getSpAnimNode(t),o=t.getChildByName("frameAnim"),i=e?o:n;if(i){var a=this;e?(this.mDeaultMat[i.uuid]||(this.mDeaultMat[i.uuid]=i.getComponent(cc.Sprite).getMaterial(0)),i.getComponent(cc.Sprite).setMaterial(0,this.mWriteMat),this.scheduleOnce(function(){i.getComponent(cc.Sprite).setMaterial(0,a.mDeaultMat[i.uuid])},.2)):(this.mDeaultMat[i.uuid]||(this.mDeaultMat[i.uuid]=i.getComponent(sp.Skeleton).getMaterial(0)),i.getComponent(sp.Skeleton).setMaterial(0,this.mWriteMat),this.scheduleOnce(function(){i.getComponent(sp.Skeleton).setMaterial(0,a.mDeaultMat[i.uuid])},.2))}},e.prototype.getNode=function(t,e){for(var n,o=e,i=t.split("/"),a=0;a<i.length;a++){if(!(n=o.getChildByName(i[a])))return null;if(a==i.length-1)return n;o=n}return null},e.prototype.convetPos=function(t,e){var n=t.convertToWorldSpaceAR(e);return this.node.convertToNodeSpaceAR(n)},a([h(cc.Prefab)],e.prototype,"mSkillPrefab",void 0),a([h(cc.Material)],e.prototype,"mWriteMat",void 0),a([p],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../GameEventName111001501":"GameEventName111001501","./GameDataManager":"GameDataManager","./HP111001501":"HP111001501"}],NumAtlasLabel111001501:[function(t,e,n){"use strict";cc._RF.push(e,"0452atpXL1HG41C7ZUyJq7w","NumAtlasLabel111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),a([s],e)}(slot.CommonNumAtlasBase));n.default=c,cc._RF.pop()},{}],RespinCtr111001501:[function(t,e,n){"use strict";cc._RF.push(e,"827fdxYc8dJtqZnESNOge94","RespinCtr111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GameEventName111001501"),s=t("./GameDataManager"),c=cc._decorator,l=c.ccclass,p=c.property,h=function(t){function e(){var e=t.call(this)||this;return e.mAnimNode=null,e.mImgsNode=null,e.mTitle=null,e.spriteFresmes=[],e.mImgs=[],e.ids1=[],e.ids2=[],e.poss=[],e.mCenterX=0,e.mCenterY=0,e.mR=200,e.mIsEnd=!1,e}return i(e,t),e.prototype.onEnable=function(){},e.prototype.setData=function(t,e,n){var o,i,a,c,l=this;void 0===n&&(n=null),this.mEndCall=n,this.mMoveCompeteCall=e,s.default.isReapRun=!0,this.mIsEnd=!1;for(var p=0;p<t.length;p++)(c=t[p].data)<9&&(c=9-t[p].data),this.ids1[p]=c,(o=this.poss[p])||(o=this.convertPos(t[p]),this.poss[p]=o),(i=this.mImgs[p])||((i=new cc.Node).addComponent(cc.Sprite),i.scale=.6,this.mImgs[p]=i),i.setPosition(o),i.getComponent(cc.Sprite).spriteFrame=this.spriteFresmes[c-1],9==c&&(t[p].clearSkin(),a=o,i.getComponent(cc.Sprite).spriteFrame=null);this.mTitle.scale=0,this.mTitle.opacity=0,this.mTitle.y=0,this.mAnimNode.active=!0,this.mAnimNode.x=a.x,this.mAnimNode.y=a.y;var h=this.getDist(this.mAnimNode.x,this.mAnimNode.y,this.mCenterX,this.mCenterY)/300;s.default.playAnimOnNode(this.mAnimNode,"respin_1",!1,null,function(){s.default.playAnimOnNode(l.mAnimNode,"respin_1_loop",!0),slot.SoundMger.instance.playEffect(r.SOUND_NAME.Respin_Gem_Move),cc.tween(l.mAnimNode).to(h,{x:l.mCenterX,y:l.mCenterY}).call(function(){l.moveToCirclePos(),l.mMoveCompeteCall&&l.mMoveCompeteCall.run()}).start()}),s.default.isShowingRespin=!0,slot.SoundMger.instance.playEffect(r.SOUND_NAME.Gems_Highlight)},e.prototype.moveToCirclePos=function(){for(var t,e,n=this,o=0;o<this.mImgs.length;o++)(t=this.mImgs[o]).parent=this.mImgsNode,t.setPosition(this.poss[o]),e=this.getCirclePos(t.x,t.y),this.move(t,e[0],e[1]);this.showRoller(!1),this.startRun(),cc.tween(this.mTitle).to(.3,{scale:1.2,opacity:255}).to(.2,{scale:.9}).to(.2,{scale:1.1}).to(.2,{scale:1}).start(),s.default.playAnimOnNode(this.mAnimNode,"respin_2",!1,null,function(){n.mAnimNode.active=!1}),this.scheduleOnce(function(){n.stop()},3)},e.prototype.move=function(t,e,n){var o=this.getDist(t.x,t.y,e,n)/300;cc.tween(t).to(o,{x:e,y:n}).start()},e.prototype.changeSkins=function(t){var e;this.ids2=t;for(var n=0;n<this.mImgs.length;n++)(e=this.ids2[n])<9&&(e=9-this.ids2[n]),this.mImgs[n].getComponent(cc.Sprite).spriteFrame=this.spriteFresmes[e-1];s.default.isReapRun=!0,game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_GAMECONTROL_ALL_BTN_CLICK,!1)},e.prototype.convertPos=function(t){var e=t.parent.convertToWorldSpaceAR(t.position);return this.node.convertToNodeSpaceAR(e)},e.prototype.startRun=function(){slot.SoundMger.instance.playEffect(r.SOUND_NAME.Gems_Respin),this.schedule(this.run,.02)},e.prototype.stop=function(){var t;this.unschedule(this.run),this.mImgsNode.angle=0;for(var e=0;e<this.mImgs.length;e++)t=this.poss[e],this.move(this.mImgs[e],t.x,t.y);this.scheduleOnce(this.end,3),cc.tween(this.mTitle).to(.2,{y:-50}).to(.5,{y:50,opacity:0}).start()},e.prototype.run=function(){this.mImgsNode.angle-=10},e.prototype.end=function(){this.mIsEnd||(this.unschedule(this.end),this.mEndCall&&this.mEndCall.run(),this.clear(),this.showRoller(!0),this.mIsEnd=!0,s.default.triReapin=!1,s.default.isShowingRespin=!1,s.default.isReapRun=!1,game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_GAMECONTROL_ALL_BTN_CLICK,!0))},e.prototype.clear=function(){for(var t=0;t<this.mImgs.length;t++)this.mImgs[t].removeFromParent()},e.prototype.showRoller=function(t){slot.SlotMachineView.instance.scroller.opacity=t?255:0},e.prototype.getCirclePos=function(t,e){var n=this.getRadian(this.mCenterX,this.mCenterY,t,e);return[this.mCenterX+this.mR*Math.cos(n),this.mCenterY+this.mR*Math.sin(n)]},e.prototype.getDist=function(t,e,n,o){return Math.sqrt(Math.pow(n-t,2)+Math.pow(o-e,2))},e.prototype.getRadian=function(t,e,n,o){var i=n-t,a=o-e;return Math.atan2(a,i)},a([p(cc.Node)],e.prototype,"mAnimNode",void 0),a([p(cc.Node)],e.prototype,"mImgsNode",void 0),a([p(cc.Node)],e.prototype,"mTitle",void 0),a([p([cc.SpriteFrame])],e.prototype,"spriteFresmes",void 0),a([l],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../GameEventName111001501":"GameEventName111001501","./GameDataManager":"GameDataManager"}],Result111001501:[function(t,e,n){"use strict";cc._RF.push(e,"7495asQ/XdDTKXThZmOr+M2","Result111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GameEventName111001501"),s=t("../NumAtlasLabel111001501"),c=cc._decorator,l=c.ccclass,p=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mGold=0,e.mCurrGold=0,e.num=null,e.tipTxt=null,e.particle=null,e.animNode=null,e}return i(e,t),e.prototype.onEnable=function(){var t=this;this.tipTxt.opacity=0,this.num.opacity=0,this.num.y=80,this.tipTxt.y=-70,this.particle.active=!1,this.animNode.active=!0,this.animNode.getComponent(sp.Skeleton).setAnimation(0,"fadein",!1),this.animNode.getComponent(sp.Skeleton).setCompleteListener(function(){"fadein"==t.animNode.getComponent(sp.Skeleton).animation&&t.animNode.getComponent(sp.Skeleton).setAnimation(0,"loop",!0)});var e=this;this.scheduleOnce(function(){var t=e.mGold;slot.SoundMger.instance.playEffect(r.SOUND_NAME.Money_Rolling,!1),cc.tween(e).to(2,{currGold:t}).call(function(){slot.SoundMger.instance.playEffect(r.SOUND_NAME.Money_Reached)}).start(),cc.tween(e.num).to(.2,{y:0,opacity:255}).call(function(){e.particle.active=!0,e.particle.getComponent(cc.ParticleSystem).resetSystem()}).start(),cc.tween(e.tipTxt).to(.2,{y:-36,opacity:255}).start()},.1)},e.prototype.setData=function(t){this.mGold=t,this.mCurrGold=0},Object.defineProperty(e.prototype,"currGold",{get:function(){return this.mCurrGold},set:function(t){this.mCurrGold=t,this.num.getComponent(s.default).string=slot.SlotUtils.formatNumber(this.mCurrGold)},enumerable:!1,configurable:!0}),a([p(cc.Node)],e.prototype,"num",void 0),a([p(cc.Node)],e.prototype,"tipTxt",void 0),a([p(cc.Node)],e.prototype,"particle",void 0),a([p(cc.Node)],e.prototype,"animNode",void 0),a([l],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../GameEventName111001501":"GameEventName111001501","../NumAtlasLabel111001501":"NumAtlasLabel111001501"}],ScoreRoll111001501:[function(t,e,n){"use strict";cc._RF.push(e,"84e88N4rSxJH7n+xHNF4qE5","ScoreRoll111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mLabel=null,e.scoreNode=null,e.mTime=8,e.mW=170,e}return i(e,t),e.prototype.startRoll=function(){var t=this;this.unschedule(this.freshStr),cc.Tween.stopAllByTarget(this.mLabel),this.mLabel.x=0,this.scheduleOnce(function(){t.freshStr(),t.isOut()&&t.schedule(t.freshStr,t.mTime)},.2)},e.prototype.onEnable=function(){this.mLabel.x=0},e.prototype.freshStr=function(){if(this.isOut()){var t=this.mLabel.width/2-this.mW;this.mLabel.x=t,cc.tween(this.mLabel).to(6,{x:-t}).start()}else this.mLabel.x=0,this.unschedule(this.freshStr)},e.prototype.isOut=function(){return this.mLabel.width>2*this.mW},e.prototype.onDisable=function(){cc.Tween.stopAllByTarget(this.mLabel),this.unschedule(this.freshStr)},a([c(cc.Node)],e.prototype,"mLabel",void 0),a([c(cc.Node)],e.prototype,"scoreNode",void 0),a([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],SpinSlotViewExtend111001501:[function(t,e,n){"use strict";cc._RF.push(e,"32be0vc0edONqUu4Uh58X3x","SpinSlotViewExtend111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=function(t){function e(){var e=t.call(this)||this;return e._slotFrameAniView=null,e._slotFrameAniViewSign="___SLOT_FRAME_ANI_VIEW_SIGN",e.ID=null,e.offset=0,e.time=.018,e.mForceInfo={},e.isBlur=!0,e.isFade=!0,e.isFadeMask=!1,e.skinLoader.skeletonNode.scale=1,e}return i(e,t),e.prototype.reset=function(){t.prototype.reset.call(this),this.clearForce(),this.showParticle(8==this.data)},e.prototype.onPlayAnimation=function(){},e.prototype.playFreeAddAni=function(){},e.prototype.onStopAnimation=function(){this._recoverSlotFrameAniView()},e.prototype.onPlayRewardsAnimation=function(){},e.prototype.onStopRewardsAnimation=function(){e._rewardsView&&e._rewardsView.removeFromParent()},e.prototype._getRewardsAnimation=function(){},e.prototype.addEffectElement=function(){},e.prototype.addEffectNeighbor=function(){},e.prototype.addGreyMarsk=function(){},e.prototype.closeMarsk=function(){},e.prototype._showFrameAniView=function(){},e.prototype._getSlotFrameAniView=function(){return this._slotFrameAniView?this._slotFrameAniView:(this._slotFrameAniView=new cc.Node,new slot.AniParam(slot.ANIMATION_TYPE.SKELETON,"skeleton/iconFadeoutFx/iconFadeoutFX",slot.GData.bundleName,"animation"),this._slotFrameAniView)},e.prototype.playAnimaiton=function(){},e.prototype.showParticle=function(t){var e=this;this.mParticle&&this.mParticle.removeFromParent(),t&&(this.mParticle?this.addChild(this.mParticle):game.ResLoader.getInstance().loadRes("prefabs/dikuang/zuanshipc",cc.Prefab,function(t,n){e.mParticle||(e.mParticle=cc.instantiate(n),e.mParticle.x=0,e.mParticle.y=0,e.addChild(e.mParticle))},"game_111001501"))},e.prototype.shake=function(){var t=this.x,e=this.y,n=cc.sequence(cc.moveTo(this.time,cc.v2(t+(5+this.offset),e+(this.offset+7))),cc.moveTo(this.time,cc.v2(t-(6+this.offset),e+(this.offset+7))),cc.moveTo(this.time,cc.v2(t-(13+this.offset),e+(this.offset+3))),cc.moveTo(this.time,cc.v2(t+(3+this.offset),e-(6+this.offset))),cc.moveTo(this.time,cc.v2(t-(5+this.offset),e+(this.offset+5))),cc.moveTo(this.time,cc.v2(t+(2+this.offset),e-(8+this.offset))),cc.moveTo(this.time,cc.v2(t-(8+this.offset),e-(10+this.offset))),cc.moveTo(this.time,cc.v2(t+(3+this.offset),e+(this.offset+10))),cc.moveTo(this.time,cc.v2(t+(0+this.offset),e+(this.offset+0))));cc.tween(this).then(n).repeat(5).start()},e.prototype.addForce=function(t,e){this.mForceInfo[t]=e},e.prototype.clearForce=function(){this.mForceInfo={}},e.prototype.shakeByForce=function(){var t=this.mForceInfo[1];t?t=20*(6-t):(t=this.mForceInfo[2])&&(t=20*-(6-t));var e=this.mForceInfo[3];if(e?e&&(e=20*-(6-e)):(e=this.mForceInfo[4])&&(e=20*(6-e)),t||e){var n=this.x,o=this.y,i={};t&&(i.y=o+t),e&&(i.x=n+e),cc.tween(this).to(.2,i).delay(.05).to(.3,{x:n,y:o},{easing:"easeIn"}).start()}},e.prototype.clearSkin=function(){this.skinLoader.url=null},e.prototype.changeData=function(t){this.data=t},e.prototype._recoverSlotFrameAniView=function(){},e._rewardsView=null,e}(slot.SpinSlotView);n.default=a,cc._RF.pop()},{}],StartFristDialog111001501:[function(t,e,n){"use strict";cc._RF.push(e,"bbfa8hDI/ZImYLGHGmMUXSQ","StartFristDialog111001501");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./GameEventName111001501"),s=t("./main/Main111001501"),c=cc._decorator,l=c.ccclass,p=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mPlayer=null,e.mCat=null,e.mStep=0,e.mTime=3,e}return i(e,t),e.prototype.onEnable=function(){var t=this;this.schedule(this.nextStep,this.mTime),this.showStep(!0,this.mStep),setTimeout(function(){t.nextStep()},100)},e.prototype.nextStep=function(){this.showStep(!1,this.mStep),this.mStep++,this.mStep>7&&this.closeClick(),this.showStep(!0,this.mStep)},e.prototype.showStep=function(t,e){var n=this,o=this.node.getChildByName("step"+e);this.showTw(o,t),t&&(0==e?this.showTw(this.mCat,!0):1==e?this.scheduleOnce(function(){n.showTw(n.mPlayer,!0)},this.mTime-3):7==e&&(this.showTw(this.mCat,!1),this.showTw(this.mPlayer,!1)))},e.prototype.showTw=function(t,e){if(t){e&&(t.opacity=0),t.active=e;var n=e?.5:.2;cc.tween(t).to(n,{opacity:e?255:0}).start()}},e.prototype.closeClick=function(){this.unschedule(this.nextStep),game.UIManager.getInstance().closeByUIID(s.UIID.START_FRIST_DIALOG)},e.prototype.onDisable=function(){game.EventManager.getInstance().raiseEvent(r.EventName.EVENT_PLAYER_START)},a([p(cc.Node)],e.prototype,"mPlayer",void 0),a([p(cc.Node)],e.prototype,"mCat",void 0),a([l],e)}(game.UIView);n.default=h,cc._RF.pop()},{"./GameEventName111001501":"GameEventName111001501","./main/Main111001501":"Main111001501"}],Tool:[function(t,e,n){"use strict";cc._RF.push(e,"ff1f8UR+3xIJ6t3h7aVgrrn","Tool"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.respDataHandle=function(){var e=t.totalEliminateTime-1,n=t.respData.updateList[0].value.handleState.game_10017.data.resultList,o=[],i=[],a=[],r=[];n[e]?(n[e].spinResult.lineResult,r=n[e].spinResult.lineResult):console.error(e,n);for(var s=[],c=0;c<r.length;c++)for(var l=r[c],p=0;p<l.winPos.length;p++){var h=l.winPos[p].low;s.push(h)}for(o.push(s),c=0;c<o.length;c++){var u=[];for(p=0;p<o[c].length;p++)o[c][p]>7&&this.cutRepeatdataHandle(u,o[c][p]-7,o[c])&&u.push(o[c][p]-7),o[c][p]<43&&this.cutRepeatdataHandle(u,o[c][p]+7,o[c])&&u.push(o[c][p]+7),o[c][p]>1&&this.cutRepeatdataHandle(u,o[c][p]-1,o[c])&&this.otherTwoDataHandle(o[c][p])&&u.push(o[c][p]-1),o[c][p]<49&&this.cutRepeatdataHandle(u,o[c][p]+1,o[c])&&this.otherOneDataHandle(o[c][p])&&u.push(o[c][p]+1);i.push(u)}for(c=0;c<i[0].length;c++){var m=slot.SlotMachineView.instance.scroller.getRenderByIndex(i[0][c]);a.push(m)}return a},t.prototype.getCurrectElemData=function(e){var n=t.respData.updateList[0].value.handleState.game_10017.data.resultList,o=[],i=[];n[e]&&(o=n[e].spinResult.lineResult);for(var a=0;a<o.length;a++)for(var r=o[a],s=0;s<r.winPos.length;s++){var c=r.winPos[s].low;i.push(c)}return i},t.cutRepeatdataHandle=function(t,e,n){var o=!0;return t.forEach(function(t){t==e&&(o=!1)}),n.forEach(function(t){t==e&&(o=!1)}),o},t.otherOneDataHandle=function(t){var e=!0;return t%7==0&&(e=!1),e},t.otherTwoDataHandle=function(t){var e=!0;return(t-1)%7==0&&(e=!1),e},t.drawLineDataHandle=function(t){var e,n=this.respData.updateList[0].value.handleState.game_10017.data.resultList,o=[],i=[],a=[];n[t]&&(o=n[t].spinResult.lineResult);for(var r=0;r<o.length;r++)o[r].winPos[0]&&i.push(o[r].winPos);for(e=this.checkDataIsLine(i),r=0;r<e.length;r++){var s=e[r];a.push(this.lineDataPush(s))}return a},t.checkDataIsLine=function(t){for(var e=[],n=t.length-1;n>=0;n--){var o=t[n],i=[],a=0,r=!1;if(null!=o){for(var s=t.length-1;s>=0;s--){var c=t[s];if(this.putInTwoDataCheckRelation(o,c)){if(r=!0,0==a){a++;var l=this.putTwoDataMakeUp(o,c);t=this.changeData(t,o,c);for(var p=0;p<l.length;p++)i.push(l[p])}else for(t=this.changeData(t,c),p=0;p<c.length;p++)i.push(c[p]);o=i}}if(!r)for(var h=0;h<o.length;h++){var u=o[h];i.push(u)}}e.push(i)}return e},t.changeData=function(t,e,n){void 0===n&&(n=null);for(var o=[],i=0;i<t.length;i++){var a=t[i];a==e||a==n||o.push(a)}return o},t.screenData=function(t){console.log(t,[])},t.putTwoDataMakeUp=function(t,e){for(var n=[],o=0;o<t.length;o++){var i=t[o];n.push(i)}for(o=0;o<e.length;o++)i=e[o],n.push(i);return n},t.putInTwoDataCheckRelation=function(t,e){for(var n=!1,o=0;o<t.length;o++)this.checkOneDataWithLine(t[o].low,e)&&(n=!0);return n},t.checkOneDataWithLine=function(t,e){var n=this,o=!1;return e.forEach(function(e){t+7!==e.low&&t-7!==e.low?t-1===e.low&&n.otherTwoDataHandle(t)?o=!0:t+1===e.low&&n.otherOneDataHandle(t)&&(o=!0):o=!0}),o},t.getCheckNeedToMarskData=function(t){var e=[],n=[],o=[],i=[];return n=this.getAllDataInRoller(),o=this.getListData(t),n.forEach(function(t){var n=!0;8!=t.data&&9!=t.data||(n=!1),n&&e.push(t)}),e.forEach(function(t){var e=!0;o.forEach(function(n){t==n&&(e=!1)}),e&&i.push(t)}),i},t.getListData=function(t){for(var e=Number(t.index),n=[],o=1;o<=7;o++)n.push(slot.SlotMachineView.instance.scroller.getRenderByIndex(7*e+o));return n},t.getAllDataInRoller=function(){for(var t=[],e=0;e<60;e++){var n=slot.SlotMachineView.instance.scroller.getRenderByIndex(e);n&&t.push(n)}return t},t.lineDataPush=function(t){for(var e=[],n=0;n<t.length;n++){var o=t[n].low;e.push(this.checkOneDataWithSelfLine(o,t))}return e},t.checkOneDataWithSelfLine=function(t,e){var n=this,o=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],i=[];e.forEach(function(e){var i=e.low;t+7===i?o[2]=!0:t-7===i?o[1]=!0:t-1===i&&n.otherTwoDataHandle(t)?o[0]=!0:t+1===i&&n.otherOneDataHandle(t)&&(o[3]=!0)}),e.forEach(function(e){var n=e.low;t-6!==n||o[1]||(o[4]=!0),t-6!==n||o[3]||(o[8]=!0),t+8!==n||o[2]||(o[5]=!0),t+8!==n||o[3]||(o[9]=!0),t-8!==n||o[1]||(o[6]=!0),t-8!==n||o[0]||(o[10]=!0),t+6!==n||o[2]||(o[7]=!0),t+6!==n||o[0]||(o[11]=!0)});var a=slot.SlotMachineView.instance.scroller.getRenderByIndex(t);return i.push(a),o[4]&&i.push("specialDownLeftCurved2"),o[5]&&i.push("specialDownRightCurved2"),o[8]&&i.push("specialDownLeftCurved1"),o[9]&&i.push("specialDownRightCurved1"),o[6]&&(o[4]||(o[3]?i.push("shortLeft2"):i.push("downLeftCurved"))),o[7]&&(o[5]||(o[3]?i.push("shortRight2"):i.push("downRightCurved"))),o[10]&&(o[11]||(o[2]?i.push("shorttop2"):i.push("topRightCurved"))),o[11]&&(o[10]||(o[2]?i.push("shorttop1"):i.push("topLeftCurved"))),o[0]||(o[10]||(o[1]?i.push("shorttop1"):i.push("topLeftCurved")),o[11]||(o[2]?i.push("shorttop2"):i.push("topRightCurved"))),o[1]||(o[6]||o[0]&&i.push("shortLeft1"),o[4]||(o[3]?i.push("shortLeft2"):i.push("downLeftCurved"))),o[2]||(o[5]||(o[3]?i.push("shortRight2"):i.push("downRightCurved")),o[7]||(o[0]?i.push("shortRight1"):i.push("topRightCurved"))),o[3]||(o[8]||(o[1]?i.push("shortDown1"):i.push("downLeftCurved")),o[9]||(o[2]?i.push("shortDown2"):i.push("downRightCurved"))),i},t.getFreeGameFreeTimePosAndTime=function(t){var e=[],n=[];this.respData.updateList[0].value.handleState.game_10017.data.resultList[t]&&(e=this.respData.updateList[0].value.handleState.game_10017.data.resultList[t].spinResult.grid);for(var o=0;o<e.length;o++){var i=e[o];if(i>=10){var a=slot.SlotMachineView.instance.getPosByIndex(o);10==i&&n.push([a,1,o+1]),11==i&&n.push([a,2,o+1]),12==i&&n.push([a,3,o+1])}}return n},t.bezierAct=function(t,e,n,o,i){void 0===i&&(i=null);var a=cc.jumpTo(n,cc.v2(e.x,e.y),o,1),r=cc.fadeOut(.3),s=cc.callFunc(function(){"function"==typeof i&&i()}.bind(this));t.runAction(cc.sequence(a,r,s))},t.getPosByOtherNode=function(t,e){var n=t.parent.convertToWorldSpaceAR(t.position);return e.convertToNodeSpaceAR(n)},t.getLineNumberByPos=function(t){t+=1;var e=Math.floor(t/7);return 0==t%7?e-1:e},t.getLineDataByResp=function(e){var n=[],o=[];t.respData.updateList[0].value.handleState.game_10017.data.resultList[e]&&(n=t.respData.updateList[0].value.handleState.game_10017.data.resultList[e].removePos);for(var i=0;i<n.length;i++){for(var a=n[i],r=this.getLineNumberByPos(a)+1,s=!0,c=0;c<o.length;c++)r==o[c]&&(s=!1);s&&o.push(r)}return o},t.getFamaleMouseData=function(){var e=[];t.respData.updateList&&(1==t.respData.updateList[0].value.handleState.game_10017.data.resultList.length?t.respData.updateList[0].value.handleState.game_10017.data.resultList[t.totalEliminateTime]&&(e=t.respData.updateList[0].value.handleState.game_10017.data.resultList[t.totalEliminateTime].crushMoveGrid):t.respData.updateList[0].value.handleState.game_10017.data.resultList[t.totalEliminateTime]&&t.respData.updateList[0].value.handleState.game_10017.data.resultList[t.totalEliminateTime]&&(e=t.respData.updateList[0].value.handleState.game_10017.data.resultList[t.totalEliminateTime].crushFixedGophersGrid));for(var n=[],o=0;o<e.length;o++){var i=e[o];8==i.elem&&n.push({pos:i.pos,index:o})}return n},t.getLastRespData=function(){var e=[];t.respData.updateList&&(e=t.respData.updateList[0].value.handleState.game_10017.data.resultList);var n=[];return 1==e.length?n=[]:e[0]&&(n=e[e.length-2].crushMoveGrid),n},t.addClearBgLight=function(t){slot.SlotMachineView.instance.node.getChildByName("effectNode"+t)?this.setClearLightBgOpacity(255,t):console.error("ywb","effectNode"+t)},t.setClearLightBgOpacity=function(t,e){var n=slot.SlotMachineView.instance.node.getChildByName("effectNode"+e);n&&n.getChildByName("clearLightFrame")&&(n.getChildByName("clearLightFrame").opacity=t)},t.respData=null,t.totalEliminateTime=0,t.eliminateTime=0,t.testData=[[3,10,17,24,31],[4,5,6,7,14],[25,26,27,28,32],[1,8,15,22,29]],t.data=[[{low:3,high:0,unsigned:!0},{low:10,high:0,unsigned:!0},{low:11,high:0,unsigned:!0},{low:12,high:0,unsigned:!0},{low:17,high:0,unsigned:!0},{low:24,high:0,unsigned:!0},{low:23,high:0,unsigned:!0},{low:25,high:0,unsigned:!0},{low:26,high:0,unsigned:!0}],[{low:13,high:0,unsigned:!0},{low:20,high:0,unsigned:!0},{low:19,high:0,unsigned:!0},{low:18,high:0,unsigned:!0},{low:21,high:0,unsigned:!0}],[{low:30,high:0,unsigned:!0},{low:31,high:0,unsigned:!0},{low:37,high:0,unsigned:!0},{low:36,high:0,unsigned:!0},{low:38,high:0,unsigned:!0}],[{low:39,high:0,unsigned:!0},{low:40,high:0,unsigned:!0},{low:46,high:0,unsigned:!0},{low:45,high:0,unsigned:!0},{low:47,high:0,unsigned:!0},{low:48,high:0,unsigned:!0}]],t}();n.default=o,cc._RF.pop()},{}],_slotFrameAniViewNodeCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"14682g8rGBD5b3FbWfcqjak","_slotFrameAniViewNodeCtrl");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GameEventName111001501"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){game.EventManager.getInstance().addEventListener(r.mouseEvent.MOUSE_MOVE_END,this.mouseMoveEnd,this)},e.prototype.mouseMoveEnd=function(){this.node.getChildByName("clearLightFrame").opacity=0},e.prototype.onDestroy=function(){game.EventManager.getInstance().removeEventListener(r.mouseEvent.MOUSE_MOVE_END,this.mouseMoveEnd,this)},a([c],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../GameEventName111001501":"GameEventName111001501"}],animationCallBack:[function(t,e,n){"use strict";cc._RF.push(e,"9bb00SQ52hEKbE8wfIAbOem","animationCallBack");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GameEventName111001501"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},e.prototype.animationStop=function(){game.EventManager.getInstance().raiseEvent(r.mouseEvent.ANIMATION_STOP_CALL_BACK)},a([c],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../GameEventName111001501":"GameEventName111001501"}],boardCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"e34c9c4bctH4ImoD8q1K7bX","boardCtrl");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GameEventName111001501"),s=t("../main/CommonNumAtlas111001501"),c=t("../tool/Tool"),l=cc._decorator,p=l.ccclass,h=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.p_nodeWin=null,e.p_nodeWinAni=null,e.beishuk=null,e.beishukAni=null,e.mouseState=0,e.beishukStartPos=cc.v2(2,129),e.beishukParentNode=null,e.boardPos=cc.v2(0,0),e}return i(e,t),e.prototype.onLoad=function(){this.boardPos=cc.v2(this.node.x,this.node.y),this.beishukParentNode=this.beishuk.parent},e.prototype.start=function(){game.EventManager.getInstance().addEventListener(r.mouseEvent.GET_REWARD_BOARD_CALL,this.mouseEvent,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.GET_REWARD_BEFOR,this.boardAndLaybelEvnt,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.INIT_TO_FREE_GAME,this.beishukAnimation,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.FREE_GAME_CLOSE,this.beishukBackAnimation,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.NORMAL_RECONNECTION_DATA,this.reconnetion,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.FREE_RECONNECTION_DATA,this.freeReconnetion,this),game.EventManager.getInstance().addEventListener(r.EventName.EVENT_STOP_WIN_NUM,this.mouseComeBackAni,this),game.EventManager.getInstance().addEventListener(r.EventName.FREE_GAME_OVER,this._onFreeGameOver,this)},e.prototype.freeReconnetion=function(t,e){var n;n=null==e.handleState.game_10017.data.resultList[0]?e.sumTimes:e.handleState.game_10017.data.resultList[e.handleState.game_10017.data.resultList.length-1].crushRate,this.node.opacity=255,this.p_nodeWin.string="*"+String(n),this.p_nodeWinAni.string="*"+String(n),this.mouseSpine("idle"),this.mouseState=2},e.prototype.reconnetion=function(t,e){var n=e.length;this.node.opacity=255,this.mouseState=1,this.mouseSpine("idle"),this.p_nodeWin.string="*"+String(n),this.p_nodeWinAni.string="*"+String(n)},e.prototype._onFreeGameOver=function(){this.mouseState=1,c.default.eliminateTime=0},e.prototype.mouseEvent=function(t,e){var n=this.node.getComponent(sp.Skeleton),o=this.beishuk.getComponent(sp.Skeleton),i=this.beishukAni.getComponent(sp.Skeleton),a=e+2;0==this.mouseState&&(this.node.opacity=255,n.timeScale=.5,i.setAnimation(0,"animation1",!1),slot.SoundMger.instance.playEffect(r.SOUND_NAME.Mtp_Appear,!1),this.mouseSpine("spawn",function(){n.timeScale=1})),2==this.mouseState&&(0==this.node.opacity&&(this.node.opacity=255,n.timeScale=.5,slot.SoundMger.instance.playEffect(r.SOUND_NAME.Mtp_Appear,!1),this.mouseSpine("spawn",function(){n.timeScale=1})),o.setAnimation(0,"animation2",!1),i.setAnimation(0,"animation1",!1)),1==this.mouseState&&(this.mouseSpine("collect"),i.setAnimation(0,"animation1",!1),o.setAnimation(0,"animation2",!1)),a>=6&&(a=6),slot.SoundMger.instance.playEffect("Mtp_Add_0"+a,!1),this.p_nodeWin.string="*"+String(e+2),this.p_nodeWinAni.string="*"+String(e+2),2!=this.mouseState&&(this.mouseState=1)},e.prototype.mouseSpine=function(t,e){void 0===e&&(e=null);var n=this.node.getComponent(sp.Skeleton);n.setAnimation(0,t,!1),n.setCompleteListener(function(){"idle"!=n.animation&&(n.setAnimation(0,"idle",!0),"function"==typeof e&&e())})},e.prototype.boardAndLaybelEvnt=function(){if(0!=this.mouseState){this.p_nodeWinAni.node.active=!0,this.p_nodeWinAni.node.stopAllActions(),this.p_nodeWinAni.node.setPosition(cc.v2(this.p_nodeWin.x,this.p_nodeWin.y+100)),slot.SoundMger.instance.playEffect(r.SOUND_NAME.Mtp_Effect,!1);var t=cc.scaleTo(.2,5),e=cc.moveBy(.2,cc.v2(0,300)),n=cc.moveBy(.5,cc.v2(0,-500)),o=cc.spawn(t,e),i=cc.callFunc(function(){this.mouseSpine("win"),game.EventManager.getInstance().raiseEvent(r.mouseEvent.OPACITY_END),this.p_nodeWinAni.node.active=!1}.bind(this));this.p_nodeWinAni.node.runAction(cc.sequence(o,n,i))}},e.prototype.beishukAnimation=function(){if(this.mouseState=2,0!=c.default.eliminateTime){var t=cc.scaleTo(.2,3),e=cc.moveBy(.1,cc.v2(0,15)),n=cc.moveBy(.1,cc.v2(0,-15)),o=cc.moveBy(.1,cc.v2(-15,0)),i=cc.moveBy(.1,cc.v2(15,0)),a=cc.moveBy(.1,cc.v2(0,15)),r=cc.moveBy(.1,cc.v2(0,-15)),s=cc.moveBy(.1,cc.v2(15,0)),l=cc.moveBy(.1,cc.v2(-15,0)),p=cc.callFunc(function(){this.mouseSpine("collect");var t=this.beishuk.parent.convertToWorldSpaceAR(this.beishuk.position),e=cc.Canvas.instance.node.convertToNodeSpaceAR(t),n=cc.Canvas.instance.node;this.beishuk.parent=n,this.beishuk.scale=1.2,this.beishuk.zIndex=slot.LayerManage.effect+1,this.beishuk.setPosition(cc.v2(e.x,e.y));var o=cc.scaleTo(.2,.55),i=cc.scaleTo(.2,.65);this.node.runAction(cc.sequence(o,i))}.bind(this)),h=cc.moveBy(.4,cc.v2(0,750)),u=cc.scaleTo(.2,.8,1.4),m=cc.scaleTo(.2,1.4,1.4),d=cc.sequence(u,m),f=cc.spawn(h,d),_=cc.callFunc(function(){}.bind(this));this.beishuk.runAction(cc.sequence(t,e,n,o,i,a,r,s,l,p,f,_))}},e.prototype.beishukBackAnimation=function(){if(0!=c.default.eliminateTime){var t=cc.moveBy(.4,cc.v2(0,-750)),e=cc.scaleTo(.2,.8,1.4),n=cc.scaleTo(.2,1.4,1.4),o=cc.sequence(e,n),i=cc.spawn(t,o),a=cc.callFunc(function(){this.beishuk.parent=this.beishukParentNode,this.beishuk.scale=2.7,this.beishuk.setPosition(cc.v2(this.beishukStartPos.x,this.beishukStartPos.y)),this.beishuk.zIndex=this.p_nodeWinAni.zIndex-1,this.p_nodeWinAni.zIndex=this.beishuk.zIndex+9}.bind(this));this.beishuk.runAction(cc.sequence(i,a))}},e.prototype.mouseComeBackAni=function(){if(2!=this.mouseState){var t=cc.moveBy(.1,cc.v2(0,20)),e=cc.moveBy(.2,cc.v2(0,-60)),n=cc.callFunc(function(){this.node.setPosition(this.boardPos),this.node.opacity=0,this.mouseState=0}.bind(this));this.node.runAction(cc.sequence(t,e,n))}},e.prototype.onDestroy=function(){game.EventManager.getInstance().removeEventListener(r.mouseEvent.GET_REWARD_AND_POP_TIME,this.mouseEvent,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.GET_REWARD_BEFOR,this.boardAndLaybelEvnt,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.INIT_TO_FREE_GAME,this.beishukAnimation,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.FREE_GAME_CLOSE,this.beishukBackAnimation,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.NORMAL_RECONNECTION_DATA,this.reconnetion,this),game.EventManager.getInstance().removeEventListener(r.EventName.EVENT_STOP_WIN_NUM,this.mouseComeBackAni,this),game.EventManager.getInstance().removeEventListener(r.EventName.FREE_GAME_OVER,this._onFreeGameOver,this)},a([h(s.default)],e.prototype,"p_nodeWin",void 0),a([h(s.default)],e.prototype,"p_nodeWinAni",void 0),a([h(cc.Node)],e.prototype,"beishuk",void 0),a([h(cc.Node)],e.prototype,"beishukAni",void 0),a([p],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../GameEventName111001501":"GameEventName111001501","../main/CommonNumAtlas111001501":"CommonNumAtlas111001501","../tool/Tool":"Tool"}],coreCote:[function(t,e,n){"use strict";cc._RF.push(e,"33955n68BxK/4tjjhxEYWXV","coreCote");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GameEventName111001501"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animationName=["a","b","c"],e.totalCoin=0,e}return i(e,t),e.prototype.start=function(){game.EventManager.getInstance().addEventListener(r.mouseEvent.GET_RAWARD_FOOD,this.coreCoteListener,this),game.EventManager.getInstance().addEventListener(r.EventName.EVENT_STOP_WIN_NUM,this.rollerStart,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.NORMAL_RECONNECTION_DATA,this.reconnetion,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.FREE_RECONNECTION_DATA,this.freeReconnetion,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.PUSH_MONYeVENT,this.monyReconnetion,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_UPDATE_WIN_ANI_END,this.playStrawberryBg,this)},e.prototype.freeReconnetion=function(t,e){e=e.handleState.game_10017.data.resultList,this.reconnetion(t,e)},e.prototype.monyReconnetion=function(t,e){var n=Number(slot.SlotUtils.formatNumber(slot.SpinManager.instance.betCost)),o=e.sumSpinCoin.low,i=0;if(0!=o){o/n>=5&&(i=1);var a="ib_bar_"+this.animationName[i]+"_"+this.node.name;this.setNodeOpacity(255),this.coreCoteSpineCtrl(a)}},e.prototype.reconnetion=function(t,e){for(var n=Number(slot.SlotUtils.formatNumber(slot.SpinManager.instance.betCost)),o=0,i=e,a=0;a<i.length;a++){var r=i[a].spinResult.spinCoin.low;this.totalCoin+=r}this.totalCoin/n>=5&&(o=1);var s="ib_bar_"+this.animationName[o]+"_"+this.node.name;this.setNodeOpacity(255),this.coreCoteSpineCtrl(s)},e.prototype.coreCoteListener=function(t,e,n,o){var i=0,a=null,r=Number(slot.SlotUtils.formatNumber(slot.SpinManager.instance.betCost));if(o[e]){a=Number(slot.SlotUtils.formatNumber(o[e].spinResult.spinCoin.low)),this.totalCoin+=a,this.totalCoin/r>=5&&(i=1);var s="ib_bar_"+this.animationName[i]+"_"+this.node.name;this.setNodeOpacity(255),this.coreCoteSpineCtrl(s)}},e.prototype.rollerStart=function(){this.totalCoin=0,this.fadOutAnimation()},e.prototype.fadOutAnimation=function(){slot.SoundMger.instance.stopEffect(r.SOUND_NAME.Textbox_Coin);var t=cc.fadeOut(.5),e=cc.callFunc(function(){}.bind(this));this.node.runAction(cc.sequence(t,e))},e.prototype.playStrawberryBg=function(){this.coreCoteSpineCtrl("ib_bar_"+this.animationName[2]+"_"+this.node.name)},e.prototype.setNodeOpacity=function(t){this.node.opacity=t},e.prototype.coreCoteSpineCtrl=function(t){var e=this.node.getComponent(sp.Skeleton);e.setAnimation(0,t,!1),e.setEndListener(function(){}.bind(this))},e.prototype.onDestroy=function(){game.EventManager.getInstance().removeEventListener(r.mouseEvent.GET_REWARD_AND_POP_TIME,this.coreCoteListener,this),game.EventManager.getInstance().removeEventListener(r.EventName.EVENT_STOP_WIN_NUM,this.rollerStart,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.FREE_RECONNECTION_DATA,this.freeReconnetion,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.PUSH_MONYeVENT,this.monyReconnetion,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_UPDATE_WIN_ANI_END,this.playStrawberryBg,this)},a([c],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../GameEventName111001501":"GameEventName111001501"}],femaleMouseCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"fcc38uaRO5LP6DnsWIZ4aZj","femaleMouseCtrl");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GameEventName111001501"),s=t("../tool/Tool"),c=t("./mouseBase"),l=cc._decorator,p=l.ccclass,h=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.test=null,e.test2=null,e.mouseNumber=null,e.isInRollSpeed=!1,e}return i(e,t),e.prototype.start=function(){game.EventManager.getInstance().addEventListener(r.mouseEvent.CLEAR_MOUSE_MOVE,this.clearMouseMove,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.GET_REWARD_BEGAN,this.checkIsPrizeAndPlayAni,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.GET_FREE_REWARD_BEGAN_MOUSE_BG,this.playInFreeAni,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.ROLL_ANI_START_WHO,this.playRollAniEvent,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.PLAY_ROLL_ANI_BEGAN,this.playRollAni,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.PLAY_ROLL_ANI_END,this.stopRollAni,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.ROLL_ANI_END,this.rollAniEnd,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.MOUSE_MOVE_POS,this.rollStartMouseMove,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_STOP_SLOT_MACHINE_IMMEDIATELY,this.event_stop_slot_machine_immediately,this)},e.prototype.checkIsPrizeAndPlayAni=function(){var t=this;if(this.getMoveDataArrByRespForNormal(s.default.totalEliminateTime)!=this.currentRewardPos){var e=0;this.mouseSpineCtrl("win",!1,function(){if(0==e){var n=cc.delayTime(.2),o=cc.callFunc(function(){this.mouseSpineCtrl("win",!1),e++}.bind(t));t.mouse.runAction(cc.sequence(n,o))}})}},e.prototype.playRollAniEvent=function(t,e){e>s.default.getLineNumberByPos(this.currentPos)&&!this.isInRollSpeed&&(this.playRollAni(),this.isInRollSpeed=!0)},e.prototype.playRollAni=function(){this.mouseBgRotateSpineCtrl("animation_back_loop",!0),this.mouseBigPlistSpineCtrl("animation_front_loop",!0),this.scaleAnimation()},e.prototype.stopRollAni=function(){this.stopScaleAnimation(),this.wild_win.active=!1,this.wild_win_front.active=!1},e.prototype.rollAniEnd=function(){this.stopScaleAnimation(),this.wild_win_front.active=!1,this.wild_win.active=!1,this.isInRollSpeed=!1},e.prototype.event_stop_slot_machine_immediately=function(){var t=this;this.scheduleOnce(function(){t.rollAniEnd()},.1)},e.prototype.playInFreeAni=function(){var t=this;this.mouseBgRotateSpineCtrl("animation_back",!1,function(){t.wild_win.active=!1}),this.mouseBigPlistSpineCtrl("animation_front",!1,function(){t.wild_win_front.active=!1})},e.prototype.rollStartMouseMove=function(){2==s.default.respData.state&&this.clearMouseMove("\u514d\u8d39\u6e38\u620f\u5185\u79fb\u52a8",s.default.totalEliminateTime,!0)},e.prototype.clearMouseMove=function(t,e,n){var o=this;if(void 0===n&&(n=null),this.rate=500,null!=this.mouseNumber){var i=0;n?i=this.getMoveDataArrByRespForFree():(this.changeSelfIndex(e),i=this.getMoveDataArrByRespForNormal(e)),this.mouseMove(i,function(){},function(){var t=cc.delayTime(0),e=cc.delayTime(.2),n=cc.callFunc(function(){this.checkThatTimeIsLastTime(),i!=this.currentPos&&(this.mouseLightSpineCtrl(!1),this.mouseBgSpineCtrl("wild_move_back",!1))}.bind(o)),a=cc.callFunc(function(){game.EventManager.getInstance().raiseEvent(r.mouseEvent.MOUSE_MOVE_END)}.bind(o));o.node.runAction(cc.sequence(t,n,e,a))},function(t){s.default.addClearBgLight(i-1);for(var e=0;e<t[0];e++){var n=cc.delayTime(t[1]+e*t[1]),a=cc.callFunc(function(){slot.SoundMger.instance.playEffect(r.SOUND_NAME.Role_Win_Move,!1)}.bind(o));o.node.runAction(cc.sequence(n,a))}},function(){console.error("ywb\u6d88\u9664\u540e\u5730\u9f20\u79fb\u52a8",i)})}},e.prototype.checkThatTimeIsLastTime=function(){var t=s.default.respData.updateList[0].value.handleState.game_10017.data.resultList;this.test2.string=String(s.default.totalEliminateTime)+"-"+String(t.length-1),s.default.totalEliminateTime==t.length-1&&this.changeSelfIndex(s.default.totalEliminateTime,!0)},e.prototype.changeSelfIndex=function(t,e){void 0===e&&(e=null);var n=s.default.respData.updateList[0].value.handleState.game_10017.data.resultList,o=[];e?o=n[t].crushMoveGrid:n[t]&&(o=n[t].crushFixedGophersGrid);for(var i=0;i<o.length;i++)o[i].pos==this.currentPos&&(this.mouseNumber=i,this.test.string=String(i))},e.prototype.getMoveDataArrByRespForNormal=function(t){return s.default.respData.updateList[0].value.handleState.game_10017.data.resultList[t].crushMoveGrid[this.mouseNumber].pos},e.prototype.getMoveDataArrByRespForFree=function(){return s.default.respData.updateList[0].value.handleState.game_10017.data.fixedGophersGrid[this.mouseNumber].pos},e.prototype.onDestroy=function(){game.EventManager.getInstance().removeEventListener(r.mouseEvent.CLEAR_MOUSE_MOVE,this.clearMouseMove,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.GET_REWARD_BEGAN,this.checkIsPrizeAndPlayAni,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.GET_FREE_REWARD_BEGAN_MOUSE_BG,this.playInFreeAni,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.ROLL_ANI_START_WHO,this.playRollAniEvent,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.ROLL_ANI_END,this.rollAniEnd,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.MOUSE_MOVE_POS,this.rollStartMouseMove,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.PLAY_ROLL_ANI_BEGAN,this.playRollAni,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.PLAY_ROLL_ANI_END,this.stopRollAni,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_STOP_SLOT_MACHINE_IMMEDIATELY,this.event_stop_slot_machine_immediately,this)},a([h(cc.Label)],e.prototype,"test",void 0),a([h(cc.Label)],e.prototype,"test2",void 0),a([p],e)}(c.default);n.default=u,cc._RF.pop()},{"../GameEventName111001501":"GameEventName111001501","../tool/Tool":"Tool","./mouseBase":"mouseBase"}],freeAddTimeNodeCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"4ff9dC1FLtFNJ5NeslxelzP","freeAddTimeNodeCtrl");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spriteFrame=[],e.sprite=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.changeNodeSpritFrame=function(t){this.sprite.spriteFrame=this.spriteFrame[Number(t)-1]},a([c([cc.SpriteFrame])],e.prototype,"spriteFrame",void 0),a([c(cc.Sprite)],e.prototype,"sprite",void 0),a([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],horseLightCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"a5d20hMnnpHCLmAKZF42eV3","horseLightCtrl");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GameEventName111001501"),s=t("../tool/Tool"),c=cc._decorator,l=c.ccclass,p=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spriteFrame=[],e.en=[],e.th=[],e.id=[],e.sv=[],e.da=[],e.startPos=cc.v2(0,0),e.randomNumberCtrl=null,e.chooseLanguageSp=null,e}return i(e,t),e.prototype.onLoad=function(){switch(slot.GData.curLanguage){case"zh":this.chooseLanguageSp=this.spriteFrame;break;case"en":this.chooseLanguageSp=this.en;break;case"th":this.chooseLanguageSp=this.th;break;case"id":this.chooseLanguageSp=this.id;break;case"sv":this.chooseLanguageSp=this.sv;break;case"da":this.chooseLanguageSp=this.da;break;default:this.chooseLanguageSp=this.en}this.startPos=cc.v2(this.node.x,this.node.y)},e.prototype.start=function(){game.EventManager.getInstance().addEventListener(r.mouseEvent.ROLL_ANI_START,this.horstActive,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.ROLL_END_CALL_BACK,this.rollStop,this),this.horseLightCtrl(),this.schedule(this.horseLightCtrl,8)},e.prototype.horstActive=function(t,e){this.randomNumberCtrl=e,this.horseLightCtrl()},e.prototype.rollStop=function(){this.randomNumberCtrl=null,this.horseLightCtrl()},e.prototype.horseLightCtrl=function(){this.node.setPosition(this.startPos);var t=slot.MathUtil.getRandomRange(1,4,!0),e=slot.MathUtil.getRandomRange(0,1,!0);null!=this.randomNumberCtrl&&(t=this.randomNumberCtrl),s.default.respData&&2==s.default.respData.state&&(t=0==e?0:6),this.node.getComponent(cc.Sprite).spriteFrame=this.chooseLanguageSp[t],this.node.stopAllActions(),t>=3&&t<=4&&this.horseLightAni()},e.prototype.horseLightAni=function(){this.node.x+=50,this.node.stopAllActions();var t=cc.delayTime(2),e=cc.moveBy(5,cc.v2(-800,0)),n=cc.callFunc(function(){}.bind(this));this.node.runAction(cc.sequence(t,e,n))},e.prototype.onDestroy=function(){game.EventManager.getInstance().removeEventListener(r.mouseEvent.ROLL_ANI_START,this.horstActive,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.ROLL_END_CALL_BACK,this.rollStop,this)},a([p([cc.SpriteFrame])],e.prototype,"spriteFrame",void 0),a([p([cc.SpriteFrame])],e.prototype,"en",void 0),a([p([cc.SpriteFrame])],e.prototype,"th",void 0),a([p([cc.SpriteFrame])],e.prototype,"id",void 0),a([p([cc.SpriteFrame])],e.prototype,"sv",void 0),a([p([cc.SpriteFrame])],e.prototype,"da",void 0),a([l],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../GameEventName111001501":"GameEventName111001501","../tool/Tool":"Tool"}],lightFrameCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"d516cDkCGdOpbn7UcAm5/X6","lightFrameCtrl");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GameEventName111001501"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){game.EventManager.getInstance().addEventListener(r.mouseEvent.PLAY_BURST_ANI_BEGAN,this.setLightOpacity,this)},e.prototype.start=function(){},e.prototype.setLightOpacity=function(){this.node.opacity=0},e.prototype.onDestroy=function(){},e.prototype.update=function(){game.EventManager.getInstance().addEventListener(r.mouseEvent.PLAY_BURST_ANI_BEGAN,this.setLightOpacity,this)},a([c],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../GameEventName111001501":"GameEventName111001501"}],lineNodeCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"964970RvfNK8Jmxh5HnMsH8","lineNodeCtrl");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GameEventName111001501"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){game.EventManager.getInstance().addEventListener(r.mouseEvent.ANIMATION_STOP_CALL_BACK,this.lineNodeCtrl,this)},e.prototype.lineNodeCtrl=function(){this.node.children.forEach(function(t){t.opacity=0})},e.prototype.onDestroy=function(){game.EventManager.getInstance().removeEventListener(r.mouseEvent.ANIMATION_STOP_CALL_BACK,this.lineNodeCtrl,this)},a([c],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../GameEventName111001501":"GameEventName111001501"}],mouseBase:[function(t,e,n){"use strict";cc._RF.push(e,"30983zTFThPQZi6x0pI3ou9","mouseBase");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GameEventName111001501"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mouse=null,e.wild_move=null,e.light=null,e.wild_win=null,e.wild_win_front=null,e.mouseSkeleton=null,e.currentPos=0,e.currentRewardPos=0,e.rate=0,e.fastBtnState=2,e}return i(e,t),e.prototype.onLoad=function(){"zh"!=slot.GData.curLanguage&&(this.mouse.getComponent(sp.Skeleton).skeletonData=this.mouseSkeleton)},e.prototype.start=function(){},e.prototype.mouseMove=function(t,e,n,o,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===i&&(i=null);var a=slot.SlotMachineView.instance.getPosByIndex(t-1);if(a)if(1==this.fastBtnState)this.node.setPosition(a),game.EventManager.getInstance().raiseEvent(r.mouseEvent.MOUSE_BIG_MOVE_END),this.mouseSpineCtrl("idle",!1);else{"function"==typeof e&&e(),this.currentPos=t,this.currentRewardPos=t;var s=this.getAllCellNumber(Math.abs(a.x-this.node.x),Math.abs(a.y-this.node.y)),c=cc.delayTime(1),l=cc.callFunc(function(){"function"==typeof o&&o(s)}.bind(this)),p=cc.moveBy(this.getTimeByRate(Math.abs(a.x-this.node.x)),cc.v2(a.x-this.node.x,0)),h=cc.moveBy(this.getTimeByRate(Math.abs(a.y-this.node.y)),cc.v2(0,a.y-this.node.y)),u=cc.callFunc(function(){"function"==typeof n&&n()}.bind(this));this.node.runAction(cc.sequence(c,l,p,h,u))}else"function"==typeof e&&e(),console.error("ywb\u670d\u52a1\u7aef\u6570\u636e\u5f02\u5e38",t,a)},e.prototype.mouseLightSpineCtrl=function(t,e){var n=this;void 0===e&&(e=null);var o=this.light.getComponent(sp.Skeleton);this.light.active=!0,o.setAnimation(0,"wild_move_front",t),o.setCompleteListener(function(){n.light.active=!1,"function"==typeof e&&e()})},e.prototype.mouseBgSpineCtrl=function(t,e){var n=this,o=this.wild_move.getComponent(sp.Skeleton);this.wild_move.active=!0,o.setAnimation(0,t,e),o.setCompleteListener(function(){n.wild_move.active=!1})},e.prototype.mouseBgRotateSpineCtrl=function(t,e,n){void 0===n&&(n=null);var o=this.wild_win.getComponent(sp.Skeleton);this.wild_win.active=!0,o.setAnimation(0,t,e),o.setCompleteListener(function(){"function"==typeof n&&n()})},e.prototype.mouseBigPlistSpineCtrl=function(t,e,n){void 0===n&&(n=null);var o=this.wild_win_front.getComponent(sp.Skeleton);this.wild_win_front.active=!0,o.setAnimation(0,t,e),o.setCompleteListener(function(){"function"==typeof n&&n()})},e.prototype.mouseSpineCtrl=function(t,e,n){void 0===n&&(n=null);var o=this.mouse.getComponent(sp.Skeleton);o.setAnimation(0,t,e),o.setCompleteListener(function(){"function"==typeof n&&n()})},e.prototype.scaleAnimation=function(){var t=cc.scaleTo(.4,1.1),e=cc.scaleTo(.4,1),n=cc.sequence(t,e);this.mouse.runAction(cc.repeatForever(n))},e.prototype.stopScaleAnimation=function(){this.mouse.stopAllActions(),this.mouse.scale=1},e.prototype.getTimeByRate=function(t){return t/this.rate},e.prototype.getAllCellNumber=function(t,e){var n=t+e,o=Math.floor(n/106);return[o,this.getTimeByRate(n)/o]},e.prototype.onDestroy=function(){},a([l(cc.Node)],e.prototype,"mouse",void 0),a([l(cc.Node)],e.prototype,"wild_move",void 0),a([l(cc.Node)],e.prototype,"light",void 0),a([l(cc.Node)],e.prototype,"wild_win",void 0),a([l(cc.Node)],e.prototype,"wild_win_front",void 0),a([l(sp.SkeletonData)],e.prototype,"mouseSkeleton",void 0),a([c],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../GameEventName111001501":"GameEventName111001501"}],mouseCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"f9852Dsc3FNToYg37MLc14i","mouseCtrl");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GameEventName111001501"),s=t("../tool/Tool"),c=t("./mouseBase"),l=cc._decorator,p=l.ccclass,h=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.baiDaLight=null,e.test=null,e.takeDataBool=!0,e.targetPos=null,e.isInRollSpeed=!1,e}return i(e,t),e.prototype.start=function(){game.EventManager.getInstance().addEventListener(r.mouseEvent.MOUSE_MOVE_POS,this.rollStartMouseMove,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.INIT_MOUSE_MOVE_POS,this.initMouseCurrentPos,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.INIT_MOUSE_MOVE_POS_REWARD,this.initMouseCurrentPosReward,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.CLEAR_MOUSE_MOVE,this.clearMouseMove,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.GET_REWARD_BEGAN,this.checkIsPrizeAndPlayAni,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.GET_FREE_REWARD_BEGAN_MOUSE_BG,this.playInFreeAni,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.ROLL_ANI_START_WHO,this.playRollAniEvent,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.ROLL_ANI_END,this.rollAniEnd,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.PLAY_ROLL_ANI_BEGAN,this.playRollAni,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.PLAY_ROLL_ANI_END,this.stopRollAni,this),game.EventManager.getInstance().addEventListener(r.mouseEvent.NOT_HAVE_MONY_OPEN_ROLL,this.notHaveMonyRun,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_GOLDNOTENOUGH_OKBTN,this.btnCloseCallBack,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_STOP_SLOT_MACHINE_IMMEDIATELY,this.event_stop_slot_machine_immediately,this)},e.prototype.initMouseCurrentPos=function(t,e){this.currentPos=e},e.prototype.initMouseCurrentPosReward=function(t,e){this.currentRewardPos=e},e.prototype.playRollAniEvent=function(t,e){e>s.default.getLineNumberByPos(this.currentPos)&&!this.isInRollSpeed&&(this.playRollAni(),this.isInRollSpeed=!0),this.currentPos},e.prototype.playRollAni=function(){this.mouseBgRotateSpineCtrl("animation_back_loop",!0),this.mouseBigPlistSpineCtrl("animation_front_loop",!0),this.scaleAnimation()},e.prototype.stopRollAni=function(){this.stopScaleAnimation(),this.wild_win.active=!1,this.wild_win_front.active=!1},e.prototype.notHaveMonyRun=function(){this.node.stopAllActions(),this.rate=300;var t=!0,e=slot.SlotMachineView.instance.getPosByIndex(0),n=this.getTimeByRate(Math.abs(e.x-this.node.x))+this.getTimeByRate(Math.abs(e.y-this.node.y)),o=cc.delayTime(n+.4),i=cc.delayTime(2.2),a=cc.delayTime(2.2),r=cc.delayTime(2.2),s=cc.callFunc(function(){var e=this;this.baseMouseMove(1,function(){t&&(t=!1,e.wild_move.active=!0,e.baiDaLight.active=!0,e.mouseSpineCtrl("burrow_start",!1),e.mouseBgSpineCtrl("wild_fastmove_back",!1))})}.bind(this)),c=cc.callFunc(function(){this.moveToAct(7)}.bind(this)),l=cc.callFunc(function(){this.moveToAct(49)}.bind(this)),p=cc.callFunc(function(){this.moveToAct(43)}.bind(this)),h=cc.sequence(s,o,c,i,l,a,p,r);this.node.runAction(cc.repeatForever(h))},e.prototype.moveToAct=function(t){var e=slot.SlotMachineView.instance.getPosByIndex(t-1),n=cc.moveTo(2.12,cc.v2(e.x,e.y));this.node.runAction(n)},e.prototype.baseMouseMove=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null)},e.prototype.btnCloseCallBack=function(){var t=this;this.baseMouseMove(25,function(){t.node.stopAllActions()},function(){t.baiDaLight.active=!1,t.mouseLightSpineCtrl(!1),t.mouseSpineCtrl("burrow_exit",!1),game.EventManager.getInstance().raiseEvent(r.mouseEvent.MOUSE_BIG_MOVE_END)})},e.prototype.rollAniEnd=function(){this.stopScaleAnimation(),this.wild_win_front.active=!1,this.wild_win.active=!1,this.isInRollSpeed=!1},e.prototype.checkIsPrizeAndPlayAni=function(){var t=this;if(this.getMoveDataArrByResp(s.default.totalEliminateTime,9)!=this.currentRewardPos){var e=0;this.mouseSpineCtrl("win",!1,function(){if(0==e){var n=cc.delayTime(.2),o=cc.callFunc(function(){this.mouseSpineCtrl("win",!1),e++}.bind(t));t.mouse.runAction(cc.sequence(n,o))}})}},e.prototype.event_stop_slot_machine_immediately=function(){},e.prototype.playInFreeAni=function(){var t=this;this.mouseBgRotateSpineCtrl("animation_back",!1,function(){t.wild_win.active=!1}),this.mouseBigPlistSpineCtrl("animation_front",!1,function(){t.wild_win_front.active=!1})},e.prototype.rollStartMouseMove=function(){var t=this,e=0;if(1==s.default.respData.state){for(var n=s.default.respData.updateList[0].value.handleState.game_10017.data.fixedGophersGrid,o=0;o<n.length;o++){var i=n[o];9==i.elem&&(e=i.pos)}this.mouseMoveInNormal(e)}else this.clearMouseMove("\u514d\u8d39\u79fb\u52a8",s.default.totalEliminateTime,function(){},function(){var e=cc.delayTime(.2),n=cc.callFunc(function(){game.EventManager.getInstance().raiseEvent(r.mouseEvent.MOUSE_BIG_MOVE_END)}.bind(t));t.node.runAction(cc.sequence(e,n))},!0)},e.prototype.mouseMoveInNormal=function(){},e.prototype.clearMouseMove=function(t,e,n,o,i){void 0===n&&(n=null),void 0===o&&(o=null),void 0===i&&(i=null)},e.prototype.getMoveDataArrByResp=function(){return null},e.prototype.getMoveDataArrByRespForFree=function(t,e){for(var n=s.default.respData.updateList[0].value.handleState.game_10017.data.fixedGophersGrid,o=null,i=0;i<n.length;i++)if(n[i].elem==e){o=n[i].pos,this.test.string=String(i);break}return o},e.prototype.onDestroy=function(){game.EventManager.getInstance().removeEventListener(r.mouseEvent.MOUSE_MOVE_POS,this.rollStartMouseMove,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.INIT_MOUSE_MOVE_POS_REWARD,this.initMouseCurrentPosReward,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.INIT_MOUSE_MOVE_POS,this.initMouseCurrentPos,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.CLEAR_MOUSE_MOVE,this.clearMouseMove,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.GET_REWARD_BEGAN,this.checkIsPrizeAndPlayAni,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.GET_FREE_REWARD_BEGAN_MOUSE_BG,this.playInFreeAni,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.ROLL_ANI_START_WHO,this.playRollAniEvent,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.ROLL_ANI_END,this.rollAniEnd,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.PLAY_ROLL_ANI_BEGAN,this.playRollAni,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.PLAY_ROLL_ANI_END,this.stopRollAni,this),game.EventManager.getInstance().removeEventListener(r.mouseEvent.NOT_HAVE_MONY_OPEN_ROLL,this.notHaveMonyRun,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_GOLDNOTENOUGH_OKBTN,this.btnCloseCallBack,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_STOP_SLOT_MACHINE_IMMEDIATELY,this.event_stop_slot_machine_immediately,this)},a([h(cc.Node)],e.prototype,"baiDaLight",void 0),a([h(cc.Label)],e.prototype,"test",void 0),a([p],e)}(c.default);n.default=u,cc._RF.pop()},{"../GameEventName111001501":"GameEventName111001501","../tool/Tool":"Tool","./mouseBase":"mouseBase"}],test:[function(t,e,n){"use strict";cc._RF.push(e,"e2cfdqRi7RPVoO6BRrRZHNa","test");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab=null,e.spF=null,e.node_cocos=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.btn=function(){this.node_cocos.x=-500,this.node_cocos.getComponent(cc.Sprite).spriteFrame=this.spF,this.putNodeToPlayAction(this.node_cocos)},e.prototype.btn2=function(){},e.prototype.putNodeToPlayAction=function(t){var e=cc.moveTo(2,cc.v2(1e3,0)),n=cc.moveTo(2,cc.v2(-100,0)),o=cc.sequence(e,n);t.runAction(o)},e.checkOneDataWithSelfLine=function(t,e){var n=this,o=[!1,!1,!1,!1],i=[];e.forEach(function(e){var i=e.low;t+7===i?o[2]=!0:t-7===i?o[1]=!0:t-1===i&&n.otherTwoDataHandle(t)?o[0]=!0:t+1===i&&n.otherOneDataHandle(t)&&(o[3]=!0)});var a=slot.SlotMachineView.instance.scroller.getRenderByIndex(t);return i.push(a),o[0]?o[3]||(o[1]||o[2]?(o[1]||i.push("downLeft"),o[2]||i.push("downRight")):i.push("specialDownRight","specialDownLeft")):o[1]||o[2]?(!o[1]&&o[3]?i.push("topLeft"):o[1]||o[3]||i.push("specialTopLeft2","specialDownLeft2"),!o[2]&&o[3]?i.push("topRight"):o[2]||o[3]||i.push("specialTopRight2","specialDownRight2")):i.push("specialTopLeft","specialTopRight"),o[0]||o[1]&&o[2]&&i.push("top"),o[3]||o[1]&&o[2]&&i.push("down"),o[0]&&o[3]&&(o[1]||i.push("left"),o[2]||i.push("right")),i},a([c(cc.Prefab)],e.prototype,"prefab",void 0),a([c(cc.SpriteFrame)],e.prototype,"spF",void 0),a([c(cc.Node)],e.prototype,"node_cocos",void 0),a([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{}]},{},["Banner111001501","GameEventName111001501","GemBoom111001501","NumAtlasLabel111001501","StartFristDialog111001501","BonusGame111001501","FreeGameResult","GameBg111001501","CommonNumAtlas111001501","GameDataManager","HP111001501","LanguageInfo111001501","LanguageInfoTest","LanguangeCompSlot111001501","Main111001501","MonsterCtr111001501","RespinCtr111001501","Result111001501","ScoreRoll111001501","Adaptive111001501","GameLayer111001501","GameRoller111001501","SpinSlotViewExtend111001501","_slotFrameAniViewNodeCtrl","boardCtrl","coreCote","femaleMouseCtrl","freeAddTimeNodeCtrl","horseLightCtrl","lineNodeCtrl","mouseBase","mouseCtrl","Cannon","EliminateEffectUtils111001501","JTChildManager111001501","JTLast111001501","JTLayerManager111001501","JTLogicFactroy111001501","JTMonster111001501","JTPpayLinesask111001501","JTRun111001501","JTTest111001501","test","Tool","animationCallBack","lightFrameCtrl"]);